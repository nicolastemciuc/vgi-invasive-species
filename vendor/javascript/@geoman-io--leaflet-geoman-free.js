// @geoman-io/leaflet-geoman-free@2.18.3 downloaded from https://ga.jspm.io/npm:@geoman-io/leaflet-geoman-free@2.18.3/dist/leaflet-geoman.js

var g=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;(()=>{var _=Object.create;var m=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var S=(g,_)=>()=>(_||g((_={exports:{}}).exports,_),_.exports);var rh=(g,_,L,k)=>{if(_&&typeof _=="object"||typeof _=="function")for(let x of v(_))!M.call(g,x)&&x!==L&&m(g,x,{get:()=>_[x],enumerable:!(k=y(_,x))||k.enumerable});return g};var xt=(g,y,L)=>(L=g!=null?_(k(g)):{},rh(!y&&g&&g.__esModule?L:m(L,"default",{value:g,enumerable:!0}),g));var x=S(((_,m)=>{function sh(){(this||g).__data__=[],(this||g).size=0}m.exports=sh}));var w=S(((g,_)=>{function ah(g,_){return g===_||g!==g&&_!==_}_.exports=ah}));var C=S(((g,_)=>{var m=w();function lh(g,_){for(var y=g.length;y--;)if(m(g[y][0],_))return y;return-1}_.exports=lh}));var B=S(((_,m)=>{var y=C(),L=Array.prototype,v=L.splice;function ph(_){var m=(this||g).__data__,L=y(m,_);if(L<0)return!1;var k=m.length-1;return L==k?m.pop():v.call(m,L,1),--(this||g).size,!0}m.exports=ph}));var I=S(((_,m)=>{var y=C();function dh(_){var m=(this||g).__data__,L=y(m,_);return L<0?void 0:m[L][1]}m.exports=dh}));var j=S(((_,m)=>{var y=C();function mh(_){return y((this||g).__data__,_)>-1}m.exports=mh}));var z=S(((_,m)=>{var y=C();function yh(_,m){var L=(this||g).__data__,v=y(L,_);return v<0?(++(this||g).size,L.push([_,m])):L[v][1]=m,this||g}m.exports=yh}));var N=S(((g,_)=>{var m=x(),y=B(),L=I(),v=j(),k=z();function jt(g){var _=-1,m=g==null?0:g.length;for(this.clear();++_<m;){var y=g[_];this.set(y[0],y[1])}}jt.prototype.clear=m;jt.prototype.delete=y;jt.prototype.get=L;jt.prototype.has=v;jt.prototype.set=k;_.exports=jt}));var F=S(((_,m)=>{var y=N();function wh(){(this||g).__data__=new y,(this||g).size=0}m.exports=wh}));var U=S(((_,m)=>{function Ch(_){var m=(this||g).__data__,y=m.delete(_);return(this||g).size=m.size,y}m.exports=Ch}));var K=S(((_,m)=>{function Eh(_){return(this||g).__data__.get(_)}m.exports=Eh}));var H=S(((_,m)=>{function Ph(_){return(this||g).__data__.has(_)}m.exports=Ph}));var Y=S(((_,m)=>{var y=typeof g=="object"&&g&&g.Object===Object&&g;m.exports=y}));var X=S(((g,_)=>{var m=Y(),y=typeof self=="object"&&self&&self.Object===Object&&self,L=m||y||Function("return this")();_.exports=L}));var $=S(((g,_)=>{var m=X(),y=m.Symbol;_.exports=y}));var Z=S(((g,_)=>{var m=$(),y=Object.prototype,L=y.hasOwnProperty,v=y.toString,k=m?m.toStringTag:void 0;function Gh(g){var _=L.call(g,k),m=g[k];try{g[k]=void 0;var y=!0}catch{}var M=v.call(g);return y&&(_?g[k]=m:delete g[k]),M}_.exports=Gh}));var W=S(((g,_)=>{var m=Object.prototype,y=m.toString;function zh(g){return y.call(g)}_.exports=zh}));var Q=S(((g,_)=>{var m=$(),y=Z(),L=W(),v="[object Null]",k="[object Undefined]",M=m?m.toStringTag:void 0;function jh(g){return g==null?g===void 0?k:v:M&&M in Object(g)?y(g):L(g)}_.exports=jh}));var tt=S(((g,_)=>{function Hh(g){var _=typeof g;return g!=null&&(_=="object"||_=="function")}_.exports=Hh}));var et=S(((g,_)=>{var m=Q(),y=tt(),L="[object AsyncFunction]",v="[object Function]",k="[object GeneratorFunction]",M="[object Proxy]";function Qh(g){if(!y(g))return!1;var _=m(g);return _==v||_==k||_==L||_==M}_.exports=Qh}));var it=S(((g,_)=>{var m=X(),y=m["__core-js_shared__"];_.exports=y}));var nt=S(((g,_)=>{var m=it(),y=function(){var g=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function iu(g){return!!y&&y in g}_.exports=iu}));var at=S(((g,_)=>{var m=Function.prototype,y=m.toString;function su(g){if(g!=null){try{return y.call(g)}catch{}try{return g+""}catch{}}return""}_.exports=su}));var st=S(((g,_)=>{var m=et(),y=nt(),L=tt(),v=at(),k=/[\\^$.*+?()[\]{}|]/g,M=/^\[object .+?Constructor\]$/,x=Function.prototype,w=Object.prototype,C=x.toString,B=w.hasOwnProperty,I=RegExp("^"+C.call(B).replace(k,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _u(g){if(!L(g)||y(g))return!1;var _=m(g)?I:M;return _.test(v(g))}_.exports=_u}));var ht=S(((g,_)=>{function yu(g,_){return g?.[_]}_.exports=yu}));var pt=S(((g,_)=>{var m=st(),y=ht();function vu(g,_){var L=y(g,_);return m(L)?L:void 0}_.exports=vu}));var ut=S(((g,_)=>{var m=pt(),y=X(),L=m(y,"Map");_.exports=L}));var ct=S(((g,_)=>{var m=pt(),y=m(Object,"create");_.exports=y}));var dt=S(((_,m)=>{var y=ct();function Eu(){(this||g).__data__=y?y(null):{},(this||g).size=0}m.exports=Eu}));var mt=S(((_,m)=>{function Pu(_){var m=this.has(_)&&delete(this||g).__data__[_];return(this||g).size-=m?1:0,m}m.exports=Pu}));var Lt=S(((_,m)=>{var y=ct(),L="__lodash_hash_undefined__",v=Object.prototype,k=v.hasOwnProperty;function Du(_){var m=(this||g).__data__;if(y){var v=m[_];return v===L?void 0:v}return k.call(m,_)?m[_]:void 0}m.exports=Du}));var bt=S(((_,m)=>{var y=ct(),L=Object.prototype,v=L.hasOwnProperty;function Gu(_){var m=(this||g).__data__;return y?m[_]!==void 0:v.call(m,_)}m.exports=Gu}));var kt=S(((_,m)=>{var y=ct(),L="__lodash_hash_undefined__";function zu(_,m){var v=(this||g).__data__;return(this||g).size+=this.has(_)?0:1,v[_]=y&&m===void 0?L:m,this||g}m.exports=zu}));var Mt=S(((g,_)=>{var m=dt(),y=mt(),L=Lt(),v=bt(),k=kt();function Xt(g){var _=-1,m=g==null?0:g.length;for(this.clear();++_<m;){var y=g[_];this.set(y[0],y[1])}}Xt.prototype.clear=m;Xt.prototype.delete=y;Xt.prototype.get=L;Xt.prototype.has=v;Xt.prototype.set=k;_.exports=Xt}));var Ct=S(((_,m)=>{var y=Mt(),L=N(),v=ut();function Yu(){(this||g).size=0,(this||g).__data__={hash:new y,map:new(v||L),string:new y}}m.exports=Yu}));var Pt=S(((g,_)=>{function Ju(g){var _=typeof g;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?g!=="__proto__":g===null}_.exports=Ju}));var St=S(((g,_)=>{var m=Pt();function Zu(g,_){var y=g.__data__;return m(_)?y[typeof _=="string"?"string":"hash"]:y.map}_.exports=Zu}));var Bt=S(((_,m)=>{var y=St();function Qu(_){var m=y(this||g,_).delete(_);return(this||g).size-=m?1:0,m}m.exports=Qu}));var Rt=S(((_,m)=>{var y=St();function ec(_){return y(this||g,_).get(_)}m.exports=ec}));var Tt=S(((_,m)=>{var y=St();function rc(_){return y(this||g,_).has(_)}m.exports=rc}));var It=S(((_,m)=>{var y=St();function sc(_,m){var L=y(this||g,_),v=L.size;return L.set(_,m),(this||g).size+=L.size==v?0:1,this||g}m.exports=sc}));var Nt=S(((g,_)=>{var m=Ct(),y=Bt(),L=Rt(),v=Tt(),k=It();function Yt(g){var _=-1,m=g==null?0:g.length;for(this.clear();++_<m;){var y=g[_];this.set(y[0],y[1])}}Yt.prototype.clear=m;Yt.prototype.delete=y;Yt.prototype.get=L;Yt.prototype.has=v;Yt.prototype.set=k;_.exports=Yt}));var Vt=S(((_,m)=>{var y=N(),L=ut(),v=Nt(),k=200;function gc(_,m){var M=(this||g).__data__;if(M instanceof y){var x=M.__data__;if(!L||x.length<k-1)return x.push([_,m]),(this||g).size=++M.size,this||g;M=(this||g).__data__=new v(x)}return M.set(_,m),(this||g).size=M.size,this||g}m.exports=gc}));var Kt=S(((_,m)=>{var y=N(),L=F(),v=U(),k=K(),M=H(),x=Vt();function Jt(_){var m=(this||g).__data__=new y(_);(this||g).size=m.size}Jt.prototype.clear=L;Jt.prototype.delete=v;Jt.prototype.get=k;Jt.prototype.has=M;Jt.prototype.set=x;m.exports=Jt}));var qt=S(((g,_)=>{var m=pt(),y=function(){try{var g=m(Object,"defineProperty");return g({},"",{}),g}catch{}}();_.exports=y}));var Ht=S(((g,_)=>{var m=qt();function xc(g,_,y){_=="__proto__"&&m?m(g,_,{configurable:!0,enumerable:!0,value:y,writable:!0}):g[_]=y}_.exports=xc}));var $t=S(((g,_)=>{var m=Ht(),y=w();function Ec(g,_,L){(L!==void 0&&!y(g[_],L)||L===void 0&&!(_ in g))&&m(g,_,L)}_.exports=Ec}));var Zt=S(((g,_)=>{function Pc(g){return function(_,m,y){for(var L=-1,v=Object(_),k=y(_),M=k.length;M--;){var x=k[g?M:++L];if(m(v[x],x,v)===!1)break}return _}}_.exports=Pc}));var Wt=S(((g,_)=>{var m=Zt(),y=m();_.exports=y}));var Qt=S(((g,_)=>{var m=X(),y=typeof g=="object"&&g&&!g.nodeType&&g,L=y&&typeof _=="object"&&_&&!_.nodeType&&_,v=L&&L.exports===y,k=v?m.Buffer:void 0,M=k?k.allocUnsafe:void 0;function Dc(g,_){if(_)return g.slice();var m=g.length,y=M?M(m):new g.constructor(m);return g.copy(y),y}_.exports=Dc}));var re=S(((g,_)=>{var m=X(),y=m.Uint8Array;_.exports=y}));var se=S(((g,_)=>{var m=re();function Ic(g){var _=new g.constructor(g.byteLength);return new m(_).set(new m(g)),_}_.exports=Ic}));var oe=S(((g,_)=>{var m=se();function qc(g,_){var y=_?m(g.buffer):g.buffer;return new g.constructor(y,g.byteOffset,g.length)}_.exports=qc}));var le=S(((g,_)=>{function Nc(g,_){var m=-1,y=g.length;for(_||(_=Array(y));++m<y;)_[m]=g[m];return _}_.exports=Nc}));var he=S(((g,_)=>{var m=tt(),y=Object.create,L=function(){function t(){}return function(g){if(!m(g))return{};if(y)return y(g);t.prototype=g;var _=new t;return t.prototype=void 0,_}}();_.exports=L}));var pe=S(((g,_)=>{function Vc(g,_){return function(m){return g(_(m))}}_.exports=Vc}));var ue=S(((g,_)=>{var m=pe(),y=m(Object.getPrototypeOf,Object);_.exports=y}));var ce=S(((g,_)=>{var m=Object.prototype;function Hc(g){var _=g&&g.constructor,y=typeof _=="function"&&_.prototype||m;return g===y}_.exports=Hc}));var de=S(((g,_)=>{var m=he(),y=ue(),L=ce();function $c(g){return typeof g.constructor!="function"||L(g)?{}:m(y(g))}_.exports=$c}));var ge=S(((g,_)=>{function Zc(g){return g!=null&&typeof g=="object"}_.exports=Zc}));var fe=S(((g,_)=>{var m=Q(),y=ge(),L="[object Arguments]";function ep(g){return y(g)&&m(g)==L}_.exports=ep}));var _e=S(((g,_)=>{var m=fe(),y=ge(),L=Object.prototype,v=L.hasOwnProperty,k=L.propertyIsEnumerable,M=m(function(){return arguments}())?m:function(g){return y(g)&&v.call(g,"callee")&&!k.call(g,"callee")};_.exports=M}));var me=S(((g,_)=>{var m=Array.isArray;_.exports=m}));var ye=S(((g,_)=>{var m=9007199254740991;function lp(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=m}_.exports=lp}));var Le=S(((g,_)=>{var m=et(),y=ye();function cp(g){return g!=null&&y(g.length)&&!m(g)}_.exports=cp}));var we=S(((g,_)=>{var m=Le(),y=ge();function dp(g){return y(g)&&m(g)}_.exports=dp}));var Se=S(((g,_)=>{function gp(){return!1}_.exports=gp}));var Be=S(((g,_)=>{var m=X(),y=Se(),L=typeof g=="object"&&g&&!g.nodeType&&g,v=L&&typeof _=="object"&&_&&!_.nodeType&&_,k=v&&v.exports===L,M=k?m.Buffer:void 0,x=M?M.isBuffer:void 0,w=x||y;_.exports=w}));var De=S(((g,_)=>{var m=Q(),y=ue(),L=ge(),v="[object Object]",k=Function.prototype,M=Object.prototype,x=k.toString,w=M.hasOwnProperty,C=x.call(Object);function Sp(g){if(!L(g)||m(g)!=v)return!1;var _=y(g);if(_===null)return!0;var k=w.call(_,"constructor")&&_.constructor;return typeof k=="function"&&k instanceof k&&x.call(k)==C}_.exports=Sp}));var Te=S(((g,_)=>{var m=Q(),y=ye(),L=ge(),v="[object Arguments]",k="[object Array]",M="[object Boolean]",x="[object Date]",w="[object Error]",C="[object Function]",B="[object Map]",I="[object Number]",j="[object Object]",z="[object RegExp]",N="[object Set]",F="[object String]",U="[object WeakMap]",K="[object ArrayBuffer]",H="[object DataView]",Y="[object Float32Array]",X="[object Float64Array]",$="[object Int8Array]",Z="[object Int16Array]",W="[object Int32Array]",tt="[object Uint8Array]",et="[object Uint8ClampedArray]",it="[object Uint16Array]",nt="[object Uint32Array]",at={};at[Y]=at[X]=at[$]=at[Z]=at[W]=at[tt]=at[et]=at[it]=at[nt]=!0;at[v]=at[k]=at[K]=at[M]=at[H]=at[x]=at[w]=at[C]=at[B]=at[I]=at[j]=at[z]=at[N]=at[F]=at[U]=!1;function nf(g){return L(g)&&y(g.length)&&!!at[m(g)]}_.exports=nf}));var Oe=S(((g,_)=>{function sf(g){return function(_){return g(_)}}_.exports=sf}));var Ie=S(((g,_)=>{var m=Y(),y=typeof g=="object"&&g&&!g.nodeType&&g,L=y&&typeof _=="object"&&_&&!_.nodeType&&_,v=L&&L.exports===y,k=v&&m.process,M=function(){try{var g=L&&L.require&&L.require("util").types;return g||k&&k.binding&&k.binding("util")}catch{}}();_.exports=M}));var Ae=S(((g,_)=>{var m=Te(),y=Oe(),L=Ie(),v=L&&L.isTypedArray,k=v?y(v):m;_.exports=k}));var Ge=S(((g,_)=>{function pf(g,_){if(!(_==="constructor"&&typeof g[_]=="function")&&_!="__proto__")return g[_]}_.exports=pf}));var ze=S(((g,_)=>{var m=Ht(),y=w(),L=Object.prototype,v=L.hasOwnProperty;function _f(g,_,L){var k=g[_];(!(v.call(g,_)&&y(k,L))||L===void 0&&!(_ in g))&&m(g,_,L)}_.exports=_f}));var Ne=S(((g,_)=>{var m=ze(),y=Ht();function bf(g,_,L,v){var k=!L;L||(L={});for(var M=-1,x=_.length;++M<x;){var w=_[M],C=v?v(L[w],g[w],w,L,g):void 0;C===void 0&&(C=g[w]),k?y(L,w,C):m(L,w,C)}return L}_.exports=bf}));var Fe=S(((g,_)=>{function vf(g,_){for(var m=-1,y=Array(g);++m<g;)y[m]=_(m);return y}_.exports=vf}));var qe=S(((g,_)=>{var m=9007199254740991,y=/^(?:0|[1-9]\d*)$/;function xf(g,_){var L=typeof g;return _=_??m,!!_&&(L=="number"||L!="symbol"&&y.test(g))&&g>-1&&g%1==0&&g<_}_.exports=xf}));var $e=S(((g,_)=>{var m=Fe(),y=_e(),L=me(),v=Be(),k=qe(),M=Ae(),x=Object.prototype,w=x.hasOwnProperty;function Df(g,_){var x=L(g),C=!x&&y(g),B=!x&&!C&&v(g),I=!x&&!C&&!B&&M(g),j=x||C||B||I,z=j?m(g.length,String):[],N=z.length;for(var F in g)(_||w.call(g,F))&&!(j&&(F=="length"||B&&(F=="offset"||F=="parent")||I&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||k(F,N)))&&z.push(F);return z}_.exports=Df}));var Qe=S(((g,_)=>{function Of(g){var _=[];if(g!=null)for(var m in Object(g))_.push(m);return _}_.exports=Of}));var ti=S(((g,_)=>{var m=tt(),y=ce(),L=Qe(),v=Object.prototype,k=v.hasOwnProperty;function zf(g){if(!m(g))return L(g);var _=y(g),v=[];for(var M in g)M=="constructor"&&(_||!k.call(g,M))||v.push(M);return v}_.exports=zf}));var ei=S(((g,_)=>{var m=$e(),y=ti(),L=Le();function Kf(g){return L(g)?m(g,!0):y(g)}_.exports=Kf}));var ii=S(((g,_)=>{var m=Ne(),y=ei();function Xf(g){return m(g,y(g))}_.exports=Xf}));var ai=S(((g,_)=>{var m=$t(),y=Qt(),L=oe(),v=le(),k=de(),M=_e(),x=me(),w=we(),C=Be(),B=et(),I=tt(),j=De(),z=Ae(),N=Ge(),F=ii();function sd(g,_,U,K,H,Y,X){var $=N(g,U),Z=N(_,U),W=X.get(Z);if(W)m(g,U,W);else{var Q=Y?Y($,Z,U+"",g,_,X):void 0,tt=Q===void 0;if(tt){var et=x(Z),it=!et&&C(Z),nt=!et&&!it&&z(Z);Q=Z,et||it||nt?x($)?Q=$:w($)?Q=v($):it?(tt=!1,Q=y(Z,!0)):nt?(tt=!1,Q=L(Z,!0)):Q=[]:j(Z)||M(Z)?(Q=$,M($)?Q=F($):(!I($)||B($))&&(Q=k(Z))):tt=!1}tt&&(X.set(Z,Q),H(Q,Z,K,Y,X),X.delete(Z)),m(g,U,Q)}}_.exports=sd}));var si=S(((g,_)=>{var m=Kt(),y=$t(),L=Wt(),v=ai(),k=tt(),M=ei(),x=Ge();function fa(g,_,w,C,B){g!==_&&L(_,(function(L,M){if(B||(B=new m),k(L))v(g,_,M,w,fa,C,B);else{var I=C?C(x(g,M),L,M+"",g,_,B):void 0;I===void 0&&(I=L),y(g,M,I)}}),M)}_.exports=fa}));var oi=S(((g,_)=>{function fd(g){return g}_.exports=fd}));var li=S(((g,_)=>{function dd(g,_,m){switch(m.length){case 0:return g.call(_);case 1:return g.call(_,m[0]);case 2:return g.call(_,m[0],m[1]);case 3:return g.call(_,m[0],m[1],m[2])}return g.apply(_,m)}_.exports=dd}));var hi=S(((_,m)=>{var y=li(),L=Math.max;function md(_,m,v){return m=L(m===void 0?_.length-1:m,0),function(){for(var k=arguments,M=-1,x=L(k.length-m,0),w=Array(x);++M<x;)w[M]=k[m+M];M=-1;for(var C=Array(m+1);++M<m;)C[M]=k[M];return C[m]=v(w),y(_,this||g,C)}}m.exports=md}));var pi=S(((g,_)=>{function _d(g){return function(){return g}}_.exports=_d}));var ui=S(((g,_)=>{var m=pi(),y=qt(),L=oi(),v=y?function(g,_){return y(g,"toString",{configurable:!0,enumerable:!1,value:m(_),writable:!0})}:L;_.exports=v}));var ci=S(((g,_)=>{var m=800,y=16,L=Date.now;function xd(g){var _=0,v=0;return function(){var k=L(),M=y-(k-v);if(v=k,M>0){if(++_>=m)return arguments[0]}else _=0;return g.apply(void 0,arguments)}}_.exports=xd}));var di=S(((g,_)=>{var m=ui(),y=ci(),L=y(m);_.exports=L}));var gi=S(((g,_)=>{var m=oi(),y=hi(),L=di();function Td(g,_){return L(y(g,_,m),g+"")}_.exports=Td}));var fi=S(((g,_)=>{var m=w(),y=Le(),L=qe(),v=tt();function Id(g,_,k){if(!v(k))return!1;var M=typeof _;return!!(M=="number"?y(k)&&L(_,k.length):M=="string"&&_ in k)&&m(k[_],g)}_.exports=Id}));var _i=S(((g,_)=>{var m=gi(),y=fi();function Nd(g){return m((function(_,m){var L=-1,v=m.length,k=v>1?m[v-1]:void 0,M=v>2?m[2]:void 0;for(k=g.length>3&&typeof k=="function"?(v--,k):void 0,M&&y(m[0],m[1],M)&&(k=v<3?void 0:k,v=1),_=Object(_);++L<v;){var x=m[L];x&&g(_,x,L,k)}return _}))}_.exports=Nd}));var mi=S(((g,_)=>{var m=si(),y=_i(),L=y((function(g,_,y){m(g,_,y)}));_.exports=L}));var yi=S(((g,_)=>{var m=Q(),y=ge(),L="[object Symbol]";function Cg(g){return typeof g=="symbol"||y(g)&&m(g)==L}_.exports=Cg}));var Li=S(((g,_)=>{var m=me(),y=yi(),L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/;function Tg(g,_){if(m(g))return!1;var k=typeof g;return!(k!="number"&&k!="symbol"&&k!="boolean"&&g!=null&&!y(g))||(v.test(g)||!L.test(g)||_!=null&&g in Object(_))}_.exports=Tg}));var bi=S(((_,m)=>{var y=Nt(),L="Expected a function";function wi(_,m){if(typeof _!="function"||m!=null&&typeof m!="function")throw new TypeError(L);var i=function(){var y=arguments,L=m?m.apply(this||g,y):y[0],v=i.cache;if(v.has(L))return v.get(L);var k=_.apply(this||g,y);return i.cache=v.set(L,k)||v,k};return i.cache=new(wi.Cache||y),i}wi.Cache=y;m.exports=wi}));var vi=S(((g,_)=>{var m=bi(),y=500;function Ag(g){var _=m(g,(function(g){return L.size===y&&L.clear(),g})),L=_.cache;return _}_.exports=Ag}));var ki=S(((g,_)=>{var m=vi(),y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,L=/\\(\\)?/g,v=m((function(g){var _=[];return g.charCodeAt(0)===46&&_.push(""),g.replace(y,(function(g,m,y,v){_.push(y?v.replace(L,"$1"):m||g)})),_}));_.exports=v}));var Mi=S(((g,_)=>{function zg(g,_){for(var m=-1,y=g==null?0:g.length,L=Array(y);++m<y;)L[m]=_(g[m],m,g);return L}_.exports=zg}));var xi=S(((g,_)=>{var m=$(),y=Mi(),L=me(),v=yi(),k=1/0,M=m?m.prototype:void 0,x=M?M.toString:void 0;function Ro(g){if(typeof g=="string")return g;if(L(g))return y(g,Ro)+"";if(v(g))return x?x.call(g):"";var _=g+"";return _=="0"&&1/g==-k?"-0":_}_.exports=Ro}));var Ci=S(((g,_)=>{var m=xi();function Hg(g){return g==null?"":m(g)}_.exports=Hg}));var Si=S(((g,_)=>{var m=me(),y=Li(),L=ki(),v=Ci();function Zg(g,_){return m(g)?g:y(g,_)?[g]:L(v(g))}_.exports=Zg}));var Ri=S(((g,_)=>{var m=yi(),y=1/0;function tm(g){if(typeof g=="string"||m(g))return g;var _=g+"";return _=="0"&&1/g==-y?"-0":_}_.exports=tm}));var Di=S(((g,_)=>{var m=Si(),y=Ri();function rm(g,_){_=m(_,g);for(var L=0,v=_.length;g!=null&&L<v;)g=g[y(_[L++])];return L&&L==v?g:void 0}_.exports=rm}));var zi=S(((g,_)=>{var m=Di();function sm(g,_,y){var L=g==null?void 0:m(g,_);return L===void 0?y:L}_.exports=sm}));var Vi=S(((_,m)=>{(function(g,y){typeof _=="object"&&typeof m<"u"?m.exports=y():(g=g||self).RBush=y()})(_,(function(){function t(g,_,m,y,L){(function O(g,_,m,y,L){for(;y>m;){if(y-m>600){var v=y-m+1,k=_-m+1,M=Math.log(v),x=.5*Math.exp(2*M/3),w=.5*Math.sqrt(M*x*(v-x)/v)*(k-v/2<0?-1:1),C=Math.max(m,Math.floor(_-k*x/v+w)),B=Math.min(y,Math.floor(_+(v-k)*x/v+w));O(g,_,C,B,L)}var I=g[_],j=m,z=y;for(e(g,m,_),L(g[y],I)>0&&e(g,m,y);j<z;){for(e(g,j,z),j++,z--;L(g[j],I)<0;)j++;for(;L(g[z],I)>0;)z--}L(g[m],I)===0?e(g,m,z):e(g,++z,y),z<=_&&(m=z+1),_<=z&&(y=z-1)}})(g,_,m||0,y||g.length-1,L||i)}function e(g,_,m){var y=g[_];g[_]=g[m],g[m]=y}function i(g,_){return g<_?-1:g>_?1:0}var r=function(_){_===void 0&&(_=9),(this||g)._maxEntries=Math.max(4,_),(this||g)._minEntries=Math.max(2,Math.ceil(.4*(this||g)._maxEntries)),this.clear()};function n(g,_,m){if(!m)return _.indexOf(g);for(var y=0;y<_.length;y++)if(m(g,_[y]))return y;return-1}function s(g,_){a(g,0,g.children.length,_,g)}function a(g,_,m,y,L){L||(L=T(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var v=_;v<m;v++){var k=g.children[v];o(L,g.leaf?y(k):k)}return L}function o(g,_){return g.minX=Math.min(g.minX,_.minX),g.minY=Math.min(g.minY,_.minY),g.maxX=Math.max(g.maxX,_.maxX),g.maxY=Math.max(g.maxY,_.maxY),g}function l(g,_){return g.minX-_.minX}function u(g,_){return g.minY-_.minY}function f(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function d(g){return g.maxX-g.minX+(g.maxY-g.minY)}function P(g,_){return g.minX<=_.minX&&g.minY<=_.minY&&_.maxX<=g.maxX&&_.maxY<=g.maxY}function E(g,_){return _.minX<=g.maxX&&_.minY<=g.maxY&&_.maxX>=g.minX&&_.maxY>=g.minY}function T(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function G(g,_,m,y,L){for(var v=[_,m];v.length;)if(!((m=v.pop())-(_=v.pop())<=y)){var k=_+Math.ceil((m-_)/y/2)*y;t(g,k,_,m,L),v.push(_,k,k,m)}}return r.prototype.all=function(){return this._all((this||g).data,[])},r.prototype.search=function(_){var m=(this||g).data,y=[];if(!E(_,m))return y;for(var L=(this||g).toBBox,v=[];m;){for(var k=0;k<m.children.length;k++){var M=m.children[k],x=m.leaf?L(M):M;E(_,x)&&(m.leaf?y.push(M):P(_,x)?this._all(M,y):v.push(M))}m=v.pop()}return y},r.prototype.collides=function(_){var m=(this||g).data;if(!E(_,m))return!1;for(var y=[];m;){for(var L=0;L<m.children.length;L++){var v=m.children[L],k=m.leaf?this.toBBox(v):v;if(E(_,k)){if(m.leaf||P(_,k))return!0;y.push(v)}}m=y.pop()}return!1},r.prototype.load=function(_){if(!_||!_.length)return this||g;if(_.length<(this||g)._minEntries){for(var m=0;m<_.length;m++)this.insert(_[m]);return this||g}var y=this._build(_.slice(),0,_.length-1,0);if((this||g).data.children.length)if((this||g).data.height===y.height)this._splitRoot((this||g).data,y);else{if((this||g).data.height<y.height){var L=(this||g).data;(this||g).data=y,y=L}this._insert(y,(this||g).data.height-y.height-1,!0)}else(this||g).data=y;return this||g},r.prototype.insert=function(_){return _&&this._insert(_,(this||g).data.height-1),this||g},r.prototype.clear=function(){return(this||g).data=T([]),this||g},r.prototype.remove=function(_,m){if(!_)return this||g;for(var y,L,v,k=(this||g).data,M=this.toBBox(_),x=[],w=[];k||x.length;){if(k||(k=x.pop(),L=x[x.length-1],y=w.pop(),v=!0),k.leaf){var C=n(_,k.children,m);if(C!==-1)return k.children.splice(C,1),x.push(k),this._condense(x),this||g}v||k.leaf||!P(k,M)?L?(y++,k=L.children[y],v=!1):k=null:(x.push(k),w.push(y),y=0,L=k,k=k.children[0])}return this||g},r.prototype.toBBox=function(g){return g},r.prototype.compareMinX=function(g,_){return g.minX-_.minX},r.prototype.compareMinY=function(g,_){return g.minY-_.minY},r.prototype.toJSON=function(){return(this||g).data},r.prototype.fromJSON=function(_){return(this||g).data=_,this||g},r.prototype._all=function(g,_){for(var m=[];g;)g.leaf?_.push.apply(_,g.children):m.push.apply(m,g.children),g=m.pop();return _},r.prototype._build=function(_,m,y,L){var v,k=y-m+1,M=(this||g)._maxEntries;if(k<=M)return s(v=T(_.slice(m,y+1)),(this||g).toBBox),v;L||(L=Math.ceil(Math.log(k)/Math.log(M)),M=Math.ceil(k/Math.pow(M,L-1))),(v=T([])).leaf=!1,v.height=L;var x=Math.ceil(k/M),w=x*Math.ceil(Math.sqrt(M));G(_,m,y,w,(this||g).compareMinX);for(var C=m;C<=y;C+=w){var B=Math.min(C+w-1,y);G(_,C,B,x,(this||g).compareMinY);for(var I=C;I<=B;I+=x){var j=Math.min(I+x-1,B);v.children.push(this._build(_,I,j,L-1))}}return s(v,(this||g).toBBox),v},r.prototype._chooseSubtree=function(g,_,m,y){for(;y.push(_),!_.leaf&&y.length-1!==m;){for(var L=1/0,v=1/0,k=void 0,M=0;M<_.children.length;M++){var x=_.children[M],w=f(x),C=(B=g,I=x,(Math.max(I.maxX,B.maxX)-Math.min(I.minX,B.minX))*(Math.max(I.maxY,B.maxY)-Math.min(I.minY,B.minY))-w);C<v?(v=C,L=w<L?w:L,k=x):C===v&&w<L&&(L=w,k=x)}_=k||_.children[0]}var B,I;return _},r.prototype._insert=function(_,m,y){var L=y?_:this.toBBox(_),v=[],k=this._chooseSubtree(L,(this||g).data,m,v);for(k.children.push(_),o(k,L);m>=0&&v[m].children.length>(this||g)._maxEntries;)this._split(v,m),m--;this._adjustParentBBoxes(L,v,m)},r.prototype._split=function(_,m){var y=_[m],L=y.children.length,v=(this||g)._minEntries;this._chooseSplitAxis(y,v,L);var k=this._chooseSplitIndex(y,v,L),M=T(y.children.splice(k,y.children.length-k));M.height=y.height,M.leaf=y.leaf,s(y,(this||g).toBBox),s(M,(this||g).toBBox),m?_[m-1].children.push(M):this._splitRoot(y,M)},r.prototype._splitRoot=function(_,m){(this||g).data=T([_,m]),(this||g).data.height=_.height+1,(this||g).data.leaf=!1,s((this||g).data,(this||g).toBBox)},r.prototype._chooseSplitIndex=function(_,m,y){for(var L,v,k,M,x,w,C,B=1/0,I=1/0,j=m;j<=y-m;j++){var z=a(_,0,j,(this||g).toBBox),N=a(_,j,y,(this||g).toBBox),F=(v=z,k=N,M=void 0,x=void 0,w=void 0,C=void 0,M=Math.max(v.minX,k.minX),x=Math.max(v.minY,k.minY),w=Math.min(v.maxX,k.maxX),C=Math.min(v.maxY,k.maxY),Math.max(0,w-M)*Math.max(0,C-x)),U=f(z)+f(N);F<B?(B=F,L=j,I=U<I?U:I):F===B&&U<I&&(I=U,L=j)}return L||y-m},r.prototype._chooseSplitAxis=function(_,m,y){var L=_.leaf?(this||g).compareMinX:l,v=_.leaf?(this||g).compareMinY:u;this._allDistMargin(_,m,y,L)<this._allDistMargin(_,m,y,v)&&_.children.sort(L)},r.prototype._allDistMargin=function(_,m,y,L){_.children.sort(L);for(var v=(this||g).toBBox,k=a(_,0,m,v),M=a(_,y-m,y,v),x=d(k)+d(M),w=m;w<y-m;w++){var C=_.children[w];o(k,_.leaf?v(C):C),x+=d(k)}for(var B=y-m-1;B>=m;B--){var I=_.children[B];o(M,_.leaf?v(I):I),x+=d(M)}return x},r.prototype._adjustParentBBoxes=function(g,_,m){for(var y=m;y>=0;y--)o(_[y],g)},r.prototype._condense=function(_){for(var m=_.length-1,y=void 0;m>=0;m--)_[m].children.length===0?m>0?(y=_[m-1].children).splice(y.indexOf(_[m]),1):this.clear():s(_[m],(this||g).toBBox)},r}))}));var Ui=S((g=>{Object.defineProperty(g,"__esModule",{value:!0});g.earthRadius=6371008.8;g.factors={centimeters:g.earthRadius*100,centimetres:g.earthRadius*100,degrees:g.earthRadius/111325,feet:g.earthRadius*3.28084,inches:g.earthRadius*39.37,kilometers:g.earthRadius/1e3,kilometres:g.earthRadius/1e3,meters:g.earthRadius,metres:g.earthRadius,miles:g.earthRadius/1609.344,millimeters:g.earthRadius*1e3,millimetres:g.earthRadius*1e3,nauticalmiles:g.earthRadius/1852,radians:1,yards:g.earthRadius*1.0936};g.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/g.earthRadius,yards:1.0936133};g.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function At(g,_,m){m===void 0&&(m={});var y={type:"Feature"};return(m.id===0||m.id)&&(y.id=m.id),m.bbox&&(y.bbox=m.bbox),y.properties=_||{},y.geometry=g,y}g.feature=At;function Lm(g,_,m){switch(m===void 0&&(m={}),g){case"Point":return Oi(_).geometry;case"LineString":return Ii(_).geometry;case"Polygon":return Ai(_).geometry;case"MultiPoint":return el(_).geometry;case"MultiLineString":return tl(_).geometry;case"MultiPolygon":return il(_).geometry;default:throw new Error(g+" is invalid")}}g.geometry=Lm;function Oi(g,_,m){if(m===void 0&&(m={}),!g)throw new Error("coordinates is required");if(!Array.isArray(g))throw new Error("coordinates must be an Array");if(g.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ve(g[0])||!Ve(g[1]))throw new Error("coordinates must contain numbers");var y={type:"Point",coordinates:g};return At(y,_,m)}g.point=Oi;function bm(g,_,m){return m===void 0&&(m={}),Ue(g.map((function(g){return Oi(g,_)})),m)}g.points=bm;function Ai(g,_,m){m===void 0&&(m={});for(var y=0,L=g;y<L.length;y++){var v=L[y];if(v.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var k=0;k<v[v.length-1].length;k++)if(v[v.length-1][k]!==v[0][k])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:g};return At(M,_,m)}g.polygon=Ai;function vm(g,_,m){return m===void 0&&(m={}),Ue(g.map((function(g){return Ai(g,_)})),m)}g.polygons=vm;function Ii(g,_,m){if(m===void 0&&(m={}),g.length<2)throw new Error("coordinates must be an array of two or more positions");var y={type:"LineString",coordinates:g};return At(y,_,m)}g.lineString=Ii;function km(g,_,m){return m===void 0&&(m={}),Ue(g.map((function(g){return Ii(g,_)})),m)}g.lineStrings=km;function Ue(g,_){_===void 0&&(_={});var m={type:"FeatureCollection"};return _.id&&(m.id=_.id),_.bbox&&(m.bbox=_.bbox),m.features=g,m}g.featureCollection=Ue;function tl(g,_,m){m===void 0&&(m={});var y={type:"MultiLineString",coordinates:g};return At(y,_,m)}g.multiLineString=tl;function el(g,_,m){m===void 0&&(m={});var y={type:"MultiPoint",coordinates:g};return At(y,_,m)}g.multiPoint=el;function il(g,_,m){m===void 0&&(m={});var y={type:"MultiPolygon",coordinates:g};return At(y,_,m)}g.multiPolygon=il;function Mm(g,_,m){m===void 0&&(m={});var y={type:"GeometryCollection",geometries:g};return At(y,_,m)}g.geometryCollection=Mm;function xm(g,_){if(_===void 0&&(_=0),_&&!(_>=0))throw new Error("precision must be a positive number");var m=Math.pow(10,_||0);return Math.round(g*m)/m}g.round=xm;function rl(_,m){m===void 0&&(m="kilometers");var y=g.factors[m];if(!y)throw new Error(m+" units is invalid");return _*y}g.radiansToLength=rl;function Gi(_,m){m===void 0&&(m="kilometers");var y=g.factors[m];if(!y)throw new Error(m+" units is invalid");return _/y}g.lengthToRadians=Gi;function wm(g,_){return nl(Gi(g,_))}g.lengthToDegrees=wm;function Cm(g){var _=g%360;return _<0&&(_+=360),_}g.bearingToAzimuth=Cm;function nl(g){var _=g%(2*Math.PI);return _*180/Math.PI}g.radiansToDegrees=nl;function Em(g){var _=g%360;return _*Math.PI/180}g.degreesToRadians=Em;function Pm(g,_,m){if(_===void 0&&(_="kilometers"),m===void 0&&(m="kilometers"),!(g>=0))throw new Error("length must be a positive number");return rl(Gi(g,_),m)}g.convertLength=Pm;function Sm(_,m,y){if(m===void 0&&(m="meters"),y===void 0&&(y="kilometers"),!(_>=0))throw new Error("area must be a positive number");var L=g.areaFactors[m];if(!L)throw new Error("invalid original units");var v=g.areaFactors[y];if(!v)throw new Error("invalid final units");return _/L*v}g.convertArea=Sm;function Ve(g){return!isNaN(g)&&g!==null&&!Array.isArray(g)}g.isNumber=Ve;function Bm(g){return!!g&&g.constructor===Object}g.isObject=Bm;function Tm(g){if(!g)throw new Error("bbox is required");if(!Array.isArray(g))throw new Error("bbox must be an Array");if(g.length!==4&&g.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");g.forEach((function(g){if(!Ve(g))throw new Error("bbox must only contain numbers")}))}g.validateBBox=Tm;function Rm(g){if(!g)throw new Error("id is required");if(["string","number"].indexOf(typeof g)===-1)throw new Error("id must be a number or a string")}g.validateId=Rm}));var Ki=S((g=>{Object.defineProperty(g,"__esModule",{value:!0});var _=Ui();function Ce(g,_,m){if(g!==null)for(var y,L,v,k,M,x,w,C,B=0,I=0,j=g.type,z=j==="FeatureCollection",N=j==="Feature",F=z?g.features.length:1,U=0;U<F;U++){w=z?g.features[U].geometry:N?g.geometry:g,C=!!w&&w.type==="GeometryCollection",M=C?w.geometries.length:1;for(var K=0;K<M;K++){var H=0,Y=0;if(k=C?w.geometries[K]:w,k!==null){x=k.coordinates;var X=k.type;switch(B=!m||X!=="Polygon"&&X!=="MultiPolygon"?0:1,X){case null:break;case"Point":if(_(x,I,U,H,Y)===!1)return!1;I++,H++;break;case"LineString":case"MultiPoint":for(y=0;y<x.length;y++){if(_(x[y],I,U,H,Y)===!1)return!1;I++,X==="MultiPoint"&&H++}X==="LineString"&&H++;break;case"Polygon":case"MultiLineString":for(y=0;y<x.length;y++){for(L=0;L<x[y].length-B;L++){if(_(x[y][L],I,U,H,Y)===!1)return!1;I++}X==="MultiLineString"&&H++,X==="Polygon"&&Y++}X==="Polygon"&&H++;break;case"MultiPolygon":for(y=0;y<x.length;y++){for(Y=0,L=0;L<x[y].length;L++){for(v=0;v<x[y][L].length-B;v++){if(_(x[y][L][v],I,U,H,Y)===!1)return!1;I++}Y++}H++}break;case"GeometryCollection":for(y=0;y<k.geometries.length;y++)if(Ce(k.geometries[y],_,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Dm(g,_,m,y){var L=m;return Ce(g,(function(g,y,v,k,M){L=y===0&&m===void 0?g:_(L,g,y,v,k,M)}),y),L}function sl(g,_){var m;switch(g.type){case"FeatureCollection":for(m=0;m<g.features.length&&_(g.features[m].properties,m)!==!1;m++);break;case"Feature":_(g.properties,0);break}}function Om(g,_,m){var y=m;return sl(g,(function(g,L){y=L===0&&m===void 0?g:_(y,g,L)})),y}function al(g,_){if(g.type==="Feature")_(g,0);else if(g.type==="FeatureCollection")for(var m=0;m<g.features.length&&_(g.features[m],m)!==!1;m++);}function Am(g,_,m){var y=m;return al(g,(function(g,L){y=L===0&&m===void 0?g:_(y,g,L)})),y}function Im(g){var _=[];return Ce(g,(function(g){_.push(g)})),_}function Ni(g,_){var m,y,L,v,k,M,x,w,C,B,I=0,j=g.type==="FeatureCollection",z=g.type==="Feature",N=j?g.features.length:1;for(m=0;m<N;m++){for(M=j?g.features[m].geometry:z?g.geometry:g,w=j?g.features[m].properties:z?g.properties:{},C=j?g.features[m].bbox:z?g.bbox:void 0,B=j?g.features[m].id:z?g.id:void 0,x=!!M&&M.type==="GeometryCollection",k=x?M.geometries.length:1,L=0;L<k;L++)if(v=x?M.geometries[L]:M,v!==null)switch(v.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_(v,I,w,C,B)===!1)return!1;break;case"GeometryCollection":for(y=0;y<v.geometries.length;y++)if(_(v.geometries[y],I,w,C,B)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_(null,I,w,C,B)===!1)return!1;I++}}function Gm(g,_,m){var y=m;return Ni(g,(function(g,L,v,k,M){y=L===0&&m===void 0?g:_(y,g,L,v,k,M)})),y}function Ke(g,m){Ni(g,(function(g,y,L,v,k){var M=g===null?null:g.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return m(_.feature(g,L,{bbox:v,id:k}),y,0)!==!1&&void 0}var x;switch(M){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon";break}for(var w=0;w<g.coordinates.length;w++){var C=g.coordinates[w],B={type:x,coordinates:C};if(m(_.feature(B,L),y,w)===!1)return!1}}))}function qm(g,_,m){var y=m;return Ke(g,(function(g,L,v){y=L===0&&v===0&&m===void 0?g:_(y,g,L,v)})),y}function ol(g,m){Ke(g,(function(g,y,L){var v=0;if(g.geometry){var k=g.geometry.type;if(!(k==="Point"||k==="MultiPoint")){var M,x=0,w=0,C=0;if(Ce(g,(function(k,B,I,j,z){if(M===void 0||y>x||j>w||z>C)M=k,x=y,w=j,C=z,v=0;else{var N=_.lineString([M,k],g.properties);if(m(N,y,L,z,v)===!1)return!1;v++,M=k}}))===!1)return!1}}}))}function Nm(g,_,m){var y=m,L=!1;return ol(g,(function(g,v,k,M,x){y=L===!1&&m===void 0?g:_(y,g,v,k,M,x),L=!0})),y}function ll(g,m){if(!g)throw new Error("geojson is required");Ke(g,(function(g,y,L){if(g.geometry!==null){var v=g.geometry.type,k=g.geometry.coordinates;switch(v){case"LineString":if(m(g,y,L,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<k.length;M++)if(m(_.lineString(k[M],g.properties),y,L,M)===!1)return!1;break}}}))}function zm(g,_,m){var y=m;return ll(g,(function(g,L,v,k){y=L===0&&m===void 0?g:_(y,g,L,v,k)})),y}function Fm(g,m){if(m=m||{},!_.isObject(m))throw new Error("options is invalid");var y,L=m.featureIndex||0,v=m.multiFeatureIndex||0,k=m.geometryIndex||0,M=m.segmentIndex||0,x=m.properties;switch(g.type){case"FeatureCollection":L<0&&(L=g.features.length+L),x=x||g.features[L].properties,y=g.features[L].geometry;break;case"Feature":x=x||g.properties,y=g.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=g;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var w=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return M<0&&(M=w.length+M-1),_.lineString([w[M],w[M+1]],x,m);case"Polygon":return k<0&&(k=w.length+k),M<0&&(M=w[k].length+M-1),_.lineString([w[k][M],w[k][M+1]],x,m);case"MultiLineString":return v<0&&(v=w.length+v),M<0&&(M=w[v].length+M-1),_.lineString([w[v][M],w[v][M+1]],x,m);case"MultiPolygon":return v<0&&(v=w.length+v),k<0&&(k=w[v].length+k),M<0&&(M=w[v][k].length-M-1),_.lineString([w[v][k][M],w[v][k][M+1]],x,m)}throw new Error("geojson is invalid")}function Vm(g,m){if(m=m||{},!_.isObject(m))throw new Error("options is invalid");var y,L=m.featureIndex||0,v=m.multiFeatureIndex||0,k=m.geometryIndex||0,M=m.coordIndex||0,x=m.properties;switch(g.type){case"FeatureCollection":L<0&&(L=g.features.length+L),x=x||g.features[L].properties,y=g.features[L].geometry;break;case"Feature":x=x||g.properties,y=g.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=g;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var w=y.coordinates;switch(y.type){case"Point":return _.point(w,x,m);case"MultiPoint":return v<0&&(v=w.length+v),_.point(w[v],x,m);case"LineString":return M<0&&(M=w.length+M),_.point(w[M],x,m);case"Polygon":return k<0&&(k=w.length+k),M<0&&(M=w[k].length+M),_.point(w[k][M],x,m);case"MultiLineString":return v<0&&(v=w.length+v),M<0&&(M=w[v].length+M),_.point(w[v][M],x,m);case"MultiPolygon":return v<0&&(v=w.length+v),k<0&&(k=w[v].length+k),M<0&&(M=w[v][k].length-M),_.point(w[v][k][M],x,m)}throw new Error("geojson is invalid")}g.coordAll=Im;g.coordEach=Ce;g.coordReduce=Dm;g.featureEach=al;g.featureReduce=Am;g.findPoint=Vm;g.findSegment=Fm;g.flattenEach=Ke;g.flattenReduce=qm;g.geomEach=Ni;g.geomReduce=Gm;g.lineEach=ll;g.lineReduce=zm;g.propEach=sl;g.propReduce=Om;g.segmentEach=ol;g.segmentReduce=Nm}));var qi=S((g=>{Object.defineProperty(g,"__esModule",{value:!0});var _=Ki();function Fi(g){var m=[1/0,1/0,-1/0,-1/0];return _.coordEach(g,(function(g){m[0]>g[0]&&(m[0]=g[0]),m[1]>g[1]&&(m[1]=g[1]),m[2]<g[0]&&(m[2]=g[0]),m[3]<g[1]&&(m[3]=g[1])})),m}Fi.default=Fi;g.default=Fi}));var Yi=S(((_,m)=>{var y=Vi(),L=Ui(),v=Ki(),k=qi().default,M=v.featureEach,x=(v.coordEach,L.polygon,L.featureCollection);function fl(_){var m=new y(_);return m.insert=function(_){if(_.type!=="Feature")throw new Error("invalid feature");return _.bbox=_.bbox?_.bbox:k(_),y.prototype.insert.call(this||g,_)},m.load=function(_){var m=[];return Array.isArray(_)?_.forEach((function(g){if(g.type!=="Feature")throw new Error("invalid features");g.bbox=g.bbox?g.bbox:k(g),m.push(g)})):M(_,(function(g){if(g.type!=="Feature")throw new Error("invalid features");g.bbox=g.bbox?g.bbox:k(g),m.push(g)})),y.prototype.load.call(this||g,m)},m.remove=function(_,m){if(_.type!=="Feature")throw new Error("invalid feature");return _.bbox=_.bbox?_.bbox:k(_),y.prototype.remove.call(this||g,_,m)},m.clear=function(){return y.prototype.clear.call(this||g)},m.search=function(_){var m=y.prototype.search.call(this||g,this.toBBox(_));return x(m)},m.collides=function(_){return y.prototype.collides.call(this||g,this.toBBox(_))},m.all=function(){var _=y.prototype.all.call(this||g);return x(_)},m.toJSON=function(){return y.prototype.toJSON.call(this||g)},m.fromJSON=function(_){return y.prototype.fromJSON.call(this||g,_)},m.toBBox=function(g){var _;if(g.bbox)_=g.bbox;else if(Array.isArray(g)&&g.length===4)_=g;else if(Array.isArray(g)&&g.length===6)_=[g[0],g[1],g[3],g[4]];else if(g.type==="Feature")_=k(g);else{if(g.type!=="FeatureCollection")throw new Error("invalid geojson");_=k(g)}return{minX:_[0],minY:_[1],maxX:_[2],maxY:_[3]}},m}m.exports=fl;m.exports.default=fl}));Array.prototype.findIndex=Array.prototype.findIndex||function(_){if((this||g)===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof _!="function")throw new TypeError("callback must be a function");for(var m=Object(this||g),y=m.length>>>0,L=arguments[1],v=0;v<y;v++)if(_.call(L,m[v],v,m))return v;return-1};Array.prototype.find=Array.prototype.find||function(_){if((this||g)===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof _!="function")throw new TypeError("callback must be a function");for(var m=Object(this||g),y=m.length>>>0,L=arguments[1],v=0;v<y;v++){var k=m[v];if(_.call(L,k,v,m))return k}};typeof Object.assign!="function"&&(Object.assign=function(g){if(g==null)throw new TypeError("Cannot convert undefined or null to object");g=Object(g);for(var _=1;_<arguments.length;_++){var m=arguments[_];if(m!=null)for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(g[y]=m[y])}return g});(function(_){_.forEach((function(_){_.hasOwnProperty("remove")||Object.defineProperty(_,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){(this||g).parentNode.removeChild(this||g)}})}))})([Element.prototype,CharacterData.prototype,DocumentType.prototype]);Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(_,m){if((this||g)==null)throw new TypeError('"this" is null or not defined');var y=Object(this||g),L=y.length>>>0;if(L===0)return!1;var v=m|0,k=Math.max(v>=0?v:L-Math.abs(v),0);function a(g,_){return g===_||typeof g=="number"&&typeof _=="number"&&isNaN(g)&&isNaN(_)}for(;k<L;){if(a(y[k],_))return!0;k++}return!1}});var Zi={name:"@geoman-io/leaflet-geoman-free",version:"2.18.3",description:"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0",keywords:["leaflet","geoman","polygon management","geometry editing","map data","map overlay","polygon","geojson","leaflet-draw","data-field-geojson","ui-leaflet-draw"],files:["dist"],main:"dist/leaflet-geoman.js",types:"dist/leaflet-geoman.d.ts",dependencies:{"@turf/boolean-contains":"^6.5.0","@turf/kinks":"^6.5.0","@turf/line-intersect":"^6.5.0","@turf/line-split":"^6.5.0",lodash:"4.17.21","polyclip-ts":"^0.16.5"},devDependencies:{"@types/leaflet":"^1.9.12","cross-env":"^7.0.3",cypress:"^13.11.0",esbuild:"^0.20.2",eslint:"8.56.0","eslint-config-airbnb-base":"15.0.0","eslint-config-prettier":"9.1.0","eslint-plugin-cypress":"2.15.1","eslint-plugin-import":"2.29.1",husky:"^9.0.11",leaflet:"1.9.3","lint-staged":"^15.2.5",prettier:"3.2.4","prosthetic-hand":"1.3.1","ts-node":"^10.9.2"},peerDependencies:{leaflet:"^1.2.0"},scripts:{start:"pnpm run dev",dev:"cross-env DEV=true ts-node bundle.mjs",build:"ts-node bundle.mjs",test:"cypress run --browser chrome",cypress:"cypress open",prepare:"pnpm run build && husky","eslint-check":"eslint --print-config . | eslint-config-prettier-check",eslint:'eslint "{src,demo}/**/*.js" --fix ',prettier:'prettier --write "{src,demo}/**/*.{js,css}" --log-level=warn',lint:"pnpm run eslint && pnpm run prettier"},repository:{type:"git",url:"git://github.com/geoman-io/leaflet-geoman.git"},author:{name:"Geoman.io",email:"sales@geoman.io",url:"http://geoman.io"},license:"MIT",bugs:{url:"https://github.com/geoman-io/leaflet-geoman/issues"},homepage:"https://geoman.io",prettier:{trailingComma:"es5",tabWidth:2,semi:!0,singleQuote:!0},"lint-staged":{"*.js":'eslint "{src,demo}/**/*.js" --fix',"*.{js,css,md}":'prettier --write "{src,demo}/**/*.{js,css}"'}};var Wi=xt(mi());var Qi={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}};var tr={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}};var er={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}};var ir={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}};var rr={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}};var ar={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}};var sr={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}};var hr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}};var pr={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}};var ur={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}};var cr={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}};var dr={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}};var gr={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}};var fr={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}};var _r={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}};var mr={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}};var yr={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}};var Lr={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}};var br={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}};var vr={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}};var kr={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}};var Mr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}};var xr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}};var wr={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}};var Cr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}};var Er={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}};var Pr={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}};var Sr=gr,Br={en:Qi,de:tr,it:er,id:ir,ro:rr,ru:ar,es:sr,nl:hr,fr:pr,pt:Sr,pt_br:dr,pt_pt:gr,zh:ur,zh_tw:cr,pl:fr,sv:_r,el:mr,hu:yr,da:Lr,no:br,fa:vr,ua:kr,tr:Mr,cz:xr,ja:wr,fi:Cr,ko:Er,ky:Pr};var Rr={_globalEditModeEnabled:!1,enableGlobalEditMode(_){let m={..._};(this||g)._globalEditModeEnabled=!0,(this||g).Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers((this||g).map).forEach((g=>{this._isRelevantForEdit(g)&&g.pm.enable(m)})),(this||g).throttledReInitEdit||((this||g).throttledReInitEdit=L.Util.throttle((this||g).handleLayerAdditionInGlobalEditMode,100,this||g)),(this||g)._addedLayersEdit={},(this||g).map.on("layeradd",(this||g)._layerAddedEdit,this||g),(this||g).map.on("layeradd",(this||g).throttledReInitEdit,this||g),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){(this||g)._globalEditModeEnabled=!1,L.PM.Utils.findLayers((this||g).map).forEach((g=>{g.pm.disable()})),(this||g).map.off("layeradd",(this||g)._layerAddedEdit,this||g),(this||g).map.off("layeradd",(this||g).throttledReInitEdit,this||g),(this||g).Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return(this||g)._globalEditModeEnabled},toggleGlobalEditMode(_=(this||g).globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(_)},handleLayerAdditionInGlobalEditMode(){let _=(this||g)._addedLayersEdit;if((this||g)._addedLayersEdit={},this.globalEditModeEnabled())for(let m in _){let y=_[m];this._isRelevantForEdit(y)&&y.pm.enable({...(this||g).globalOptions})}},_layerAddedEdit({layer:_}){(this||g)._addedLayersEdit[L.stamp(_)]=_},_isRelevantForEdit(g){return g.pm&&!(g instanceof L.LayerGroup)&&(!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)&&!g._pmTempLayer&&g.pm.options.allowEditing}},Dr=Rr;var Tr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let _=L.PM.Utils.findLayers((this||g).map);(this||g)._globalDragModeEnabled=!0,(this||g)._addedLayersDrag={},_.forEach((g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()})),(this||g).throttledReInitDrag||((this||g).throttledReInitDrag=L.Util.throttle((this||g).reinitGlobalDragMode,100,this||g)),(this||g).map.on("layeradd",(this||g)._layerAddedDrag,this||g),(this||g).map.on("layeradd",(this||g).throttledReInitDrag,this||g),(this||g).Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let _=L.PM.Utils.findLayers((this||g).map);(this||g)._globalDragModeEnabled=!1,_.forEach((g=>{g.pm.disableLayerDrag()})),(this||g).map.off("layeradd",(this||g)._layerAddedDrag,this||g),(this||g).map.off("layeradd",(this||g).throttledReInitDrag,this||g),(this||g).Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!(this||g)._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let _=(this||g)._addedLayersDrag;if((this||g)._addedLayersDrag={},this.globalDragModeEnabled())for(let g in _){let m=_[g];this._isRelevantForDrag(m)&&m.pm.enableLayerDrag()}},_layerAddedDrag({layer:_}){(this||g)._addedLayersDrag[L.stamp(_)]=_},_isRelevantForDrag(g){return g.pm&&!(g instanceof L.LayerGroup)&&(!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)&&!g._pmTempLayer&&g.pm.options.draggable}},Or=Tr;var Ir={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){(this||g)._globalRemovalModeEnabled=!0,(this||g).map.eachLayer((_=>{this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",(this||g).removeLayer,this||g))})),(this||g).throttledReInitRemoval||((this||g).throttledReInitRemoval=L.Util.throttle((this||g).handleLayerAdditionInGlobalRemovalMode,100,this||g)),(this||g)._addedLayersRemoval={},(this||g).map.on("layeradd",(this||g)._layerAddedRemoval,this||g),(this||g).map.on("layeradd",(this||g).throttledReInitRemoval,this||g),(this||g).Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){(this||g)._globalRemovalModeEnabled=!1,(this||g).map.eachLayer((_=>{_.off("click",(this||g).removeLayer,this||g)})),(this||g).map.off("layeradd",(this||g)._layerAddedRemoval,this||g),(this||g).map.off("layeradd",(this||g).throttledReInitRemoval,this||g),(this||g).Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!(this||g)._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(_){let m=_.target;this._isRelevantForRemoval(m)&&!m.pm.dragging()&&(m.removeFrom((this||g).map.pm._getContainingLayer()),m.remove(),m instanceof L.LayerGroup?(this._fireRemoveLayerGroup(m),this._fireRemoveLayerGroup((this||g).map,m)):(m.pm._fireRemove(m),m.pm._fireRemove((this||g).map,m)))},_isRelevantForRemoval(g){return g.pm&&!(g instanceof L.LayerGroup)&&(!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)&&!g._pmTempLayer&&g.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let _=(this||g)._addedLayersRemoval;if((this||g)._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let m in _){let y=_[m];this._isRelevantForRemoval(y)&&(y.pm.enabled()&&y.pm.disable(),y.on("click",(this||g).removeLayer,this||g))}},_layerAddedRemoval({layer:_}){(this||g)._addedLayersRemoval[L.stamp(_)]=_}},Ar=Ir;var Gr={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){(this||g)._globalRotateModeEnabled=!0,L.PM.Utils.findLayers((this||g).map).filter((g=>g instanceof L.Polyline)).forEach((g=>{this._isRelevantForRotate(g)&&g.pm.enableRotate()})),(this||g).throttledReInitRotate||((this||g).throttledReInitRotate=L.Util.throttle((this||g).handleLayerAdditionInGlobalRotateMode,100,this||g)),(this||g)._addedLayersRotate={},(this||g).map.on("layeradd",(this||g)._layerAddedRotate,this||g),(this||g).map.on("layeradd",(this||g).throttledReInitRotate,this||g),(this||g).Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){(this||g)._globalRotateModeEnabled=!1,L.PM.Utils.findLayers((this||g).map).filter((g=>g instanceof L.Polyline)).forEach((g=>{g.pm.disableRotate()})),(this||g).map.off("layeradd",(this||g)._layerAddedRotate,this||g),(this||g).map.off("layeradd",(this||g).throttledReInitRotate,this||g),(this||g).Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!(this||g)._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(g){return g.pm&&g instanceof L.Polyline&&!(g instanceof L.LayerGroup)&&(!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)&&!g._pmTempLayer&&g.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let _=(this||g)._addedLayersRotate;if((this||g)._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in _){let m=_[g];this._isRelevantForRemoval(m)&&m.pm.enableRotate()}},_layerAddedRotate({layer:_}){(this||g)._addedLayersRotate[L.stamp(_)]=_}},jr=Gr;var zr=xt(mi()),Nr={_fireDrawStart(_="Draw",m={}){this.__fire((this||g)._map,"pm:drawstart",{shape:(this||g)._shape,workingLayer:(this||g)._layer},_,m)},_fireDrawEnd(_="Draw",m={}){this.__fire((this||g)._map,"pm:drawend",{shape:(this||g)._shape},_,m)},_fireCreate(_,m="Draw",y={}){this.__fire((this||g)._map,"pm:create",{shape:(this||g)._shape,marker:_,layer:_},m,y)},_fireCenterPlaced(_="Draw",m={}){let y=_==="Draw"?(this||g)._layer:void 0,L=_!=="Draw"?(this||g)._layer:void 0;this.__fire((this||g)._layer,"pm:centerplaced",{shape:(this||g)._shape,workingLayer:y,layer:L,latlng:(this||g)._layer.getLatLng()},_,m)},_fireCut(_,m,y,L="Draw",v={}){this.__fire(_,"pm:cut",{shape:(this||g)._shape,layer:m,originalLayer:y},L,v)},_fireEdit(_=(this||g)._layer,m="Edit",y={}){this.__fire(_,"pm:edit",{layer:(this||g)._layer,shape:this.getShape()},m,y)},_fireEnable(_="Edit",m={}){this.__fire((this||g)._layer,"pm:enable",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireDisable(_="Edit",m={}){this.__fire((this||g)._layer,"pm:disable",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireUpdate(_="Edit",m={}){this.__fire((this||g)._layer,"pm:update",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireMarkerDragStart(_,m=void 0,y="Edit",L={}){this.__fire((this||g)._layer,"pm:markerdragstart",{layer:(this||g)._layer,markerEvent:_,shape:this.getShape(),indexPath:m},y,L)},_fireMarkerDrag(_,m=void 0,y="Edit",L={}){this.__fire((this||g)._layer,"pm:markerdrag",{layer:(this||g)._layer,markerEvent:_,shape:this.getShape(),indexPath:m},y,L)},_fireMarkerDragEnd(_,m=void 0,y=void 0,L="Edit",v={}){this.__fire((this||g)._layer,"pm:markerdragend",{layer:(this||g)._layer,markerEvent:_,shape:this.getShape(),indexPath:m,intersectionReset:y},L,v)},_fireDragStart(_="Edit",m={}){this.__fire((this||g)._layer,"pm:dragstart",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireDrag(_,m="Edit",y={}){this.__fire((this||g)._layer,"pm:drag",{..._,shape:this.getShape()},m,y)},_fireDragEnd(_="Edit",m={}){this.__fire((this||g)._layer,"pm:dragend",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireDragEnable(_="Edit",m={}){this.__fire((this||g)._layer,"pm:dragenable",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireDragDisable(_="Edit",m={}){this.__fire((this||g)._layer,"pm:dragdisable",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireRemove(g,_=g,m="Edit",y={}){this.__fire(g,"pm:remove",{layer:_,shape:this.getShape()},m,y)},_fireVertexAdded(_,m,y,L="Edit",v={}){this.__fire((this||g)._layer,"pm:vertexadded",{layer:(this||g)._layer,workingLayer:(this||g)._layer,marker:_,indexPath:m,latlng:y,shape:this.getShape()},L,v)},_fireVertexRemoved(_,m,y="Edit",L={}){this.__fire((this||g)._layer,"pm:vertexremoved",{layer:(this||g)._layer,marker:_,indexPath:m,shape:this.getShape()},y,L)},_fireVertexClick(_,m,y="Edit",L={}){this.__fire((this||g)._layer,"pm:vertexclick",{layer:(this||g)._layer,markerEvent:_,indexPath:m,shape:this.getShape()},y,L)},_fireIntersect(_,m=(this||g)._layer,y="Edit",L={}){this.__fire(m,"pm:intersect",{layer:(this||g)._layer,intersection:_,shape:this.getShape()},y,L)},_fireLayerReset(_,m,y="Edit",L={}){this.__fire((this||g)._layer,"pm:layerreset",{layer:(this||g)._layer,markerEvent:_,indexPath:m,shape:this.getShape()},y,L)},_fireChange(_,m="Edit",y={}){this.__fire((this||g)._layer,"pm:change",{layer:(this||g)._layer,latlngs:_,shape:this.getShape()},m,y)},_fireTextChange(_,m="Edit",y={}){this.__fire((this||g)._layer,"pm:textchange",{layer:(this||g)._layer,text:_,shape:this.getShape()},m,y)},_fireTextFocus(_="Edit",m={}){this.__fire((this||g)._layer,"pm:textfocus",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireTextBlur(_="Edit",m={}){this.__fire((this||g)._layer,"pm:textblur",{layer:(this||g)._layer,shape:this.getShape()},_,m)},_fireSnapDrag(g,_,m="Snapping",y={}){this.__fire(g,"pm:snapdrag",_,m,y)},_fireSnap(g,_,m="Snapping",y={}){this.__fire(g,"pm:snap",_,m,y)},_fireUnsnap(g,_,m="Snapping",y={}){this.__fire(g,"pm:unsnap",_,m,y)},_fireRotationEnable(_,m,y="Rotation",L={}){this.__fire(_,"pm:rotateenable",{layer:(this||g)._layer,helpLayer:(this||g)._rotatePoly,shape:this.getShape()},y,L)},_fireRotationDisable(_,m="Rotation",y={}){this.__fire(_,"pm:rotatedisable",{layer:(this||g)._layer,shape:this.getShape()},m,y)},_fireRotationStart(_,m,y="Rotation",L={}){this.__fire(_,"pm:rotatestart",{layer:(this||g)._rotationLayer,helpLayer:(this||g)._layer,startAngle:(this||g)._startAngle,originLatLngs:m},y,L)},_fireRotation(_,m,y,L=(this||g)._rotationLayer,v="Rotation",k={}){this.__fire(_,"pm:rotate",{layer:L,helpLayer:(this||g)._layer,startAngle:(this||g)._startAngle,angle:L.pm.getAngle(),angleDiff:m,oldLatLngs:y,newLatLngs:L.getLatLngs()},v,k)},_fireRotationEnd(_,m,y,L="Rotation",v={}){this.__fire(_,"pm:rotateend",{layer:(this||g)._rotationLayer,helpLayer:(this||g)._layer,startAngle:m,angle:(this||g)._rotationLayer.pm.getAngle(),originLatLngs:y,newLatLngs:(this||g)._rotationLayer.getLatLngs()},L,v)},_fireActionClick(_,m,y,L="Toolbar",v={}){this.__fire((this||g)._map,"pm:actionclick",{text:_.text,action:_,btnName:m,button:y},L,v)},_fireButtonClick(_,m,y="Toolbar",L={}){this.__fire((this||g)._map,"pm:buttonclick",{btnName:_,button:m},y,L)},_fireLangChange(_,m,y,L,v="Global",k={}){this.__fire((this||g).map,"pm:langchange",{oldLang:_,activeLang:m,fallback:y,translations:L},v,k)},_fireGlobalDragModeToggled(_,m="Global",y={}){this.__fire((this||g).map,"pm:globaldragmodetoggled",{enabled:_,map:(this||g).map},m,y)},_fireGlobalEditModeToggled(_,m="Global",y={}){this.__fire((this||g).map,"pm:globaleditmodetoggled",{enabled:_,map:(this||g).map},m,y)},_fireGlobalRemovalModeToggled(_,m="Global",y={}){this.__fire((this||g).map,"pm:globalremovalmodetoggled",{enabled:_,map:(this||g).map},m,y)},_fireGlobalCutModeToggled(_="Global",m={}){this.__fire((this||g)._map,"pm:globalcutmodetoggled",{enabled:!!(this||g)._enabled,map:(this||g)._map},_,m)},_fireGlobalDrawModeToggled(_="Global",m={}){this.__fire((this||g)._map,"pm:globaldrawmodetoggled",{enabled:(this||g)._enabled,shape:(this||g)._shape,map:(this||g)._map},_,m)},_fireGlobalRotateModeToggled(_="Global",m={}){this.__fire((this||g).map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:(this||g).map},_,m)},_fireRemoveLayerGroup(g,_=g,m="Edit",y={}){this.__fire(g,"pm:remove",{layer:_,shape:void 0},m,y)},_fireKeyeventEvent(_,m,y,L="Global",v={}){this.__fire((this||g).map,"pm:keyevent",{event:_,eventType:m,focusOn:y},L,v)},__fire(g,_,m,y,v={}){m=(0,zr.default)(m,v,{source:y}),L.PM.Utils._fireEvent(g,_,m)}},Vr=Nr;var kg=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(_){(this||g).map=_,L.DomEvent.on(document,"keydown keyup",(this||g)._onKeyListener,this||g),L.DomEvent.on(window,"blur",(this||g)._onBlur,this||g),_.once("unload",(this||g)._unbindKeyListenerEvents,this||g)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",(this||g)._onKeyListener,this||g),L.DomEvent.off(window,"blur",(this||g)._onBlur,this||g)},_onKeyListener(_){let m="document";(this||g).map.getContainer().contains(_.target)&&(m="map");let y={event:_,eventType:_.type,focusOn:m};(this||g)._lastEvents[_.type]=y,(this||g)._lastEvents.current=y,(this||g).map.pm._fireKeyeventEvent(_,_.type,m)},_onBlur(_){_.altKey=!1;let m={event:_,eventType:_.type,focusOn:"document"};(this||g)._lastEvents[_.type]=m,(this||g)._lastEvents.current=m},getLastKeyEvent(_="current"){return(this||g)._lastEvents[_]},isShiftKeyPressed(){return(this||g)._lastEvents.current?.event.shiftKey},isAltKeyPressed(){return(this||g)._lastEvents.current?.event.altKey},isCtrlKeyPressed(){return(this||g)._lastEvents.current?.event.ctrlKey},isMetaKeyPressed(){return(this||g)._lastEvents.current?.event.metaKey},getPressedKey(){return(this||g)._lastEvents.current?.event.key}}),Fr=kg;var Ur=xt(zi());function V(g){let _=L.PM.activeLang;return(0,Ur.default)(Br[_],g)||(0,Ur.default)(Br.en,g)||g}function be(g){for(let _=0;_<g.length;_+=1){let m=g[_];if(Array.isArray(m)){if(be(m))return!0}else if(m!=null&&m!=="")return!0}return!1}function ve(g){return g.reduce(((g,_)=>{if(_.length!==0){let m=Array.isArray(_)?ve(_):_;Array.isArray(m)?m.length!==0&&g.push(m):g.push(m)}return g}),[])}function am(g,_,m){let y,v,k,M={a:L.CRS.Earth.R,b:6356752.3142,f:.0033528106647474805},{a:x,b:w,f:C}=M,B=g.lng,I=g.lat,j=m,z=Math.PI,N=_*z/180,F=Math.sin(N),U=Math.cos(N),K=(1-C)*Math.tan(I*z/180),H=1/Math.sqrt(1+K*K),Y=K*H,X=Math.atan2(K,U),$=H*F,Z=1-$*$,W=Z*(x*x-w*w)/(w*w),Q=1+W/16384*(4096+W*(W*(320-175*W)-768)),tt=W/1024*(256+W*(W*(74-47*W)-128)),et=j/(w*Q),it=2*Math.PI;for(;Math.abs(et-it)>1e-12;){y=Math.cos(2*X+et),v=Math.sin(et),k=Math.cos(et);let g=tt*v*(y+tt/4*(k*(2*y*y-1)-tt/6*y*(4*v*v-3)*(4*y*y-3)));it=et,et=j/(w*Q)+g}let nt=Y*v-H*k*U,at=Math.atan2(Y*k+H*v*U,(1-C)*Math.sqrt($*$+nt*nt)),st=Math.atan2(v*F,H*k-Y*v*U),ht=C/16*Z*(4+C*(4-3*Z)),pt=st-(1-ht)*C*$*(et+ht*v*(y+ht*k*(2*y*y-1))),ut=B+pt*180/z,ct=at*180/z;return L.latLng(ut,ct)}function Ei(g,_,m,y,v=!0){let k,M,x,w=[];for(let C=0;C<m;C+=1){if(v)k=C*360/m+y,M=am(g,k,_),x=L.latLng(M.lng,M.lat);else{let y=g.lat+Math.cos(2*C*Math.PI/m)*_,v=g.lng+Math.sin(2*C*Math.PI/m)*_;x=L.latLng(y,v)}w.push(x)}return w}function om(g,_,m){_=(_+360)%360;let y=Math.PI/180,v=180/Math.PI,{R:k}=L.CRS.Earth,M=g.lng*y,x=g.lat*y,w=_*y,C=Math.sin(x),B=Math.cos(x),I=Math.cos(m/k),j=Math.sin(m/k),z=Math.asin(C*I+B*j*Math.cos(w)),N=M+Math.atan2(Math.sin(w)*j*B,I-C*Math.sin(z));N*=v;let F=N-360,U=N<-180?N+360:N;return N=N>180?F:U,L.latLng([z*v,N])}function ke(g,_,m){let y=g.latLngToContainerPoint(_),L=g.latLngToContainerPoint(m),v=Math.atan2(L.y-y.y,L.x-y.x)*180/Math.PI+90;return v+=v<0?360:0,v}function te(g,_,m,y){let L=ke(g,_,m);return om(_,L,y)}function Ko(g,_,m="asc"){if(!_||Object.keys(_).length===0)return(g,_)=>g-_;let y,v=Object.keys(_),k=v.length-1,M={};for(;k>=0;)y=v[k],M[y.toLowerCase()]=_[y],k-=1;function o(g){return g instanceof L.Marker?"Marker":g instanceof L.Circle?"Circle":g instanceof L.CircleMarker?"CircleMarker":g instanceof L.Rectangle?"Rectangle":g instanceof L.Polygon?"Polygon":g instanceof L.Polyline?"Line":void 0}return(_,y)=>{let L,v;if(g==="instanceofShape"){if(L=o(_.layer).toLowerCase(),v=o(y.layer).toLowerCase(),!L||!v)return 0}else{if(!_.hasOwnProperty(g)||!y.hasOwnProperty(g))return 0;L=_[g].toLowerCase(),v=y[g].toLowerCase()}let k=L in M?M[L]:Number.MAX_SAFE_INTEGER,x=v in M?M[v]:Number.MAX_SAFE_INTEGER,w=0;return k<x?w=-1:k>x&&(w=1),m==="desc"?w*-1:w}}function vt(g,_=g.getLatLngs()){return g instanceof L.Polygon?L.polygon(_).getLatLngs():L.polyline(_).getLatLngs()}function Pi(g,_){if(_.options.crs?.projection?.MAX_LATITUDE){let m=_.options.crs?.projection?.MAX_LATITUDE;g.lat=Math.max(Math.min(m,g.lat),-m)}return g}function Dt(g){return g.options.renderer||g._map&&(g._map._getPaneRenderer(g.options.pane)||g._map.options.renderer||g._map._renderer)||g._renderer}var Kr=L.Class.extend({includes:[Dr,Or,Ar,jr,Vr],initialize(_){(this||g).map=_,(this||g).Draw=new L.PM.Draw(_),(this||g).Toolbar=new L.PM.Toolbar(_),(this||g).Keyboard=Fr(),(this||g).globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},(this||g).Keyboard._initKeyListener(_)},setLang(_="en",m,y="en"){if(_=_.trim().toLowerCase(),!/^[a-z]{2}$/.test(_)){let g=_.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(g){let m=[`${g[1]}_${g[2]}`,`${g[1]}`];for(let g of m)if(Br[g]){_=g;break}}}let v=L.PM.activeLang;m&&(Br[_]=(0,Wi.default)(Br[y],m)),L.PM.activeLang=_,(this||g).map.pm.Toolbar.reinit(),this._fireLangChange(v,_,y,Br[_])},addControls(_){(this||g).Toolbar.addControls(_)},removeControls(){(this||g).Toolbar.removeControls()},toggleControls(){(this||g).Toolbar.toggleControls()},controlsVisible(){return(this||g).Toolbar.isVisible},enableDraw(_="Polygon",m){_==="Poly"&&(_="Polygon"),(this||g).Draw.enable(_,m)},disableDraw(_="Polygon"){_==="Poly"&&(_="Polygon"),(this||g).Draw.disable(_)},setPathOptions(_,m={}){let y=m.ignoreShapes||[],L=m.merge||!1;(this||g).map.pm.Draw.shapes.forEach((m=>{y.indexOf(m)===-1&&(this||g).map.pm.Draw[m].setPathOptions(_,L)}))},getGlobalOptions(){return(this||g).globalOptions},setGlobalOptions(_){let m=(0,Wi.default)((this||g).globalOptions,_);m.editable&&(m.resizeableCircleMarker=m.editable,delete m.editable);let y=!1;(this||g).map.pm.Draw.CircleMarker.enabled()&&!!(this||g).map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!m.resizeableCircleMarker&&((this||g).map.pm.Draw.CircleMarker.disable(),y=!0);let v=!1;(this||g).map.pm.Draw.Circle.enabled()&&!!(this||g).map.pm.Draw.Circle.options.resizeableCircle!=!!m.resizeableCircle&&((this||g).map.pm.Draw.Circle.disable(),v=!0),(this||g).map.pm.Draw.shapes.forEach((_=>{(this||g).map.pm.Draw[_].setOptions(m)})),y&&(this||g).map.pm.Draw.CircleMarker.enable(),v&&(this||g).map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers((this||g).map).forEach((g=>{g.pm.setOptions(m)})),(this||g).map.fire("pm:globaloptionschanged"),(this||g).globalOptions=m,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers((this||g).map).forEach((g=>{g.pm.enabled()&&g.pm.applyOptions()}))},globalDrawModeEnabled(){return!!(this||g).Draw.getActiveShape()},globalCutModeEnabled(){return!!(this||g).Draw.Cut.enabled()},enableGlobalCutMode(_){return(this||g).Draw.Cut.enable(_)},toggleGlobalCutMode(_){return(this||g).Draw.Cut.toggle(_)},disableGlobalCutMode(){return(this||g).Draw.Cut.disable()},getGeomanLayers(_=!1){let m=L.PM.Utils.findLayers((this||g).map);if(!_)return m;let y=L.featureGroup();return y._pmTempLayer=!0,m.forEach((g=>{y.addLayer(g)})),y},getGeomanDrawLayers(_=!1){let m=L.PM.Utils.findLayers((this||g).map).filter((g=>g._drawnByGeoman===!0));if(!_)return m;let y=L.featureGroup();return y._pmTempLayer=!0,m.forEach((g=>{y.addLayer(g)})),y},_getContainingLayer(){return(this||g).globalOptions.layerGroup&&(this||g).globalOptions.layerGroup instanceof L.LayerGroup?(this||g).globalOptions.layerGroup:(this||g).map},_isCRSSimple(){return(this||g).map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(_){(this||g)._touchEventCounter===0&&(L.DomEvent.on(_,"touchmove",(this||g)._canvasTouchMove,this||g),L.DomEvent.on(_,"touchstart touchend touchcancel",(this||g)._canvasTouchClick,this||g)),(this||g)._touchEventCounter+=1},_removeTouchEvents(_){(this||g)._touchEventCounter===1&&(L.DomEvent.off(_,"touchmove",(this||g)._canvasTouchMove,this||g),L.DomEvent.off(_,"touchstart touchend touchcancel",(this||g)._canvasTouchClick,this||g)),(this||g)._touchEventCounter=(this||g)._touchEventCounter<=1?0:(this||g)._touchEventCounter-1},_canvasTouchMove(_){Dt((this||g).map)._onMouseMove(this._createMouseEvent("mousemove",_))},_canvasTouchClick(_){let m="";_.type==="touchstart"||_.type==="pointerdown"?m="mousedown":(_.type==="touchend"||_.type==="pointerup"||_.type==="touchcancel"||_.type==="pointercancel")&&(m="mouseup"),m&&Dt((this||g).map)._onClick(this._createMouseEvent(m,_))},_createMouseEvent(g,_){let m,y=_.touches[0]||_.changedTouches[0];try{m=new MouseEvent(g,{bubbles:_.bubbles,cancelable:_.cancelable,view:_.view,detail:y.detail,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY,ctrlKey:_.ctrlKey,altKey:_.altKey,shiftKey:_.shiftKey,metaKey:_.metaKey,button:_.button,relatedTarget:_.relatedTarget})}catch{m=document.createEvent("MouseEvents"),m.initMouseEvent(g,_.bubbles,_.cancelable,_.view,y.detail,y.screenX,y.screenY,y.clientX,y.clientY,_.ctrlKey,_.altKey,_.shiftKey,_.metaKey,_.button,_.relatedTarget)}return m}}),qr=Kr;var Hr=L.Control.extend({includes:[Vr],options:{position:"topleft",disableByOtherButtons:!0},initialize(_){(this||g)._button=L.Util.extend({},(this||g).options,_)},onAdd(_){return(this||g)._map=_,(this||g)._map.pm.Toolbar.options.oneBlock?(this||g)._container=(this||g)._map.pm.Toolbar._createContainer((this||g).options.position):(this||g)._button.tool==="edit"?(this||g)._container=(this||g)._map.pm.Toolbar.editContainer:(this||g)._button.tool==="options"?(this||g)._container=(this||g)._map.pm.Toolbar.optionsContainer:(this||g)._button.tool==="custom"?(this||g)._container=(this||g)._map.pm.Toolbar.customContainer:(this||g)._container=(this||g)._map.pm.Toolbar.drawContainer,this._renderButton(),(this||g)._container},_renderButton(){let _=(this||g).buttonsDomNode;(this||g).buttonsDomNode=this._makeButton((this||g)._button),_?_.replaceWith((this||g).buttonsDomNode):(this||g)._container.appendChild((this||g).buttonsDomNode)},onRemove(){return(this||g).buttonsDomNode.remove(),(this||g)._container},getText(){return(this||g)._button.text},getIconUrl(){return(this||g)._button.iconUrl},destroy(){(this||g)._button={},this._update()},toggle(_){return(this||g)._button.toggleStatus=typeof _=="boolean"?_:!(this||g)._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction((this||g)._button),(this||g)._button.toggleStatus},toggled(){return(this||g)._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),(this||g)._button.disabled=!0,this._updateDisabled()},enable(){(this||g)._button.disabled=!1,this._updateDisabled(),this._updateActiveAction((this||g)._button)},_triggerClick(_){_&&_.preventDefault(),!(this||g)._button.disabled&&((this||g)._button.onClick(_,{button:this||g,event:_}),this._clicked(_),(this||g)._button.afterClick(_,{button:this||g,event:_}))},_makeButton(_){let m=(this||g).options.position.indexOf("right")>-1?"pos-right":"",y=L.DomUtil.create("div",`button-container  ${m}`,(this||g)._container);_.title&&y.setAttribute("title",_.title);let v=L.DomUtil.create("a","leaflet-buttons-control-button",y);v.setAttribute("role","button"),v.setAttribute("tabindex","0"),v.href="#";let k=L.DomUtil.create("div",`leaflet-pm-actions-container ${m}`,y),M=_.actions,x={cancel:{text:V("actions.cancel"),title:V("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:V("actions.finish"),title:V("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:V("actions.removeLastVertex"),title:V("actions.removeLastVertex"),onClick(){(this||g)._map.pm.Draw[_.jsClass]._removeLastVertex()}},finish:{text:V("actions.finish"),title:V("actions.finish"),onClick(m){(this||g)._map.pm.Draw[_.jsClass]._finishShape(m)}}};_._preparedActions=M.map((y=>{let v,M=typeof y=="string"?y:y.name;if(x[M])v=x[M];else{if(!y.text)return v;v=y}let w=L.DomUtil.create("a",`leaflet-pm-action ${m} action-${M}`,k);if(w.setAttribute("role","button"),w.setAttribute("tabindex","0"),w.href="#",v.title&&(w.title=v.title),w.innerHTML=v.text,L.DomEvent.disableClickPropagation(w),L.DomEvent.on(w,"click",L.DomEvent.stop),v._node=w,!_.disabled&&v.onClick){let P=m=>{m.preventDefault();let y="",{buttons:L}=(this||g)._map.pm.Toolbar;for(let g in L)if(L[g]._button===_){y=g;break}this._fireActionClick(v,y,_)};L.DomEvent.addListener(w,"click",P,this||g),L.DomEvent.addListener(w,"click",v.onClick,this||g),L.DomEvent.addListener(w,"click",(()=>this._updateActiveAction(_)))}return v})),this._updateActiveAction(_),_.toggleStatus&&L.DomUtil.addClass(y,"active");let w=L.DomUtil.create("div","control-icon",v);return _.iconUrl&&w.setAttribute("src",_.iconUrl),_.className&&L.DomUtil.addClass(w,_.className),L.DomEvent.disableClickPropagation(v),L.DomEvent.on(v,"click",L.DomEvent.stop),_.disabled||(L.DomEvent.addListener(v,"click",(this||g)._onBtnClick,this||g),L.DomEvent.addListener(v,"click",(this||g)._triggerClick,this||g)),_.disabled&&(L.DomUtil.addClass(v,"pm-disabled"),v.setAttribute("aria-disabled","true")),y},_applyStyleClasses(){(this||g)._container&&((this||g)._button.toggleStatus&&(this||g)._button.cssToggle!==!1?(L.DomUtil.addClass((this||g).buttonsDomNode,"active"),L.DomUtil.addClass((this||g)._container,"activeChild")):(L.DomUtil.removeClass((this||g).buttonsDomNode,"active"),L.DomUtil.removeClass((this||g)._container,"activeChild")))},_onBtnClick(){if((this||g)._button.disabled)return;(this||g)._button.disableOtherButtons&&(this||g)._map.pm.Toolbar.triggerClickOnToggledButtons(this||g);let _="",{buttons:m}=(this||g)._map.pm.Toolbar;for(let y in m)if(m[y]._button===(this||g)._button){_=y;break}this._fireButtonClick(_,(this||g)._button)},_clicked(){(this||g)._button.doToggle&&this.toggle()},_updateDisabled(){if(!(this||g)._container)return;let _="pm-disabled",m=(this||g).buttonsDomNode.children[0];(this||g)._button.disabled?(L.DomUtil.addClass(m,_),m.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(m,_),m.setAttribute("aria-disabled","false"))},_updateActiveAction(_){_._preparedActions?.forEach((_=>{_?._node&&(_.isActive&&_.isActive.call(this||g)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))}))}}),Jr=Hr;L.Control.PMButton=Jr;var Yr=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(_){(this||g).customButtons=[],(this||g).options.positions={draw:"",edit:"",options:"",custom:""},this.init(_)},reinit(){let _=(this||g).isVisible;this.removeControls(),this._defineButtons(),_&&this.addControls()},init(_){(this||g).map=_,(this||g).buttons={},(this||g).isVisible=!1,(this||g).drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),(this||g).editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),(this||g).optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),(this||g).customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(_){let m=`${_}Container`;return(this||g)[m]||((this||g)[m]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${_} leaflet-bar leaflet-control`)),(this||g)[m]},getButtons(){return(this||g).buttons},addControls(_=(this||g).options){typeof _.editPolygon<"u"&&(_.editMode=_.editPolygon),typeof _.deleteLayer<"u"&&(_.removalMode=_.deleteLayer),L.Util.setOptions(this||g,_),this.applyIconStyle(),(this||g).isVisible=!0,this._showHideButtons()},applyIconStyle(){let g=this.getButtons(),_={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let m in g){let y=g[m];L.Util.setOptions(y,{className:_.geomanIcons[m]})}},removeControls(){let _=this.getButtons();for(let g in _)_[g].remove();(this||g).isVisible=!1},toggleControls(_=(this||g).options){(this||g).isVisible?this.removeControls():this.addControls(_)},_addButton(_,m){return(this||g).buttons[_]=m,(this||g).options[_]=!!(this||g).options[_]||!1,(this||g).buttons[_]},triggerClickOnToggledButtons(_){for(let m in(this||g).buttons){let y=(this||g).buttons[m];y._button.disableByOtherButtons&&y!==_&&y.toggled()&&y._triggerClick()}},toggleButton(_,m,y=!0){_==="editPolygon"&&(_="editMode"),_==="deleteLayer"&&(_="removalMode");let L=_;return y&&this.triggerClickOnToggledButtons((this||g).buttons[L]),!!(this||g).buttons[L]&&(this||g).buttons[L].toggle(m)},_defineButtons(){let _={className:"control-icon leaflet-pm-icon-marker",title:V("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["cancel"]},m={title:V("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["finish","removeLastVertex","cancel"]},y={className:"control-icon leaflet-pm-icon-polyline",title:V("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["finish","removeLastVertex","cancel"]},v={title:V("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["cancel"]},k={title:V("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["cancel"]},M={title:V("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["cancel"]},x={title:V("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{(this||g).map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,tool:"edit",actions:["finishMode"]},w={title:V("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{(this||g).map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,tool:"edit",actions:["finishMode"]},C={title:V("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},B={title:V("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{(this||g).map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,tool:"edit",actions:["finishMode"]},I={title:V("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{(this||g).map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,tool:"edit",actions:["finishMode"]},j={className:"control-icon leaflet-pm-icon-text",title:V("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(_,m)=>{(this||g).map.pm.Draw[m.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:(this||g).options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(_)),this._addButton("drawPolyline",new L.Control.PMButton(y)),this._addButton("drawRectangle",new L.Control.PMButton(M)),this._addButton("drawPolygon",new L.Control.PMButton(m)),this._addButton("drawCircle",new L.Control.PMButton(v)),this._addButton("drawCircleMarker",new L.Control.PMButton(k)),this._addButton("drawText",new L.Control.PMButton(j)),this._addButton("editMode",new L.Control.PMButton(x)),this._addButton("dragMode",new L.Control.PMButton(w)),this._addButton("cutPolygon",new L.Control.PMButton(C)),this._addButton("removalMode",new L.Control.PMButton(B)),this._addButton("rotateMode",new L.Control.PMButton(I))},_showHideButtons(){if(!(this||g).isVisible)return;this.removeControls(),(this||g).isVisible=!0;let _=this.getButtons(),m=[];(this||g).options.drawControls===!1&&(m=m.concat(Object.keys(_).filter((g=>!_[g]._button.tool)))),(this||g).options.editControls===!1&&(m=m.concat(Object.keys(_).filter((g=>_[g]._button.tool==="edit")))),(this||g).options.optionsControls===!1&&(m=m.concat(Object.keys(_).filter((g=>_[g]._button.tool==="options")))),(this||g).options.customControls===!1&&(m=m.concat(Object.keys(_).filter((g=>_[g]._button.tool==="custom"))));for(let y in _)if((this||g).options[y]&&m.indexOf(y)===-1){let m=_[y]._button.tool;m||(m="draw"),_[y].setPosition(this._getBtnPosition(m)),_[y].addTo((this||g).map)}},_getBtnPosition(_){return(this||g).options.positions&&(this||g).options.positions[_]?(this||g).options.positions[_]:(this||g).options.position},setBlockPosition(_,m){(this||g).options.positions[_]=m,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return(this||g).options.positions},copyDrawControl(_,m){if(!m)throw new TypeError("Button has no name");typeof m!="object"&&(m={name:m});let y=this._btnNameMapping(_);if(!m.name)throw new TypeError("Button has no name");if((this||g).buttons[m.name])throw new TypeError("Button with this name already exists");let L=(this||g).map.pm.Draw.createNewDrawInstance(m.name,y);m={...(this||g).buttons[y]._button,...m};let v=this.createCustomControl(m);return{drawInstance:L,control:v}},createCustomControl(_){if(!_.name)throw new TypeError("Button has no name");if((this||g).buttons[_.name])throw new TypeError("Button with this name already exists");_.onClick||(_.onClick=()=>{}),_.afterClick||(_.afterClick=()=>{}),_.toggle!==!1&&(_.toggle=!0),_.block&&(_.block=_.block.toLowerCase()),(!_.block||_.block==="draw")&&(_.block=""),_.className?_.className.indexOf("control-icon")===-1&&(_.className=`control-icon ${_.className}`):_.className="control-icon";let m={tool:_.block,className:_.className,title:_.title||"",jsClass:_.name,onClick:_.onClick,afterClick:_.afterClick,doToggle:_.toggle,toggleStatus:!1,disableOtherButtons:_.disableOtherButtons??!0,disableByOtherButtons:_.disableByOtherButtons??!0,cssToggle:_.toggle,position:(this||g).options.position,actions:_.actions||[],disabled:!!_.disabled};(this||g).options[_.name]!==!1&&((this||g).options[_.name]=!0);let y=this._addButton(_.name,new L.Control.PMButton(m));return this.changeControlOrder(),y},controlExists(g){return!!this.getButton(g)},getButton(g){return this.getButtons()[g]},getButtonsInBlock(g){let _={};if(g)for(let m in this.getButtons()){let y=this.getButtons()[m];(y._button.tool===g||g==="draw"&&!y._button.tool)&&(_[m]=y)}return _},changeControlOrder(_=[]){let m=this._shapeMapping(),y=[];_.forEach((g=>{m[g]?y.push(m[g]):y.push(g)}));let L=this.getButtons(),v={};y.forEach((g=>{L[g]&&(v[g]=L[g])})),Object.keys(L).filter((g=>!L[g]._button.tool||L[g]._button.tool==="draw")).forEach((g=>{y.indexOf(g)===-1&&(v[g]=L[g])})),Object.keys(L).filter((g=>L[g]._button.tool==="edit")).forEach((g=>{y.indexOf(g)===-1&&(v[g]=L[g])})),Object.keys(L).filter((g=>L[g]._button.tool==="options")).forEach((g=>{y.indexOf(g)===-1&&(v[g]=L[g])})),Object.keys(L).filter((g=>L[g]._button.tool==="custom")).forEach((g=>{y.indexOf(g)===-1&&(v[g]=L[g])})),Object.keys(L).forEach((g=>{y.indexOf(g)===-1&&(v[g]=L[g])})),(this||g).map.pm.Toolbar.buttons=v,this._showHideButtons()},getControlOrder(){let g=this.getButtons(),_=[];for(let m in g)_.push(m);return _},changeActionsOfControl(_,m){let y=this._btnNameMapping(_);if(!y)throw new TypeError("No name passed");if(!m)throw new TypeError("No actions passed");if(!(this||g).buttons[y])throw new TypeError("Button with this name not exists");(this||g).buttons[y]._button.actions=m,this.changeControlOrder()},setButtonDisabled(_,m){let y=this._btnNameMapping(_);m?(this||g).buttons[y].disable():(this||g).buttons[y].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(g){let _=this._shapeMapping();return _[g]?_[g]:g}}),Xr=Yr;var $r=xt(mi());var Zr={_initSnappableMarkers(){(this||g).options.snapDistance=(this||g).options.snapDistance||30,(this||g).options.snapSegment=(this||g).options.snapSegment===void 0||(this||g).options.snapSegment,this._assignEvents((this||g)._markers),(this||g)._layer.off("pm:dragstart",(this||g)._unsnap,this||g),(this||g)._layer.on("pm:dragstart",(this||g)._unsnap,this||g)},_disableSnapping(){(this||g)._layer.off("pm:dragstart",(this||g)._unsnap,this||g)},_assignEvents(_){_.forEach((_=>{Array.isArray(_)?this._assignEvents(_):(_.off("drag",(this||g)._handleSnapping,this||g),_.on("drag",(this||g)._handleSnapping,this||g),_.off("dragend",(this||g)._cleanupSnapping,this||g),_.on("dragend",(this||g)._cleanupSnapping,this||g))}))},_cleanupSnapping(_){if(_){let g=_.target;g._snapped=!1}delete(this||g)._snapList,(this||g).throttledList&&((this||g)._map.off("layeradd",(this||g).throttledList,this||g),(this||g).throttledList=void 0),(this||g)._map.off("layerremove",(this||g)._handleSnapLayerRemoval,this||g),(this||g).debugIndicatorLines&&(this||g).debugIndicatorLines.forEach((g=>{g.remove()}))},_handleThrottleSnapping(){(this||g).throttledList&&this._createSnapList()},_handleSnapping(_){let m=_.target;if(m._snapped=!1,(this||g).throttledList||((this||g).throttledList=L.Util.throttle((this||g)._handleThrottleSnapping,100,this||g)),_?.originalEvent?.altKey||(this||g)._map?.pm?.Keyboard.isAltKeyPressed()||((this||g)._snapList===void 0&&(this._createSnapList(),(this||g)._map.off("layeradd",(this||g).throttledList,this||g),(this||g)._map.on("layeradd",(this||g).throttledList,this||g)),(this||g)._snapList.length<=0))return!1;let y=this._calcClosestLayer(m.getLatLng(),(this||g)._snapList);if(Object.keys(y).length===0)return!1;let v,k=y.layer instanceof L.Marker||y.layer instanceof L.CircleMarker||!(this||g).options.snapSegment;v=k?y.latlng:this._checkPrioritiySnapping(y);let M=(this||g).options.snapDistance,x={marker:m,shape:(this||g)._shape,snapLatLng:v,segment:y.segment,layer:(this||g)._layer,workingLayer:(this||g)._layer,layerInteractedWith:y.layer,distance:y.distance};if(this._fireSnapDrag(x.marker,x),this._fireSnapDrag((this||g)._layer,x),y.distance<M){m._orgLatLng=m.getLatLng(),m.setLatLng(v),m._snapped=!0,m._snapInfo=x;let o=()=>{(this||g)._snapLatLng=v,this._fireSnap(m,x),this._fireSnap((this||g)._layer,x)},_=(this||g)._snapLatLng||{},y=v||{};(_.lat!==y.lat||_.lng!==y.lng)&&o()}else(this||g)._snapLatLng&&(this._unsnap(x),m._snapped=!1,m._snapInfo=void 0,this._fireUnsnap(x.marker,x),this._fireUnsnap((this||g)._layer,x));return!0},_createSnapList(){let _=[],m=[],y=(this||g)._map;y.off("layerremove",(this||g)._handleSnapLayerRemoval,this||g),y.on("layerremove",(this||g)._handleSnapLayerRemoval,this||g),y.eachLayer((g=>{if((g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&g.options.snapIgnore!==!0){if(g.options.snapIgnore===void 0&&(!L.PM.optIn&&g.options.pmIgnore===!0||L.PM.optIn&&g.options.pmIgnore!==!1))return;(g instanceof L.Circle||g instanceof L.CircleMarker)&&g.pm&&g.pm._hiddenPolyCircle?_.push(g.pm._hiddenPolyCircle):g instanceof L.ImageOverlay&&(g=L.rectangle(g.getBounds())),_.push(g);let y=L.polyline([],{color:"red",pmIgnore:!0});y._pmTempLayer=!0,m.push(y),(g instanceof L.Circle||g instanceof L.CircleMarker)&&m.push(y)}})),_=_.filter((_=>(this||g)._layer!==_)),_=_.filter((g=>g._latlng||g._latlngs&&be(g._latlngs))),_=_.filter((g=>!g._pmTempLayer)),(this||g)._otherSnapLayers?((this||g)._otherSnapLayers.forEach((()=>{let g=L.polyline([],{color:"red",pmIgnore:!0});g._pmTempLayer=!0,m.push(g)})),(this||g)._snapList=_.concat((this||g)._otherSnapLayers)):(this||g)._snapList=_,(this||g).debugIndicatorLines=m},_handleSnapLayerRemoval({layer:_}){if(!_._leaflet_id)return;let m=(this||g)._snapList.findIndex((g=>g._leaflet_id===_._leaflet_id));m>-1&&(this||g)._snapList.splice(m,1)},_calcClosestLayer(g,_){return this._calcClosestLayers(g,_,1)[0]},_calcClosestLayers(_,m,y=1){let v=[],k={};m.forEach(((m,M)=>{if(m._parentCopy&&m._parentCopy===(this||g)._layer||m.getLatLngs?.().flat(5).length<2)return;let x=this._calcLayerDistances(_,m);if(x.distance=Math.floor(x.distance),(this||g).debugIndicatorLines){if(!(this||g).debugIndicatorLines[M]){let _=L.polyline([],{color:"red",pmIgnore:!0});_._pmTempLayer=!0,(this||g).debugIndicatorLines[M]=_}(this||g).debugIndicatorLines[M].setLatLngs([_,x.latlng])}y===1&&(k.distance===void 0||x.distance-5<=k.distance)?(x.distance+5<k.distance&&(v=[]),k=x,k.layer=m,v.push(k)):y!==1&&(k={},k=x,k.layer=m,v.push(k))})),y!==1&&(v=v.sort(((g,_)=>g.distance-_.distance))),y===-1&&(y=v.length);let M=this._getClosestLayerByPriority(v,y);return L.Util.isArray(M)?M:[M]},_calcLayerDistances(_,m){let y=(this||g)._map,v=m instanceof L.Marker||m instanceof L.CircleMarker,k=m instanceof L.Polygon,M=_;if(v){let g=m.getLatLng();return{latlng:{...g},distance:this._getDistance(y,g,M)}}return this._calcLatLngDistances(M,m.getLatLngs(),y,k)},_calcLatLngDistances(_,m,y,L=!1){let v,k,M,o=m=>{m.forEach(((x,w)=>{if(Array.isArray(x))o(x);else if((this||g).options.snapSegment){let g,v=x;g=L?w+1===m.length?0:w+1:w+1===m.length?void 0:w+1;let C=m[g];if(C){let g=this._getDistanceToSegment(y,_,v,C);(k===void 0||g<k)&&(k=g,M=[v,C])}}else{let g=this._getDistance(y,_,x);(k===void 0||g<k)&&(k=g,v=x)}}))};return o(m),(this||g).options.snapSegment?{latlng:{...this._getClosestPointOnSegment(y,_,M[0],M[1])},segment:M,distance:k}:{latlng:v,distance:k}},_getClosestLayerByPriority(_,m=1){_=_.sort(((g,_)=>g._leaflet_id-_._leaflet_id));let y=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],L=(this||g)._map.pm.globalOptions.snappingOrder||[],v=0,k={};return L.concat(y).forEach((g=>{k[g]||(v+=1,k[g]=v)})),_.sort(Ko("instanceofShape",k)),m===1?_[0]||{}:_.slice(0,m)},_checkPrioritiySnapping(_){let m=(this||g)._map,y=_.segment[0],v=_.segment[1],k=_.latlng,M=k;if((this||g).options.snapVertex){let _=this._getDistance(m,y,k),x=this._getDistance(m,v,k),w=_<x?y:v,C=_<x?_:x;if((this||g).options.snapMiddle){let g=L.PM.Utils.calcMiddleLatLng(m,y,v),M=this._getDistance(m,g,k);M<_&&M<x&&(w=g,C=M)}let B=(this||g).options.snapDistance;C<B&&(M=w)}return{...M}},_unsnap(){delete(this||g)._snapLatLng},_getClosestPointOnSegment(g,_,m,y){let v=g.getMaxZoom();v===1/0&&(v=g.getZoom());let k=g.project(_,v),M=g.project(m,v),x=g.project(y,v),w=L.LineUtil.closestPointOnSegment(k,M,x);return g.unproject(w,v)},_getDistanceToSegment(g,_,m,y){let v=g.latLngToContainerPoint(_),k=g.latLngToContainerPoint(m),M=g.latLngToContainerPoint(y);return L.LineUtil.pointToSegmentDistance(v,k,M)},_getDistance(g,_,m){return g.latLngToContainerPoint(_).distanceTo(g.latLngToContainerPoint(m))}},Wr=Zr;var Qr=L.Class.extend({includes:[Wr,Vr],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(_){L.Util.setOptions(this||g,_),this.setStyle((this||g).options)},setStyle(){},getOptions(){return(this||g).options},initialize(_){let m=new L.Icon.Default;m.options.tooltipAnchor=[0,0],(this||g).options.markerStyle.icon=m,(this||g)._map=_,(this||g).shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],(this||g).shapes.forEach((_=>{(this||g)[_]=new L.PM.Draw[_]((this||g)._map)})),(this||g).Marker.setOptions({continueDrawing:!0}),(this||g).CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(_,m=!1){(this||g).options.pathOptions=m?(0,$r.default)((this||g).options.pathOptions,_):_},getShapes(){return(this||g).shapes},getShape(){return(this||g)._shape},enable(_,m){if(!_)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),(this||g)[_].enable(m)},disable(){(this||g).shapes.forEach((_=>{(this||g)[_].disable()}))},addControls(){(this||g).shapes.forEach((_=>{(this||g)[_].addButton()}))},getActiveShape(){let _;return(this||g).shapes.forEach((m=>{(this||g)[m]._enabled&&(_=m)})),_},_setGlobalDrawMode(){(this||g)._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let _=[];(this||g)._map.eachLayer((g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||_.push(g))})),(this||g)._enabled?_.forEach((g=>{L.PM.Utils.disablePopup(g)})):_.forEach((g=>{L.PM.Utils.enablePopup(g)}))},createNewDrawInstance(_,m){let y=this._getShapeFromBtnName(m);if((this||g)[_])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[y])throw new TypeError(`There is no class L.PM.Draw.${y}`);return(this||g)[_]=new L.PM.Draw[y]((this||g)._map),(this||g)[_].toolbarButtonName=_,(this||g)[_]._shape=_,(this||g).shapes.push(_),(this||g)[m]&&(this||g)[_].setOptions((this||g)[m].options),(this||g)[_].setOptions((this||g)[_].options),(this||g)[_]},_getShapeFromBtnName(_){let m={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return m[_]?m[_]:(this||g)[_]?(this||g)[_]._shape:_},_finishLayer(_){_.pm&&(_.pm.setOptions((this||g).options),_.pm._shape=(this||g)._shape,_.pm._map=(this||g)._map),this._addDrawnLayerProp(_)},_addDrawnLayerProp(g){g._drawnByGeoman=!0},_setPane(_,m){m==="layerPane"?_.options.pane=(this||g)._map.pm.globalOptions.panes&&(this||g)._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?_.options.pane=(this||g)._map.pm.globalOptions.panes&&(this||g)._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(_.options.pane=(this||g)._map.pm.globalOptions.panes&&(this||g)._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return((this||g)._map||(this||g)._layer._map).pm.getGeomanLayers().length===0}}),tn=Qr;tn.Marker=tn.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Marker",(this||g).toolbarButtonName="drawMarker"},enable(_){L.Util.setOptions(this||g,_),(this||g)._enabled=!0,(this||g)._map.getContainer().classList.add("geoman-draw-cursor"),(this||g)._map.on("click",(this||g)._createMarker,this||g),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!0),(this||g)._hintMarker=L.marker((this||g)._map.getCenter(),(this||g).options.markerStyle),this._setPane((this||g)._hintMarker,"markerPane"),(this||g)._hintMarker._pmTempLayer=!0,(this||g)._hintMarker.addTo((this||g)._map),(this||g).options.tooltips&&(this||g)._hintMarker.bindTooltip(V("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),(this||g)._layer=(this||g)._hintMarker,(this||g)._map.on("mousemove",(this||g)._syncHintMarker,this||g),(this||g).options.markerEditable&&(this||g)._map.eachLayer((g=>{this.isRelevantMarker(g)&&g.pm.enable()})),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){(this||g)._enabled&&((this||g)._enabled=!1,(this||g)._map.getContainer().classList.remove("geoman-draw-cursor"),(this||g)._map.off("click",(this||g)._createMarker,this||g),(this||g)._hintMarker.remove(),(this||g)._map.off("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._map.eachLayer((g=>{this.isRelevantMarker(g)&&g.pm.disable()})),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!1),(this||g).options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return(this||g)._enabled},toggle(g){this.enabled()?this.disable():this.enable(g)},isRelevantMarker(g){return g instanceof L.Marker&&g.pm&&!g._pmTempLayer&&!g.pm._initTextMarker},_syncHintMarker(_){if((this||g)._hintMarker.setLatLng(_.latlng),(this||g).options.snappable){let m=_;m.target=(this||g)._hintMarker,this._handleSnapping(m)}this._fireChange((this||g)._hintMarker.getLatLng(),"Draw")},_createMarker(_){if(!_.latlng||(this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer())return;(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._hintMarker.getLatLng(),y=new L.Marker(m,(this||g).options.markerStyle);this._setPane(y,"markerPane"),this._finishLayer(y),y.pm||(y.options.draggable=!1),y.addTo((this||g)._map.pm._getContainingLayer()),y.pm&&(this||g).options.markerEditable?y.pm.enable():y.dragging&&y.dragging.disable(),this._fireCreate(y),this._cleanupSnapping(),(this||g).options.continueDrawing||this.disable()},setStyle(){(this||g).options.markerStyle?.icon&&(this||g)._hintMarker?.setIcon((this||g).options.markerStyle.icon)}});var en=6371008.8,rn={centimeters:en*100,centimetres:en*100,degrees:en/111325,feet:en*3.28084,inches:en*39.37,kilometers:en/1e3,kilometres:en/1e3,meters:en,metres:en,miles:en/1609.344,millimeters:en*1e3,millimetres:en*1e3,nauticalmiles:en/1852,radians:1,yards:en*1.0936};function Ot(g,_,m){m===void 0&&(m={});var y={type:"Feature"};return(m.id===0||m.id)&&(y.id=m.id),m.bbox&&(y.bbox=m.bbox),y.properties=_||{},y.geometry=g,y}function _t(g,_,m){if(m===void 0&&(m={}),!g)throw new Error("coordinates is required");if(!Array.isArray(g))throw new Error("coordinates must be an Array");if(g.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bi(g[0])||!Bi(g[1]))throw new Error("coordinates must contain numbers");var y={type:"Point",coordinates:g};return Ot(y,_,m)}function wt(g,_,m){if(m===void 0&&(m={}),g.length<2)throw new Error("coordinates must be an array of two or more positions");var y={type:"LineString",coordinates:g};return Ot(y,_,m)}function yt(g,_){_===void 0&&(_={});var m={type:"FeatureCollection"};return _.id&&(m.id=_.id),_.bbox&&(m.bbox=_.bbox),m.features=g,m}function $o(g,_){_===void 0&&(_="kilometers");var m=rn[_];if(!m)throw new Error(_+" units is invalid");return g*m}function Zo(g,_){_===void 0&&(_="kilometers");var m=rn[_];if(!m)throw new Error(_+" units is invalid");return g/m}function Me(g){var _=g%(2*Math.PI);return _*180/Math.PI}function lt(g){var _=g%360;return _*Math.PI/180}function Bi(g){return!isNaN(g)&&g!==null&&!Array.isArray(g)}function zt(g){var _,m,y={type:"FeatureCollection",features:[]};if(m=g.type==="Feature"?g.geometry:g,m.type==="LineString")_=[m.coordinates];else if(m.type==="MultiLineString")_=m.coordinates;else if(m.type==="MultiPolygon")_=[].concat.apply([],m.coordinates);else{if(m.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");_=m.coordinates}return _.forEach((function(g){_.forEach((function(_){for(var m=0;m<g.length-1;m++)for(var L=m;L<_.length-1;L++)if(!(g===_&&(Math.abs(m-L)===1||m===0&&L===g.length-2&&g[m][0]===g[g.length-1][0]&&g[m][1]===g[g.length-1][1]))){var v=fm(g[m][0],g[m][1],g[m+1][0],g[m+1][1],_[L][0],_[L][1],_[L+1][0],_[L+1][1]);v&&y.features.push(_t([v[0],v[1]]))}}))})),y}function fm(g,_,m,y,L,v,k,M){var x,w,C,B,I,j={x:null,y:null,onLine1:!1,onLine2:!1};return x=(M-v)*(m-g)-(k-L)*(y-_),x===0?j.x!==null&&j.y!==null&&j:(w=_-v,C=g-L,B=(k-L)*w-(M-v)*C,I=(m-g)*w-(y-_)*C,w=B/x,C=I/x,j.x=g+w*(m-g),j.y=_+w*(y-_),w>=0&&w<=1&&(j.onLine1=!0),C>=0&&C<=1&&(j.onLine2=!0),!(!j.onLine1||!j.onLine2)&&[j.x,j.y])}tn.Line=tn.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Line",(this||g).toolbarButtonName="drawPolyline",(this||g)._doesSelfIntersect=!1},enable(_){L.Util.setOptions(this||g,_),(this||g)._enabled=!0,(this||g)._markers=[],(this||g)._layerGroup=new L.FeatureGroup,(this||g)._layerGroup._pmTempLayer=!0,(this||g)._layerGroup.addTo((this||g)._map),(this||g)._layer=L.polyline([],{...(this||g).options.templineStyle,pmIgnore:!1}),this._setPane((this||g)._layer,"layerPane"),(this||g)._layer._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._layer),(this||g)._hintline=L.polyline([],(this||g).options.hintlineStyle),this._setPane((this||g)._hintline,"layerPane"),(this||g)._hintline._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._hintline),(this||g)._hintMarker=L.marker((this||g)._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane((this||g)._hintMarker,"vertexPane"),(this||g)._hintMarker._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._hintMarker),(this||g).options.cursorMarker&&L.DomUtil.addClass((this||g)._hintMarker._icon,"visible"),(this||g).options.tooltips&&(this||g)._hintMarker.bindTooltip(V("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),(this||g)._map.getContainer().classList.add("geoman-draw-cursor"),(this||g)._map.on("click",(this||g)._createVertex,this||g),(this||g).options.finishOn&&(this||g).options.finishOn!=="snap"&&(this||g)._map.on((this||g).options.finishOn,(this||g)._finishShape,this||g),(this||g).options.finishOn==="dblclick"&&((this||g).tempMapDoubleClickZoomState=(this||g)._map.doubleClickZoom._enabled,(this||g).tempMapDoubleClickZoomState&&(this||g)._map.doubleClickZoom.disable()),(this||g)._map.on("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._hintMarker.on("move",(this||g)._syncHintLine,this||g),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!0),(this||g)._otherSnapLayers=[],(this||g).isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){(this||g)._enabled&&((this||g)._enabled=!1,(this||g)._map.getContainer().classList.remove("geoman-draw-cursor"),(this||g)._map.off("click",(this||g)._createVertex,this||g),(this||g)._map.off("mousemove",(this||g)._syncHintMarker,this||g),(this||g).options.finishOn&&(this||g).options.finishOn!=="snap"&&(this||g)._map.off((this||g).options.finishOn,(this||g)._finishShape,this||g),(this||g).tempMapDoubleClickZoomState&&(this||g)._map.doubleClickZoom.enable(),(this||g)._map.removeLayer((this||g)._layerGroup),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!1),(this||g).options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return(this||g)._enabled},toggle(g){this.enabled()?this.disable():this.enable(g)},_syncHintLine(){let _=(this||g)._layer.getLatLngs();if(_.length>0){let m=_[_.length-1];(this||g)._hintline.setLatLngs([m,(this||g)._hintMarker.getLatLng()])}},_syncHintMarker(_){if((this||g)._hintMarker.setLatLng(_.latlng),(this||g).options.snappable){let m=_;m.target=(this||g)._hintMarker,this._handleSnapping(m)}(this||g).options.allowSelfIntersection||this._handleSelfIntersection(!0,(this||g)._hintMarker.getLatLng());let m=(this||g)._layer._defaultShape().slice();m.push((this||g)._hintMarker.getLatLng()),this._change(m)},hasSelfIntersection(){return zt((this||g)._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(_,m){let y=L.polyline((this||g)._layer.getLatLngs());_&&(m||(m=(this||g)._hintMarker.getLatLng()),y.addLatLng(m));let v=zt(y.toGeoJSON(15));(this||g)._doesSelfIntersect=v.features.length>0,(this||g)._doesSelfIntersect?(this||g).isRed||((this||g).isRed=!0,(this||g)._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(v,(this||g)._map,"Draw")):(this||g)._hintline.isEmpty()||((this||g).isRed=!1,(this||g)._hintline.setStyle((this||g).options.hintlineStyle))},_createVertex(_){if(!(this||g).options.allowSelfIntersection&&(this._handleSelfIntersection(!0,_.latlng),(this||g)._doesSelfIntersect))return;(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._hintMarker.getLatLng(),y=(this||g)._layer.getLatLngs(),L=y[y.length-1];if(m.equals(y[0])||y.length>0&&m.equals(L)){this._finishShape();return}(this||g)._layer._latlngInfo=(this||g)._layer._latlngInfo||[],(this||g)._layer._latlngInfo.push({latlng:m,snapInfo:(this||g)._hintMarker._snapInfo}),(this||g)._layer.addLatLng(m);let v=this._createMarker(m);this._setTooltipText(),this._setHintLineAfterNewVertex(m),this._fireVertexAdded(v,void 0,m,"Draw"),this._change((this||g)._layer.getLatLngs()),(this||g).options.finishOn==="snap"&&(this||g)._hintMarker._snapped&&this._finishShape(_)},_setHintLineAfterNewVertex(_){(this||g)._hintline.setLatLngs([_,_])},_removeLastVertex(){let _=(this||g)._markers;if(_.length<=1){this.disable();return}let m=(this||g)._layer.getLatLngs(),y=_[_.length-1],{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(_,y);_.pop(),(this||g)._layerGroup.removeLayer(y);let k=_[_.length-1],M=m.indexOf(k.getLatLng());m=m.slice(0,M+1),(this||g)._layer.setLatLngs(m),(this||g)._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(y,v,"Draw"),this._change((this||g)._layer.getLatLngs())},_finishShape(){if(!(this||g).options.allowSelfIntersection&&(this._handleSelfIntersection(!1),(this||g)._doesSelfIntersect)||(this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer())return;let _=(this||g)._layer.getLatLngs();if(_.length<=1)return;let m=L.polyline(_,(this||g).options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo((this||g)._map.pm._getContainingLayer()),this._fireCreate(m),(this||g).options.snappable&&this._cleanupSnapping();let y=(this||g)._hintMarker.getLatLng();this.disable(),(this||g).options.continueDrawing&&(this.enable(),(this||g)._hintMarker.setLatLng(y))},_createMarker(_){let m=new L.Marker(_,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,(this||g)._layerGroup.addLayer(m),(this||g)._markers.push(m),m.on("click",(this||g)._finishShape,this||g),m},_setTooltipText(){let{length:_}=(this||g)._layer.getLatLngs().flat(),m="";m=V(_<=1?"tooltips.continueLine":"tooltips.finishLine"),(this||g)._hintMarker.setTooltipContent(m)},_change(g){this._fireChange(g,"Draw")},setStyle(){(this||g)._layer?.setStyle((this||g).options.templineStyle),(this||g)._hintline?.setStyle((this||g).options.hintlineStyle)}});tn.Polygon=tn.Line.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Polygon",(this||g).toolbarButtonName="drawPolygon"},enable(_){L.PM.Draw.Line.prototype.enable.call(this||g,_),(this||g)._layer.pm._shape="Polygon"},_createMarker(_){let m=new L.Marker(_,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,(this||g)._layerGroup.addLayer(m),(this||g)._markers.push(m),(this||g)._layer.getLatLngs().flat().length===1?(m.on("click",(this||g)._finishShape,this||g),(this||g)._tempSnapLayerIndex=(this||g)._otherSnapLayers.push(m)-1,(this||g).options.snappable&&this._cleanupSnapping()):m.on("click",(()=>1)),m},_setTooltipText(){let{length:_}=(this||g)._layer.getLatLngs().flat(),m="";m=V(_<=2?"tooltips.continueLine":"tooltips.finishPoly"),(this||g)._hintMarker.setTooltipContent(m)},_finishShape(){if(!(this||g).options.allowSelfIntersection&&(this._handleSelfIntersection(!0,(this||g)._layer.getLatLngs()[0]),(this||g)._doesSelfIntersect)||(this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer())return;let _=(this||g)._layer.getLatLngs();if(_.length<=2)return;let m=L.polygon(_,(this||g).options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo((this||g)._map.pm._getContainingLayer()),this._fireCreate(m),this._cleanupSnapping(),(this||g)._otherSnapLayers.splice((this||g)._tempSnapLayerIndex,1),delete(this||g)._tempSnapLayerIndex;let y=(this||g)._hintMarker.getLatLng();this.disable(),(this||g).options.continueDrawing&&(this.enable(),(this||g)._hintMarker.setLatLng(y))}});tn.Rectangle=tn.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Rectangle",(this||g).toolbarButtonName="drawRectangle"},enable(_){if(L.Util.setOptions(this||g,_),(this||g)._enabled=!0,(this||g)._layerGroup=new L.FeatureGroup,(this||g)._layerGroup._pmTempLayer=!0,(this||g)._layerGroup.addTo((this||g)._map),(this||g)._layer=L.rectangle([[0,0],[0,0]],(this||g).options.pathOptions),this._setPane((this||g)._layer,"layerPane"),(this||g)._layer._pmTempLayer=!0,(this||g)._startMarker=L.marker((this||g)._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:(this||g).options.cursorMarker?1:0}),this._setPane((this||g)._startMarker,"vertexPane"),(this||g)._startMarker._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._startMarker),(this||g)._hintMarker=L.marker((this||g)._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane((this||g)._hintMarker,"vertexPane"),(this||g)._hintMarker._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._hintMarker),(this||g).options.cursorMarker&&L.DomUtil.addClass((this||g)._hintMarker._icon,"visible"),(this||g).options.tooltips&&(this||g)._hintMarker.bindTooltip(V("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),(this||g).options.cursorMarker){(this||g)._styleMarkers=[];for(let _=0;_<2;_+=1){let _=L.marker((this||g)._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,(this||g)._layerGroup.addLayer(_),(this||g)._styleMarkers.push(_)}}(this||g)._map.getContainer().classList.add("geoman-draw-cursor"),(this||g)._map.on("click",(this||g)._placeStartingMarkers,this||g),(this||g)._map.on("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!0),(this||g)._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){(this||g)._enabled&&((this||g)._enabled=!1,(this||g)._map.getContainer().classList.remove("geoman-draw-cursor"),(this||g)._map.off("click",(this||g)._finishShape,this||g),(this||g)._map.off("click",(this||g)._placeStartingMarkers,this||g),(this||g)._map.off("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._map.removeLayer((this||g)._layerGroup),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!1),(this||g).options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return(this||g)._enabled},toggle(g){this.enabled()?this.disable():this.enable(g)},_placeStartingMarkers(_){(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._hintMarker.getLatLng();L.DomUtil.addClass((this||g)._startMarker._icon,"visible"),(this||g)._startMarker.setLatLng(m),(this||g).options.cursorMarker&&(this||g)._styleMarkers&&(this||g)._styleMarkers.forEach((g=>{L.DomUtil.addClass(g._icon,"visible"),g.setLatLng(m)})),(this||g)._map.off("click",(this||g)._placeStartingMarkers,this||g),(this||g)._map.on("click",(this||g)._finishShape,this||g),(this||g)._hintMarker.setTooltipContent(V("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let _=(this||g)._startMarker.getLatLng();_&&((this||g)._layerGroup.addLayer((this||g)._layer),(this||g)._layer.setLatLngs([_,_]),(this||g)._hintMarker.on("move",(this||g)._syncRectangleSize,this||g))},_syncHintMarker(_){if((this||g)._hintMarker.setLatLng(_.latlng),(this||g).options.snappable){let m=_;m.target=(this||g)._hintMarker,this._handleSnapping(m)}let m=(this||g)._layerGroup&&(this||g)._layerGroup.hasLayer((this||g)._layer)?(this||g)._layer.getLatLngs():[(this||g)._hintMarker.getLatLng()];this._fireChange(m,"Draw")},_syncRectangleSize(){let _=Pi((this||g)._startMarker.getLatLng(),(this||g)._map),m=Pi((this||g)._hintMarker.getLatLng(),(this||g)._map),y=L.PM.Utils._getRotatedRectangle(_,m,(this||g).options.rectangleAngle||0,(this||g)._map);if((this||g)._layer.setLatLngs(y),(this||g).options.cursorMarker&&(this||g)._styleMarkers){let L=[];y.forEach((g=>{!g.equals(_,1e-8)&&!g.equals(m,1e-8)&&L.push(g)})),L.forEach(((_,m)=>{try{(this||g)._styleMarkers[m].setLatLng(_)}catch{}}))}},_findCorners(){let _=(this||g)._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(_[0],_[2],(this||g).options.rectangleAngle||0,(this||g)._map)},_finishShape(_){(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._hintMarker.getLatLng(),y=(this||g)._startMarker.getLatLng();if((this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer()||y.equals(m))return;let v=L.rectangle([y,m],(this||g).options.pathOptions);if((this||g).options.rectangleAngle){let _=L.PM.Utils._getRotatedRectangle(y,m,(this||g).options.rectangleAngle||0,(this||g)._map);v.setLatLngs(_),v.pm&&v.pm._setAngle((this||g).options.rectangleAngle||0)}this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo((this||g)._map.pm._getContainingLayer()),this._fireCreate(v);let k=(this||g)._hintMarker.getLatLng();this.disable(),(this||g).options.continueDrawing&&(this.enable(),(this||g)._hintMarker.setLatLng(k))},setStyle(){(this||g)._layer?.setStyle((this||g).options.pathOptions)}});tn.CircleMarker=tn.extend({initialize(_){(this||g)._map=_,(this||g)._shape="CircleMarker",(this||g).toolbarButtonName="drawCircleMarker",(this||g)._layerIsDragging=!1,(this||g)._BaseCircleClass=L.CircleMarker,(this||g)._minRadiusOption="minRadiusCircleMarker",(this||g)._maxRadiusOption="maxRadiusCircleMarker",(this||g)._editableOption="resizeableCircleMarker",(this||g)._defaultRadius=10},enable(_){if(L.Util.setOptions(this||g,_),(this||g).options.editable&&((this||g).options.resizeableCircleMarker=(this||g).options.editable,delete(this||g).options.editable),(this||g)._enabled=!0,(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!0),(this||g)._map.getContainer().classList.add("geoman-draw-cursor"),(this||g).options[(this||g)._editableOption]){let _={};L.extend(_,(this||g).options.templineStyle),_.radius=0,(this||g)._layerGroup=new L.FeatureGroup,(this||g)._layerGroup._pmTempLayer=!0,(this||g)._layerGroup.addTo((this||g)._map),(this||g)._layer=new(this||g)._BaseCircleClass((this||g)._map.getCenter(),_),this._setPane((this||g)._layer,"layerPane"),(this||g)._layer._pmTempLayer=!0,(this||g)._centerMarker=L.marker((this||g)._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane((this||g)._centerMarker,"vertexPane"),(this||g)._centerMarker._pmTempLayer=!0,(this||g)._hintMarker=L.marker((this||g)._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane((this||g)._hintMarker,"vertexPane"),(this||g)._hintMarker._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._hintMarker),(this||g).options.cursorMarker&&L.DomUtil.addClass((this||g)._hintMarker._icon,"visible"),(this||g).options.tooltips&&(this||g)._hintMarker.bindTooltip(V("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),(this||g)._hintline=L.polyline([],(this||g).options.hintlineStyle),this._setPane((this||g)._hintline,"layerPane"),(this||g)._hintline._pmTempLayer=!0,(this||g)._layerGroup.addLayer((this||g)._hintline),(this||g)._map.on("click",(this||g)._placeCenterMarker,this||g)}else(this||g)._map.on("click",(this||g)._createMarker,this||g),(this||g)._hintMarker=new(this||g)._BaseCircleClass((this||g)._map.getCenter(),{radius:(this||g)._defaultRadius,...(this||g).options.templineStyle}),this._setPane((this||g)._hintMarker,"layerPane"),(this||g)._hintMarker._pmTempLayer=!0,(this||g)._hintMarker.addTo((this||g)._map),(this||g)._layer=(this||g)._hintMarker,(this||g).options.tooltips&&(this||g)._hintMarker.bindTooltip(V("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();(this||g)._map.on("mousemove",(this||g)._syncHintMarker,this||g),this._extendingEnable(),(this||g)._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!(this||g).options[(this||g)._editableOption]&&(this||g).options.markerEditable&&(this||g)._map.eachLayer((g=>{this.isRelevantMarker(g)&&g.pm.enable()})),(this||g)._layer.bringToBack()},disable(){(this||g)._enabled&&((this||g)._enabled=!1,(this||g)._map.getContainer().classList.remove("geoman-draw-cursor"),(this||g).options[(this||g)._editableOption]?((this||g)._map.off("click",(this||g)._finishShape,this||g),(this||g)._map.off("click",(this||g)._placeCenterMarker,this||g),(this||g)._map.removeLayer((this||g)._layerGroup)):((this||g)._map.off("click",(this||g)._createMarker,this||g),this._extendingDisable(),(this||g)._hintMarker.remove()),(this||g)._map.off("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!1),(this||g).options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){(this||g)._map.eachLayer((g=>{this.isRelevantMarker(g)&&g.pm.disable()}))},enabled(){return(this||g)._enabled},toggle(g){this.enabled()?this.disable():this.enable(g)},_placeCenterMarker(_){(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng),(this||g)._layerGroup.addLayer((this||g)._layer),(this||g)._layerGroup.addLayer((this||g)._centerMarker);let m=(this||g)._hintMarker.getLatLng();(this||g)._centerMarker.setLatLng(m),(this||g)._map.off("click",(this||g)._placeCenterMarker,this||g),(this||g)._map.on("click",(this||g)._finishShape,this||g),this._placeCircleCenter()},_placeCircleCenter(){let _=(this||g)._centerMarker.getLatLng();_&&((this||g)._layer.setLatLng(_),(this||g)._hintMarker.on("move",(this||g)._syncHintLine,this||g),(this||g)._hintMarker.on("move",(this||g)._syncCircleRadius,this||g),(this||g)._hintMarker.setTooltipContent(V("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange((this||g)._layer.getLatLng(),"Draw"))},_syncHintLine(){let _=(this||g)._centerMarker.getLatLng(),m=this._getNewDestinationOfHintMarker();(this||g)._hintline.setLatLngs([_,m])},_syncCircleRadius(){let _=(this||g)._centerMarker.getLatLng(),m=(this||g)._hintMarker.getLatLng(),y=this._distanceCalculation(_,m);(this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]?(this||g)._layer.setRadius((this||g).options[(this||g)._minRadiusOption]):(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption]?(this||g)._layer.setRadius((this||g).options[(this||g)._maxRadiusOption]):(this||g)._layer.setRadius(y)},_syncHintMarker(_){if((this||g)._hintMarker.setLatLng(_.latlng),(this||g)._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),(this||g).options.snappable){let m=_;m.target=(this||g)._hintMarker,this._handleSnapping(m)}this._handleHintMarkerSnapping();let m=(this||g)._layerGroup&&(this||g)._layerGroup.hasLayer((this||g)._centerMarker)?(this||g)._centerMarker.getLatLng():(this||g)._hintMarker.getLatLng();this._fireChange(m,"Draw")},isRelevantMarker(g){return g instanceof L.CircleMarker&&!(g instanceof L.Circle)&&g.pm&&!g._pmTempLayer},_createMarker(_){if((this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer()||!_.latlng||(this||g)._layerIsDragging)return;(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._hintMarker.getLatLng(),y=new(this||g)._BaseCircleClass(m,{radius:(this||g)._defaultRadius,...(this||g).options.pathOptions});this._setPane(y,"layerPane"),this._finishLayer(y),y.addTo((this||g)._map.pm._getContainingLayer()),this._extendingCreateMarker(y),this._fireCreate(y),this._cleanupSnapping(),(this||g).options.continueDrawing||this.disable()},_extendingCreateMarker(_){_.pm&&(this||g).options.markerEditable&&_.pm.enable()},_finishShape(_){if((this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer())return;(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._centerMarker.getLatLng(),y=(this||g)._defaultRadius;if((this||g).options[(this||g)._editableOption]){let _=(this||g)._hintMarker.getLatLng();y=this._distanceCalculation(m,_),(this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]?y=(this||g).options[(this||g)._minRadiusOption]:(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption]&&(y=(this||g).options[(this||g)._maxRadiusOption])}let L={...(this||g).options.pathOptions,radius:y},v=new(this||g)._BaseCircleClass(m,L);this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo((this||g)._map.pm._getContainingLayer()),v.pm&&v.pm._updateHiddenPolyCircle(),this._fireCreate(v);let k=(this||g)._hintMarker.getLatLng();this.disable(),(this||g).options.continueDrawing&&(this.enable(),(this||g)._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let _=(this||g)._hintMarker.getLatLng();if((this||g).options[(this||g)._editableOption]){if(!(this||g)._layerGroup.hasLayer((this||g)._centerMarker))return _;let m=(this||g)._centerMarker.getLatLng(),y=this._distanceCalculation(m,_);(this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]?_=te((this||g)._map,m,_,this._getMinDistanceInMeter()):(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption]&&(_=te((this||g)._map,m,_,this._getMaxDistanceInMeter()))}return _},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius((this||g).options[(this||g)._minRadiusOption],(this||g)._map,(this||g)._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius((this||g).options[(this||g)._maxRadiusOption],(this||g)._map,(this||g)._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if((this||g).options[(this||g)._editableOption]){if((this||g)._hintMarker._snapped){let _=(this||g)._centerMarker.getLatLng(),m=(this||g)._hintMarker.getLatLng(),y=this._distanceCalculation(_,m);(this||g)._layerGroup.hasLayer((this||g)._centerMarker)&&((this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]||(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption])&&(this||g)._hintMarker.setLatLng((this||g)._hintMarker._orgLatLng)}(this||g)._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){let _={};L.extend(_,(this||g).options.templineStyle),(this||g).options[(this||g)._editableOption]&&(_.radius=0),(this||g)._layer?.setStyle(_),(this||g)._hintline?.setStyle((this||g).options.hintlineStyle)},_distanceCalculation(_,m){return(this||g)._map.project(_).distanceTo((this||g)._map.project(m))}});tn.Circle=tn.CircleMarker.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Circle",(this||g).toolbarButtonName="drawCircle",(this||g)._BaseCircleClass=L.Circle,(this||g)._minRadiusOption="minRadiusCircle",(this||g)._maxRadiusOption="maxRadiusCircle",(this||g)._editableOption="resizeableCircle",(this||g)._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return(this||g).options[(this||g)._minRadiusOption]},_getMaxDistanceInMeter(){return(this||g).options[(this||g)._maxRadiusOption]},_distanceCalculation(_,m){return(this||g)._map.distance(_,m)}});function rt(g){if(!g)throw new Error("coord is required");if(!Array.isArray(g)){if(g.type==="Feature"&&g.geometry!==null&&g.geometry.type==="Point")return g.geometry.coordinates;if(g.type==="Point")return g.coordinates}if(Array.isArray(g)&&g.length>=2&&!Array.isArray(g[0])&&!Array.isArray(g[1]))return g;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ot(g){if(Array.isArray(g))return g;if(g.type==="Feature"){if(g.geometry!==null)return g.geometry.coordinates}else if(g.coordinates)return g.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ee(g){return g.type==="Feature"?g.geometry:g}function Ti(g,_){return g.type==="FeatureCollection"?"FeatureCollection":g.type==="GeometryCollection"?"GeometryCollection":g.type==="Feature"&&g.geometry!==null?g.geometry.type:g.type}function xe(g,_,m){if(g!==null)for(var y,L,v,k,M,x,w,C,B=0,I=0,j=g.type,z=j==="FeatureCollection",N=j==="Feature",F=z?g.features.length:1,U=0;U<F;U++){w=z?g.features[U].geometry:N?g.geometry:g,C=!!w&&w.type==="GeometryCollection",M=C?w.geometries.length:1;for(var K=0;K<M;K++){var H=0,Y=0;if(k=C?w.geometries[K]:w,k!==null){x=k.coordinates;var X=k.type;switch(B=!m||X!=="Polygon"&&X!=="MultiPolygon"?0:1,X){case null:break;case"Point":if(_(x,I,U,H,Y)===!1)return!1;I++,H++;break;case"LineString":case"MultiPoint":for(y=0;y<x.length;y++){if(_(x[y],I,U,H,Y)===!1)return!1;I++,X==="MultiPoint"&&H++}X==="LineString"&&H++;break;case"Polygon":case"MultiLineString":for(y=0;y<x.length;y++){for(L=0;L<x[y].length-B;L++){if(_(x[y][L],I,U,H,Y)===!1)return!1;I++}X==="MultiLineString"&&H++,X==="Polygon"&&Y++}X==="Polygon"&&H++;break;case"MultiPolygon":for(y=0;y<x.length;y++){for(Y=0,L=0;L<x[y].length;L++){for(v=0;v<x[y][L].length-B;v++){if(_(x[y][L][v],I,U,H,Y)===!1)return!1;I++}Y++}H++}break;case"GeometryCollection":for(y=0;y<k.geometries.length;y++)if(xe(k.geometries[y],_,m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ft(g,_){if(g.type==="Feature")_(g,0);else if(g.type==="FeatureCollection")for(var m=0;m<g.features.length&&_(g.features[m],m)!==!1;m++);}function Wo(g,_,m){var y=m;return Ft(g,(function(g,L){y=L===0&&m===void 0?g:_(y,g,L)})),y}function dm(g,_){var m,y,L,v,k,M,x,w,C,B,I=0,j=g.type==="FeatureCollection",z=g.type==="Feature",N=j?g.features.length:1;for(m=0;m<N;m++){for(M=j?g.features[m].geometry:z?g.geometry:g,w=j?g.features[m].properties:z?g.properties:{},C=j?g.features[m].bbox:z?g.bbox:void 0,B=j?g.features[m].id:z?g.id:void 0,x=!!M&&M.type==="GeometryCollection",k=x?M.geometries.length:1,L=0;L<k;L++)if(v=x?M.geometries[L]:M,v!==null)switch(v.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(_(v,I,w,C,B)===!1)return!1;break;case"GeometryCollection":for(y=0;y<v.geometries.length;y++)if(_(v.geometries[y],I,w,C,B)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(_(null,I,w,C,B)===!1)return!1;I++}}function ie(g,_){dm(g,(function(g,m,y,L,v){var k=g===null?null:g.type;switch(k){case null:case"Point":case"LineString":case"Polygon":return _(Ot(g,y,{bbox:L,id:v}),m,0)!==!1&&void 0}var M;switch(k){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var x=0;x<g.coordinates.length;x++){var w=g.coordinates[x],C={type:M,coordinates:w};if(_(Ot(C,y),m,x)===!1)return!1}}))}function gm(g){if(!g)throw new Error("geojson is required");var _=[];return ie(g,(function(g){mm(g,_)})),yt(_)}function mm(g,_){var m=[],y=g.geometry;if(y!==null){switch(y.type){case"Polygon":m=ot(y);break;case"LineString":m=[ot(y)]}m.forEach((function(m){var y=_m(m,g.properties);y.forEach((function(g){g.id=_.length,_.push(g)}))}))}}function _m(g,_){var m=[];return g.reduce((function(g,y){var L=wt([g,y],_);return L.bbox=ym(g,y),m.push(L),y})),m}function ym(g,_){var m=g[0],y=g[1],L=_[0],v=_[1],k=m<L?m:L,M=y<v?y:v,x=m>L?m:L,w=y>v?y:v;return[k,M,x,w]}var nn=gm;var an=xt(Yi(),1);function jm(g,_){var m={},y=[];if(g.type==="LineString"&&(g=Ot(g)),_.type==="LineString"&&(_=Ot(_)),g.type==="Feature"&&_.type==="Feature"&&g.geometry!==null&&_.geometry!==null&&g.geometry.type==="LineString"&&_.geometry.type==="LineString"&&g.geometry.coordinates.length===2&&_.geometry.coordinates.length===2){var L=dl(g,_);return L&&y.push(L),yt(y)}var v=(0,an.default)();return v.load(nn(_)),Ft(nn(g),(function(g){Ft(v.search(g),(function(_){var L=dl(g,_);if(L){var v=ot(L).join(",");m[v]||(m[v]=!0,y.push(L))}}))})),yt(y)}function dl(g,_){var m=ot(g),y=ot(_);if(m.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(y.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var L=m[0][0],v=m[0][1],k=m[1][0],M=m[1][1],x=y[0][0],w=y[0][1],C=y[1][0],B=y[1][1],I=(B-w)*(k-L)-(C-x)*(M-v),j=(C-x)*(v-w)-(B-w)*(L-x),z=(k-L)*(v-w)-(M-v)*(L-x);if(I===0)return null;var N=j/I,F=z/I;if(N>=0&&N<=1&&F>=0&&F<=1){var U=L+N*(k-L),K=v+N*(M-v);return _t([U,K])}return null}var sn=jm;var on=xt(Yi(),1);function Hm(g,_,m){m===void 0&&(m={});var y=rt(g),L=rt(_),v=lt(L[1]-y[1]),k=lt(L[0]-y[0]),M=lt(y[1]),x=lt(L[1]),w=Math.pow(Math.sin(v/2),2)+Math.pow(Math.sin(k/2),2)*Math.cos(M)*Math.cos(x);return $o(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)),m.units)}var ln=Hm;function Xm(g){var _=g[0],m=g[1],y=g[2],L=g[3],v=ln(g.slice(0,2),[y,m]),k=ln(g.slice(0,2),[_,L]);if(v>=k){var M=(m+L)/2;return[_,M-(y-_)/2,y,M+(y-_)/2]}var x=(_+y)/2;return[x-(L-m)/2,m,x+(L-m)/2,L]}var hn=Xm;function ji(g){var _=[1/0,1/0,-1/0,-1/0];return xe(g,(function(g){_[0]>g[0]&&(_[0]=g[0]),_[1]>g[1]&&(_[1]=g[1]),_[2]<g[0]&&(_[2]=g[0]),_[3]<g[1]&&(_[3]=g[1])})),_}ji.default=ji;var pn=ji;function Ym(g,_){_===void 0&&(_={});var m=_.precision,y=_.coordinates,L=_.mutate;if(m=m==null||isNaN(m)?6:m,y=y==null||isNaN(y)?3:y,!g)throw new Error("<geojson> is required");if(typeof m!="number")throw new Error("<precision> must be a number");if(typeof y!="number")throw new Error("<coordinates> must be a number");(L===!1||L===void 0)&&(g=JSON.parse(JSON.stringify(g)));var v=Math.pow(10,m);return xe(g,(function(g){Jm(g,v,y)})),g}function Jm(g,_,m){g.length>m&&g.splice(m,g.length);for(var y=0;y<g.length;y++)g[y]=Math.round(g[y]*_)/_;return g}var un=Ym;function je(g,_,m){if(m===void 0&&(m={}),m.final===!0)return $m(g,_);var y=rt(g),L=rt(_),v=lt(y[0]),k=lt(L[0]),M=lt(y[1]),x=lt(L[1]),w=Math.sin(k-v)*Math.cos(x),C=Math.cos(M)*Math.sin(x)-Math.sin(M)*Math.cos(x)*Math.cos(k-v);return Me(Math.atan2(w,C))}function $m(g,_){var m=je(_,g);return m=(m+180)%360,m}function He(g,_,m,y){y===void 0&&(y={});var L=rt(g),v=lt(L[0]),k=lt(L[1]),M=lt(m),x=Zo(_,y.units),w=Math.asin(Math.sin(k)*Math.cos(x)+Math.cos(k)*Math.sin(x)*Math.cos(M)),C=v+Math.atan2(Math.sin(M)*Math.sin(x)*Math.cos(k),Math.cos(x)-Math.sin(k)*Math.sin(w)),B=Me(C),I=Me(w);return _t([B,I],y.properties)}function Zm(g,_,m){m===void 0&&(m={});var y=_t([1/0,1/0],{dist:1/0}),L=0;return ie(g,(function(g){for(var v=ot(g),k=0;k<v.length-1;k++){var M=_t(v[k]);M.properties.dist=ln(_,M,m);var x=_t(v[k+1]);x.properties.dist=ln(_,x,m);var w=ln(M,x,m),C=Math.max(M.properties.dist,x.properties.dist),B=je(M,x),I=He(_,C,B+90,m),j=He(_,C,B-90,m),z=sn(wt([I.geometry.coordinates,j.geometry.coordinates]),wt([M.geometry.coordinates,x.geometry.coordinates])),N=null;z.features.length>0&&(N=z.features[0],N.properties.dist=ln(_,N,m),N.properties.location=L+ln(M,N,m)),M.properties.dist<y.properties.dist&&(y=M,y.properties.index=k,y.properties.location=L),x.properties.dist<y.properties.dist&&(y=x,y.properties.index=k+1,y.properties.location=L+w),N&&N.properties.dist<y.properties.dist&&(y=N,y.properties.index=k),L+=w}})),y}var cn=Zm;function Wm(g,_){if(!g)throw new Error("line is required");if(!_)throw new Error("splitter is required");var m=Ti(g),y=Ti(_);if(m!=="LineString")throw new Error("line must be LineString");if(y==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(y==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var L=un(_,{precision:7});switch(y){case"Point":return Xi(g,L);case"MultiPoint":return Ll(g,L);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ll(g,sn(g,L))}}function Ll(g,_){var m=[],y=(0,on.default)();return ie(_,(function(_){if(m.forEach((function(g,_){g.id=_})),m.length){var L=y.search(_);if(L.features.length){var v=bl(_,L);m=m.filter((function(g){return g.id!==v.id})),y.remove(v),Ft(Xi(v,_),(function(g){m.push(g),y.insert(g)}))}}else m=Xi(g,_).features,m.forEach((function(g){g.bbox||(g.bbox=hn(pn(g)))})),y.load(yt(m))})),yt(m)}function Xi(g,_){var m=[],y=ot(g)[0],L=ot(g)[g.geometry.coordinates.length-1];if(Hi(y,rt(_))||Hi(L,rt(_)))return yt([g]);var v=(0,on.default)(),k=nn(g);v.load(k);var M=v.search(_);if(!M.features.length)return yt([g]);var x=bl(_,M),w=[y],C=Wo(k,(function(g,y,L){var v=ot(y)[1],k=rt(_);return L===x.id?(g.push(k),m.push(wt(g)),Hi(k,v)?[k]:[k,v]):(g.push(v),g)}),w);return C.length>1&&m.push(wt(C)),yt(m)}function bl(g,_){if(!_.features.length)throw new Error("lines must contain features");if(_.features.length===1)return _.features[0];var m,y=1/0;return Ft(_,(function(_){var L=cn(_,g),v=L.properties.dist;v<y&&(m=_,y=v)})),m}function Hi(g,_){return g[0]===_[0]&&g[1]===_[1]}var dn=Wm;function ne(g,_,m){if(m===void 0&&(m={}),!g)throw new Error("point is required");if(!_)throw new Error("polygon is required");var y=rt(g),L=ee(_),v=L.type,k=_.bbox,M=L.coordinates;if(k&&Qm(y,k)===!1)return!1;v==="Polygon"&&(M=[M]);for(var x=!1,w=0;w<M.length&&!x;w++)if(kl(y,M[w][0],m.ignoreBoundary)){for(var C=!1,B=1;B<M[w].length&&!C;)kl(y,M[w][B],!m.ignoreBoundary)&&(C=!0),B++;C||(x=!0)}return x}function kl(g,_,m){var y=!1;_[0][0]===_[_.length-1][0]&&_[0][1]===_[_.length-1][1]&&(_=_.slice(0,_.length-1));for(var L=0,v=_.length-1;L<_.length;v=L++){var k=_[L][0],M=_[L][1],x=_[v][0],w=_[v][1],C=g[1]*(k-x)+M*(x-g[0])+w*(g[0]-k)===0&&(k-g[0])*(x-g[0])<=0&&(M-g[1])*(w-g[1])<=0;if(C)return!m;var B=M>g[1]!=w>g[1]&&g[0]<(x-k)*(g[1]-M)/(w-M)+k;B&&(y=!y)}return y}function Qm(g,_){return _[0]<=g[0]&&_[1]<=g[1]&&_[2]>=g[0]&&_[3]>=g[1]}function t_(g,_,m){m===void 0&&(m={});for(var y=rt(g),L=ot(_),v=0;v<L.length-1;v++){var k=!1;if(m.ignoreEndVertices&&(v===0&&(k="start"),v===L.length-2&&(k="end"),v===0&&v+1===L.length-1&&(k="both")),e_(L[v],L[v+1],y,k,typeof m.epsilon>"u"?null:m.epsilon))return!0}return!1}function e_(g,_,m,y,L){var v=m[0],k=m[1],M=g[0],x=g[1],w=_[0],C=_[1],B=m[0]-M,I=m[1]-x,j=w-M,z=C-x,N=B*z-I*j;if(L!==null){if(Math.abs(N)>L)return!1}else if(N!==0)return!1;return y?y==="start"?Math.abs(j)>=Math.abs(z)?j>0?M<v&&v<=w:w<=v&&v<M:z>0?x<k&&k<=C:C<=k&&k<x:y==="end"?Math.abs(j)>=Math.abs(z)?j>0?M<=v&&v<w:w<v&&v<=M:z>0?x<=k&&k<C:C<k&&k<=x:y==="both"&&(Math.abs(j)>=Math.abs(z)?j>0?M<v&&v<w:w<v&&v<M:z>0?x<k&&k<C:C<k&&k<x):Math.abs(j)>=Math.abs(z)?j>0?M<=v&&v<=w:w<=v&&v<=M:z>0?x<=k&&k<=C:C<=k&&k<=x}var gn=t_;function Ji(g,_){var m=ee(g),y=ee(_),L=m.type,v=y.type,k=m.coordinates,M=y.coordinates;switch(L){case"Point":switch(v){case"Point":return $i(k,M);default:throw new Error("feature2 "+v+" geometry not supported")}case"MultiPoint":switch(v){case"Point":return i_(m,y);case"MultiPoint":return r_(m,y);default:throw new Error("feature2 "+v+" geometry not supported")}case"LineString":switch(v){case"Point":return gn(y,m,{ignoreEndVertices:!0});case"LineString":return a_(m,y);case"MultiPoint":return n_(m,y);default:throw new Error("feature2 "+v+" geometry not supported")}case"Polygon":switch(v){case"Point":return ne(y,m,{ignoreBoundary:!0});case"LineString":return o_(m,y);case"Polygon":return l_(m,y);case"MultiPoint":return s_(m,y);default:throw new Error("feature2 "+v+" geometry not supported")}default:throw new Error("feature1 "+L+" geometry not supported")}}function i_(g,_){var m,y=!1;for(m=0;m<g.coordinates.length;m++)if($i(g.coordinates[m],_.coordinates)){y=!0;break}return y}function r_(g,_){for(var m=0,y=_.coordinates;m<y.length;m++){for(var L=y[m],v=!1,k=0,M=g.coordinates;k<M.length;k++){var x=M[k];if($i(L,x)){v=!0;break}}if(!v)return!1}return!0}function n_(g,_){for(var m=!1,y=0,L=_.coordinates;y<L.length;y++){var v=L[y];if(gn(v,g,{ignoreEndVertices:!0})&&(m=!0),!gn(v,g))return!1}return!!m}function s_(g,_){for(var m=0,y=_.coordinates;m<y.length;m++){var L=y[m];if(!ne(L,g,{ignoreBoundary:!0}))return!1}return!0}function a_(g,_){for(var m=!1,y=0,L=_.coordinates;y<L.length;y++){var v=L[y];if(gn({type:"Point",coordinates:v},g,{ignoreEndVertices:!0})&&(m=!0),!gn({type:"Point",coordinates:v},g,{ignoreEndVertices:!1}))return!1}return m}function o_(g,_){var m=!1,y=0,L=pn(g),v=pn(_);if(!Ml(L,v))return!1;for(y;y<_.coordinates.length-1;y++){var k=h_(_.coordinates[y],_.coordinates[y+1]);if(ne({type:"Point",coordinates:k},g,{ignoreBoundary:!0})){m=!0;break}}return m}function l_(g,_){if(g.type==="Feature"&&g.geometry===null||_.type==="Feature"&&_.geometry===null)return!1;var m=pn(g),y=pn(_);if(!Ml(m,y))return!1;for(var L=ee(_).coordinates,v=0,k=L;v<k.length;v++)for(var M=k[v],x=0,w=M;x<w.length;x++){var C=w[x];if(!ne(C,g))return!1}return!0}function Ml(g,_){return!(g[0]>_[0]||g[2]<_[2]||g[1]>_[1]||g[3]<_[3])}function $i(g,_){return g[0]===_[0]&&g[1]===_[1]}function h_(g,_){return[(g[0]+_[0])/2,(g[1]+_[1])/2]}var fn=xt(zi());var Xe=g=>()=>g;var Ee=g=>{let _=g?(_,m)=>m.minus(_).abs().isLessThanOrEqualTo(g):Xe(!1);return(g,m)=>_(g,m)?0:g.comparedTo(m)};function xl(g){let _=g?(_,m,y,L,v)=>_.exponentiatedBy(2).isLessThanOrEqualTo(L.minus(m).exponentiatedBy(2).plus(v.minus(y).exponentiatedBy(2)).times(g)):Xe(!1);return(g,m,y)=>{let L=g.x,v=g.y,k=y.x,M=y.y,x=v.minus(M).times(m.x.minus(k)).minus(L.minus(k).times(m.y.minus(M)));return _(x,L,v,k,M)?0:x.comparedTo(0)}}var _n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mn=Math.ceil,yn=Math.floor,Ln="[BigNumber Error] ",bn=Ln+"Number primitive has more than 15 significant digits: ",vn=1e14,kn=14,Mn=9007199254740991,xn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],wn=1e7,Cn=1e9;function Cl(_){var m,y,L,v=b.prototype={constructor:b,toString:null,valueOf:null},k=new b(1),M=20,x=4,w=-7,C=21,B=-1e7,I=1e7,j=!1,z=1,N=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function b(_,m){var v,k,w,C,j,z,N,F,H=this||g;if(!(H instanceof b))return new b(_,m);if(m==null){if(_&&_._isBigNumber===!0){H.s=_.s,!_.c||_.e>I?H.c=H.e=null:_.e<B?H.c=[H.e=0]:(H.e=_.e,H.c=_.c.slice());return}if((z=typeof _=="number")&&_*0==0){if(H.s=1/_<0?(_=-_,-1):1,_===~~_){for(C=0,j=_;j>=10;j/=10,C++);C>I?H.c=H.e=null:(H.e=C,H.c=[_]);return}F=String(_)}else{if(!_n.test(F=String(_)))return L(H,F,z);H.s=F.charCodeAt(0)==45?(F=F.slice(1),-1):1}(C=F.indexOf("."))>-1&&(F=F.replace(".","")),(j=F.search(/e/i))>0?(C<0&&(C=j),C+=+F.slice(j+1),F=F.substring(0,j)):C<0&&(C=F.length)}else{if(J(m,2,U.length,"Base"),m==10&&K)return H=new b(_),A(H,M+H.e+1,x);if(F=String(_),z=typeof _=="number"){if(_*0!=0)return L(H,F,z,m);if(H.s=1/_<0?(F=F.slice(1),-1):1,b.DEBUG&&F.replace(/^0\.0*|\./,"").length>15)throw Error(bn+_)}else H.s=F.charCodeAt(0)===45?(F=F.slice(1),-1):1;for(v=U.slice(0,m),C=j=0,N=F.length;j<N;j++)if(v.indexOf(k=F.charAt(j))<0){if(k=="."){if(j>C){C=N;continue}}else if(!w&&(F==F.toUpperCase()&&(F=F.toLowerCase())||F==F.toLowerCase()&&(F=F.toUpperCase()))){w=!0,j=-1,C=0;continue}return L(H,String(_),z,m)}z=!1,F=y(F,m,10,H.s),(C=F.indexOf("."))>-1?F=F.replace(".",""):C=F.length}for(j=0;F.charCodeAt(j)===48;j++);for(N=F.length;F.charCodeAt(--N)===48;);if(F=F.slice(j,++N)){if(N-=j,z&&b.DEBUG&&N>15&&(_>Mn||_!==yn(_)))throw Error(bn+H.s*_);if((C=C-j-1)>I)H.c=H.e=null;else if(C<B)H.c=[H.e=0];else{if(H.e=C,H.c=[],j=(C+1)%kn,C<0&&(j+=kn),j<N){for(j&&H.c.push(+F.slice(0,j)),N-=kn;j<N;)H.c.push(+F.slice(j,j+=kn));j=kn-(F=F.slice(j)).length}else j-=N;for(;j--;F+="0");H.c.push(+F)}}else H.c=[H.e=0]}b.clone=Cl,b.ROUND_UP=0,b.ROUND_DOWN=1,b.ROUND_CEIL=2,b.ROUND_FLOOR=3,b.ROUND_HALF_UP=4,b.ROUND_HALF_DOWN=5,b.ROUND_HALF_EVEN=6,b.ROUND_HALF_CEIL=7,b.ROUND_HALF_FLOOR=8,b.EUCLID=9,b.config=b.set=function(g){var _,m;if(g!=null){if(typeof g!="object")throw Error(Ln+"Object expected: "+g);if(g.hasOwnProperty(_="DECIMAL_PLACES")&&(m=g[_],J(m,0,Cn,_),M=m),g.hasOwnProperty(_="ROUNDING_MODE")&&(m=g[_],J(m,0,8,_),x=m),g.hasOwnProperty(_="EXPONENTIAL_AT")&&(m=g[_],m&&m.pop?(J(m[0],-Cn,0,_),J(m[1],0,Cn,_),w=m[0],C=m[1]):(J(m,-Cn,Cn,_),w=-(C=m<0?-m:m))),g.hasOwnProperty(_="RANGE"))if(m=g[_],m&&m.pop)J(m[0],-Cn,-1,_),J(m[1],1,Cn,_),B=m[0],I=m[1];else{if(J(m,-Cn,Cn,_),!m)throw Error(Ln+_+" cannot be zero: "+m);B=-(I=m<0?-m:m)}if(g.hasOwnProperty(_="CRYPTO")){if(m=g[_],m!==!!m)throw Error(Ln+_+" not true or false: "+m);if(m){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw j=!m,Error(Ln+"crypto unavailable");j=m}else j=m}if(g.hasOwnProperty(_="MODULO_MODE")&&(m=g[_],J(m,0,9,_),z=m),g.hasOwnProperty(_="POW_PRECISION")&&(m=g[_],J(m,0,Cn,_),N=m),g.hasOwnProperty(_="FORMAT")){if(m=g[_],typeof m!="object")throw Error(Ln+_+" not an object: "+m);F=m}if(g.hasOwnProperty(_="ALPHABET")){if(m=g[_],typeof m!="string"||/^.?$|[+\-.\s]|(.).*\1/.test(m))throw Error(Ln+_+" invalid: "+m);K=m.slice(0,10)=="0123456789",U=m}}return{DECIMAL_PLACES:M,ROUNDING_MODE:x,EXPONENTIAL_AT:[w,C],RANGE:[B,I],CRYPTO:j,MODULO_MODE:z,POW_PRECISION:N,FORMAT:F,ALPHABET:U}},b.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!b.DEBUG)return!0;var _,m,y=g.c,L=g.e,v=g.s;t:if({}.toString.call(y)=="[object Array]"){if((v===1||v===-1)&&L>=-Cn&&L<=Cn&&L===yn(L)){if(y[0]===0){if(L===0&&y.length===1)return!0;break t}if(_=(L+1)%kn,_<1&&(_+=kn),String(y[0]).length==_){for(_=0;_<y.length;_++)if(m=y[_],m<0||m>=vn||m!==yn(m))break t;if(m!==0)return!0}}}else if(y===null&&L===null&&(v===null||v===1||v===-1))return!0;throw Error(Ln+"Invalid BigNumber: "+g)},b.maximum=b.max=function(){return D(arguments,-1)},b.minimum=b.min=function(){return D(arguments,1)},b.random=function(){var g=9007199254740992,_=Math.random()*g&2097151?function(){return yn(Math.random()*g)}:function(){return 8388608*(Math.random()*1073741824|0)+(Math.random()*8388608|0)};return function(g){var m,y,L,v,x,w=0,C=[],B=new b(k);if(g==null?g=M:J(g,0,Cn),v=mn(g/kn),j)if(crypto.getRandomValues){for(m=crypto.getRandomValues(new Uint32Array(v*=2));w<v;)x=m[w]*131072+(m[w+1]>>>11),x>=9e15?(y=crypto.getRandomValues(new Uint32Array(2)),m[w]=y[0],m[w+1]=y[1]):(C.push(x%1e14),w+=2);w=v/2}else{if(!crypto.randomBytes)throw j=!1,Error(Ln+"crypto unavailable");for(m=crypto.randomBytes(v*=7);w<v;)x=281474976710656*(m[w]&31)+m[w+1]*1099511627776+m[w+2]*4294967296+m[w+3]*16777216+(m[w+4]<<16)+(m[w+5]<<8)+m[w+6],x>=9e15?crypto.randomBytes(7).copy(m,w):(C.push(x%1e14),w+=7);w=v/7}if(!j)for(;w<v;)x=_(),x<9e15&&(C[w++]=x%1e14);for(v=C[--w],g%=kn,v&&g&&(x=xn[kn-g],C[w]=yn(v/x)*x);C[w]===0;C.pop(),w--);if(w<0)C=[L=0];else{for(L=-1;C[0]===0;C.splice(0,1),L-=kn);for(w=1,x=C[0];x>=10;x/=10,w++);w<kn&&(L-=kn-w)}return B.e=L,B.c=C,B}}(),b.sum=function(){for(var g=1,_=arguments,m=new b(_[0]);g<_.length;)m=m.plus(_[g++]);return m},y=function(){var g="0123456789";function c(g,_,m,y){for(var L,v,k=[0],M=0,x=g.length;M<x;){for(v=k.length;v--;k[v]*=_);for(k[0]+=y.indexOf(g.charAt(M++)),L=0;L<k.length;L++)k[L]>m-1&&(k[L+1]==null&&(k[L+1]=0),k[L+1]+=k[L]/m|0,k[L]%=m)}return k.reverse()}return function(_,y,L,v,k){var w,C,B,I,j,z,F,K,H=_.indexOf("."),Y=M,X=x;for(H>=0&&(I=N,N=0,_=_.replace(".",""),K=new b(y),z=K.pow(_.length-H),N=I,K.c=c(Et(ft(z.c),z.e,"0"),10,L,g),K.e=K.c.length),F=c(_,y,L,k?(w=U,g):(w=g,U)),B=I=F.length;F[--I]==0;F.pop());if(!F[0])return w.charAt(0);if(H<0?--B:(z.c=F,z.e=B,z.s=v,z=m(z,K,Y,X,L),F=z.c,j=z.r,B=z.e),C=B+Y+1,H=F[C],I=L/2,j=j||C<0||F[C+1]!=null,j=X<4?(H!=null||j)&&(X==0||X==(z.s<0?3:2)):H>I||H==I&&(X==4||j||X==6&&F[C-1]&1||X==(z.s<0?8:7)),C<1||!F[0])_=j?Et(w.charAt(1),-Y,w.charAt(0)):w.charAt(0);else{if(F.length=C,j)for(--L;++F[--C]>L;)F[C]=0,C||(++B,F=[1].concat(F));for(I=F.length;!F[--I];);for(H=0,_="";H<=I;_+=w.charAt(F[H++]));_=Et(_,B,w.charAt(0))}return _}}(),m=function(){function h(g,_,m){var y,L,v,k,M=0,x=g.length,w=_%wn,C=_/wn|0;for(g=g.slice();x--;)v=g[x]%wn,k=g[x]/wn|0,y=C*v+k*w,L=w*v+y%wn*wn+M,M=(L/m|0)+(y/wn|0)+C*k,g[x]=L%m;return M&&(g=[M].concat(g)),g}function c(g,_,m,y){var L,v;if(m!=y)v=m>y?1:-1;else for(L=v=0;L<m;L++)if(g[L]!=_[L]){v=g[L]>_[L]?1:-1;break}return v}function p(g,_,m,y){for(var L=0;m--;)g[m]-=L,L=g[m]<_[m]?1:0,g[m]=L*y+g[m]-_[m];for(;!g[0]&&g.length>1;g.splice(0,1));}return function(g,_,m,y,L){var v,k,M,x,w,C,B,I,j,z,N,F,U,K,H,Y,X,$=g.s==_.s?1:-1,Z=g.c,W=_.c;if(!Z||!Z[0]||!W||!W[0])return new b(g.s&&_.s&&(Z?!W||Z[0]!=W[0]:W)?Z&&Z[0]==0||!W?$*0:$/0:NaN);for(I=new b($),j=I.c=[],k=g.e-_.e,$=m+k+1,L||(L=vn,k=gt(g.e/kn)-gt(_.e/kn),$=$/kn|0),M=0;W[M]==(Z[M]||0);M++);if(W[M]>(Z[M]||0)&&k--,$<0)j.push(1),x=!0;else{for(K=Z.length,Y=W.length,M=0,$+=2,w=yn(L/(W[0]+1)),w>1&&(W=h(W,w,L),Z=h(Z,w,L),Y=W.length,K=Z.length),U=Y,z=Z.slice(0,Y),N=z.length;N<Y;z[N++]=0);X=W.slice(),X=[0].concat(X),H=W[0],W[1]>=L/2&&H++;do{if(w=0,v=c(W,z,Y,N),v<0){if(F=z[0],Y!=N&&(F=F*L+(z[1]||0)),w=yn(F/H),w>1)for(w>=L&&(w=L-1),C=h(W,w,L),B=C.length,N=z.length;c(C,z,B,N)==1;)w--,p(C,Y<B?X:W,B,L),B=C.length,v=1;else w==0&&(v=w=1),C=W.slice(),B=C.length;if(B<N&&(C=[0].concat(C)),p(z,C,N,L),N=z.length,v==-1)for(;c(W,z,Y,N)<1;)w++,p(z,Y<N?X:W,N,L),N=z.length}else v===0&&(w++,z=[0]);j[M++]=w,z[0]?z[N++]=Z[U]||0:(z=[Z[U]],N=1)}while((U++<K||z[0]!=null)&&$--);x=z[0]!=null,j[0]||j.splice(0,1)}if(L==vn){for(M=1,$=j[0];$>=10;$/=10,M++);A(I,m+(I.e=M+k*kn-1)+1,y,x)}else I.e=k,I.r=+x;return I}}();function R(g,_,m,y){var L,v,k,M,B;if(m==null?m=x:J(m,0,8),!g.c)return g.toString();if(L=g.c[0],k=g.e,_==null)B=ft(g.c),B=y==1||y==2&&(k<=w||k>=C)?Je(B,k):Et(B,k,"0");else if(g=A(new b(g),_,m),v=g.e,B=ft(g.c),M=B.length,y==1||y==2&&(_<=v||v<=w)){for(;M<_;B+="0",M++);B=Je(B,v)}else if(_-=k,B=Et(B,v,"0"),v+1>M){if(--_>0)for(B+=".";_--;B+="0");}else if(_+=v-M,_>0)for(v+1==M&&(B+=".");_--;B+="0");return g.s<0&&L?"-"+B:B}function D(g,_){for(var m,y,L=1,v=new b(g[0]);L<g.length;L++)y=new b(g[L]),(!y.s||(m=Ut(v,y))===_||m===0&&v.s===_)&&(v=y);return v}function O(g,_,m){for(var y=1,L=_.length;!_[--L];_.pop());for(L=_[0];L>=10;L/=10,y++);return(m=y+m*kn-1)>I?g.c=g.e=null:m<B?g.c=[g.e=0]:(g.e=m,g.c=_),g}L=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,m=/^\.([^.]+)$/,y=/^-?(Infinity|NaN)$/,L=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(v,k,M,x){var w,C=M?k:k.replace(L,"");if(y.test(C))v.s=isNaN(C)?null:C<0?-1:1;else{if(!M&&(C=C.replace(g,(function(g,_,m){return w=(m=m.toLowerCase())=="x"?16:m=="b"?2:8,x&&x!=w?g:_})),x&&(w=x,C=C.replace(_,"$1").replace(m,"0.$1")),k!=C))return new b(C,w);if(b.DEBUG)throw Error(Ln+"Not a"+(x?" base "+x:"")+" number: "+k);v.s=null}v.c=v.e=null}}();function A(g,_,m,y){var L,v,k,M,x,w,C,j=g.c,z=xn;if(j){t:{for(L=1,M=j[0];M>=10;M/=10,L++);if(v=_-L,v<0)v+=kn,k=_,x=j[w=0],C=yn(x/z[L-k-1]%10);else if(w=mn((v+1)/kn),w>=j.length){if(!y)break t;for(;j.length<=w;j.push(0));x=C=0,L=1,v%=kn,k=v-kn+1}else{for(x=M=j[w],L=1;M>=10;M/=10,L++);v%=kn,k=v-kn+L,C=k<0?0:yn(x/z[L-k-1]%10)}if(y=y||_<0||j[w+1]!=null||(k<0?x:x%z[L-k-1]),y=m<4?(C||y)&&(m==0||m==(g.s<0?3:2)):C>5||C==5&&(m==4||y||m==6&&(v>0?k>0?x/z[L-k]:0:j[w-1])%10&1||m==(g.s<0?8:7)),_<1||!j[0])return j.length=0,y?(_-=g.e+1,j[0]=z[(kn-_%kn)%kn],g.e=-_||0):j[0]=g.e=0,g;if(v==0?(j.length=w,M=1,w--):(j.length=w+1,M=z[kn-v],j[w]=k>0?yn(x/z[L-k]%z[k])*M:0),y)for(;;){if(w==0){for(v=1,k=j[0];k>=10;k/=10,v++);for(k=j[0]+=M,M=1;k>=10;k/=10,M++);v!=M&&(g.e++,j[0]==vn&&(j[0]=1));break}if(j[w]+=M,j[w]!=vn)break;j[w--]=0,M=1}for(v=j.length;j[--v]===0;j.pop());}g.e>I?g.c=g.e=null:g.e<B&&(g.c=[g.e=0])}return g}function q(g){var _,m=g.e;return m===null?g.toString():(_=ft(g.c),_=m<=w||m>=C?Je(_,m):Et(_,m,"0"),g.s<0?"-"+_:_)}return v.absoluteValue=v.abs=function(){var _=new b(this||g);return _.s<0&&(_.s=1),_},v.comparedTo=function(_,m){return Ut(this||g,new b(_,m))},v.decimalPlaces=v.dp=function(_,m){var y,L,v,k=this||g;if(_!=null)return J(_,0,Cn),m==null?m=x:J(m,0,8),A(new b(k),_+k.e+1,m);if(!(y=k.c))return null;if(L=((v=y.length-1)-gt((this||g).e/kn))*kn,v=y[v])for(;v%10==0;v/=10,L--);return L<0&&(L=0),L},v.dividedBy=v.div=function(_,y){return m(this||g,new b(_,y),M,x)},v.dividedToIntegerBy=v.idiv=function(_,y){return m(this||g,new b(_,y),0,1)},v.exponentiatedBy=v.pow=function(_,m){var y,L,v,M,w,C,B,I,j,z=this||g;if(_=new b(_),_.c&&!_.isInteger())throw Error(Ln+"Exponent not an integer: "+q(_));if(m!=null&&(m=new b(m)),C=_.e>14,!z.c||!z.c[0]||z.c[0]==1&&!z.e&&z.c.length==1||!_.c||!_.c[0])return j=new b(Math.pow(+q(z),C?_.s*(2-Ye(_)):+q(_))),m?j.mod(m):j;if(B=_.s<0,m){if(m.c?!m.c[0]:!m.s)return new b(NaN);L=!B&&z.isInteger()&&m.isInteger(),L&&(z=z.mod(m))}else{if(_.e>9&&(z.e>0||z.e<-1||(z.e==0?z.c[0]>1||C&&z.c[1]>=24e7:z.c[0]<8e13||C&&z.c[0]<=9999975e7)))return M=z.s<0&&Ye(_)?-0:0,z.e>-1&&(M=1/M),new b(B?1/M:M);N&&(M=mn(N/kn+2))}for(C?(y=new b(.5),B&&(_.s=1),I=Ye(_)):(v=Math.abs(+q(_)),I=v%2),j=new b(k);;){if(I){if(j=j.times(z),!j.c)break;M?j.c.length>M&&(j.c.length=M):L&&(j=j.mod(m))}if(v){if(v=yn(v/2),v===0)break;I=v%2}else if(_=_.times(y),A(_,_.e+1,1),_.e>14)I=Ye(_);else{if(v=+q(_),v===0)break;I=v%2}z=z.times(z),M?z.c&&z.c.length>M&&(z.c.length=M):L&&(z=z.mod(m))}return L?j:(B&&(j=k.div(j)),m?j.mod(m):M?A(j,N,x,w):j)},v.integerValue=function(_){var m=new b(this||g);return _==null?_=x:J(_,0,8),A(m,m.e+1,_)},v.isEqualTo=v.eq=function(_,m){return Ut(this||g,new b(_,m))===0},v.isFinite=function(){return!!(this||g).c},v.isGreaterThan=v.gt=function(_,m){return Ut(this||g,new b(_,m))>0},v.isGreaterThanOrEqualTo=v.gte=function(_,m){return(m=Ut(this||g,new b(_,m)))===1||m===0},v.isInteger=function(){return!!(this||g).c&&gt((this||g).e/kn)>(this||g).c.length-2},v.isLessThan=v.lt=function(_,m){return Ut(this||g,new b(_,m))<0},v.isLessThanOrEqualTo=v.lte=function(_,m){return(m=Ut(this||g,new b(_,m)))===-1||m===0},v.isNaN=function(){return!(this||g).s},v.isNegative=function(){return(this||g).s<0},v.isPositive=function(){return(this||g).s>0},v.isZero=function(){return!!(this||g).c&&(this||g).c[0]==0},v.minus=function(_,m){var y,L,v,k,M=this||g,w=M.s;if(_=new b(_,m),m=_.s,!w||!m)return new b(NaN);if(w!=m)return _.s=-m,M.plus(_);var C=M.e/kn,B=_.e/kn,I=M.c,j=_.c;if(!C||!B){if(!I||!j)return I?(_.s=-m,_):new b(j?M:NaN);if(!I[0]||!j[0])return j[0]?(_.s=-m,_):new b(I[0]?M:x==3?-0:0)}if(C=gt(C),B=gt(B),I=I.slice(),w=C-B){for((k=w<0)?(w=-w,v=I):(B=C,v=j),v.reverse(),m=w;m--;v.push(0));v.reverse()}else for(L=(k=(w=I.length)<(m=j.length))?w:m,w=m=0;m<L;m++)if(I[m]!=j[m]){k=I[m]<j[m];break}if(k&&(v=I,I=j,j=v,_.s=-_.s),m=(L=j.length)-(y=I.length),m>0)for(;m--;I[y++]=0);for(m=vn-1;L>w;){if(I[--L]<j[L]){for(y=L;y&&!I[--y];I[y]=m);--I[y],I[L]+=vn}I[L]-=j[L]}for(;I[0]==0;I.splice(0,1),--B);return I[0]?O(_,I,B):(_.s=x==3?-1:1,_.c=[_.e=0],_)},v.modulo=v.mod=function(_,y){var L,v,k=this||g;return _=new b(_,y),!k.c||!_.s||_.c&&!_.c[0]?new b(NaN):!_.c||k.c&&!k.c[0]?new b(k):(z==9?(v=_.s,_.s=1,L=m(k,_,0,3),_.s=v,L.s*=v):L=m(k,_,0,z),_=k.minus(L.times(_)),!_.c[0]&&z==1&&(_.s=k.s),_)},v.multipliedBy=v.times=function(_,m){var y,L,v,k,M,x,w,C,B,I,j,z,N,F,U,K=this||g,H=K.c,Y=(_=new b(_,m)).c;if(!H||!Y||!H[0]||!Y[0])return!K.s||!_.s||H&&!H[0]&&!Y||Y&&!Y[0]&&!H?_.c=_.e=_.s=null:(_.s*=K.s,H&&Y?(_.c=[0],_.e=0):_.c=_.e=null),_;for(L=gt(K.e/kn)+gt(_.e/kn),_.s*=K.s,w=H.length,I=Y.length,w<I&&(N=H,H=Y,Y=N,v=w,w=I,I=v),v=w+I,N=[];v--;N.push(0));for(F=vn,U=wn,v=I;--v>=0;){for(y=0,j=Y[v]%U,z=Y[v]/U|0,M=w,k=v+M;k>v;)C=H[--M]%U,B=H[M]/U|0,x=z*C+B*j,C=j*C+x%U*U+N[k]+y,y=(C/F|0)+(x/U|0)+z*B,N[k--]=C%F;N[k]=y}return y?++L:N.splice(0,1),O(_,N,L)},v.negated=function(){var _=new b(this||g);return _.s=-_.s||null,_},v.plus=function(_,m){var y,L=this||g,v=L.s;if(_=new b(_,m),m=_.s,!v||!m)return new b(NaN);if(v!=m)return _.s=-m,L.minus(_);var k=L.e/kn,M=_.e/kn,x=L.c,w=_.c;if(!k||!M){if(!x||!w)return new b(v/0);if(!x[0]||!w[0])return w[0]?_:new b(x[0]?L:v*0)}if(k=gt(k),M=gt(M),x=x.slice(),v=k-M){for(v>0?(M=k,y=w):(v=-v,y=x),y.reverse();v--;y.push(0));y.reverse()}for(v=x.length,m=w.length,v-m<0&&(y=w,w=x,x=y,m=v),v=0;m;)v=(x[--m]=x[m]+w[m]+v)/vn|0,x[m]=vn===x[m]?0:x[m]%vn;return v&&(x=[v].concat(x),++M),O(_,x,M)},v.precision=v.sd=function(_,m){var y,L,v,k=this||g;if(_!=null&&_!==!!_)return J(_,1,Cn),m==null?m=x:J(m,0,8),A(new b(k),_,m);if(!(y=k.c))return null;if(v=y.length-1,L=v*kn+1,v=y[v]){for(;v%10==0;v/=10,L--);for(v=y[0];v>=10;v/=10,L++);}return _&&k.e+1>L&&(L=k.e+1),L},v.shiftedBy=function(g){return J(g,-Mn,Mn),this.times("1e"+g)},v.squareRoot=v.sqrt=function(){var _,y,L,v,k,w=this||g,C=w.c,B=w.s,I=w.e,j=M+4,z=new b("0.5");if(B!==1||!C||!C[0])return new b(!B||B<0&&(!C||C[0])?NaN:C?w:1/0);if(B=Math.sqrt(+q(w)),B==0||B==1/0?(y=ft(C),(y.length+I)%2==0&&(y+="0"),B=Math.sqrt(+y),I=gt((I+1)/2)-(I<0||I%2),B==1/0?y="5e"+I:(y=B.toExponential(),y=y.slice(0,y.indexOf("e")+1)+I),L=new b(y)):L=new b(B+""),L.c[0])for(I=L.e,B=I+j,B<3&&(B=0);;)if(k=L,L=z.times(k.plus(m(w,k,j,1))),ft(k.c).slice(0,B)===(y=ft(L.c)).slice(0,B)){if(L.e<I&&--B,y=y.slice(B-3,B+1),y!="9999"&&(v||y!="4999")){(!+y||!+y.slice(1)&&y.charAt(0)=="5")&&(A(L,L.e+M+2,1),_=!L.times(L).eq(w));break}if(!v&&(A(k,k.e+M+2,0),k.times(k).eq(w))){L=k;break}j+=4,B+=4,v=1}return A(L,L.e+M+1,x,_)},v.toExponential=function(_,m){return _!=null&&(J(_,0,Cn),_++),R(this||g,_,m,1)},v.toFixed=function(_,m){return _!=null&&(J(_,0,Cn),_=_+(this||g).e+1),R(this||g,_,m)},v.toFormat=function(_,m,y){var L,v=this||g;if(y==null)_!=null&&m&&typeof m=="object"?(y=m,m=null):_&&typeof _=="object"?(y=_,_=m=null):y=F;else if(typeof y!="object")throw Error(Ln+"Argument not an object: "+y);if(L=v.toFixed(_,m),v.c){var k,M=L.split("."),x=+y.groupSize,w=+y.secondaryGroupSize,C=y.groupSeparator||"",B=M[0],I=M[1],j=v.s<0,z=j?B.slice(1):B,N=z.length;if(w&&(k=x,x=w,w=k,N-=k),x>0&&N>0){for(k=N%x||x,B=z.substr(0,k);k<N;k+=x)B+=C+z.substr(k,x);w>0&&(B+=C+z.slice(k)),j&&(B="-"+B)}L=I?B+(y.decimalSeparator||"")+((w=+y.fractionGroupSize)?I.replace(new RegExp("\\d{"+w+"}\\B","g"),"$&"+(y.fractionGroupSeparator||"")):I):B}return(y.prefix||"")+L+(y.suffix||"")},v.toFraction=function(_){var y,L,v,M,w,C,B,j,z,N,F,U,K=this||g,H=K.c;if(_!=null&&(B=new b(_),!B.isInteger()&&(B.c||B.s!==1)||B.lt(k)))throw Error(Ln+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+q(B));if(!H)return new b(K);for(y=new b(k),z=L=new b(k),v=j=new b(k),U=ft(H),w=y.e=U.length-K.e-1,y.c[0]=xn[(C=w%kn)<0?kn+C:C],_=!_||B.comparedTo(y)>0?w>0?y:z:B,C=I,I=1/0,B=new b(U),j.c[0]=0;N=m(B,y,0,1),M=L.plus(N.times(v)),M.comparedTo(_)!=1;)L=v,v=M,z=j.plus(N.times(M=z)),j=M,y=B.minus(N.times(M=y)),B=M;return M=m(_.minus(L),v,0,1),j=j.plus(M.times(z)),L=L.plus(M.times(v)),j.s=z.s=K.s,w*=2,F=m(z,v,w,x).minus(K).abs().comparedTo(m(j,L,w,x).minus(K).abs())<1?[z,v]:[j,L],I=C,F},v.toNumber=function(){return+q(this||g)},v.toPrecision=function(_,m){return _!=null&&J(_,1,Cn),R(this||g,_,m,2)},v.toString=function(_){var m,L=this||g,v=L.s,k=L.e;return k===null?v?(m="Infinity",v<0&&(m="-"+m)):m="NaN":(_==null?m=k<=w||k>=C?Je(ft(L.c),k):Et(ft(L.c),k,"0"):_===10&&K?(L=A(new b(L),M+k+1,x),m=Et(ft(L.c),L.e,"0")):(J(_,2,U.length,"Base"),m=y(Et(ft(L.c),k,"0"),10,_,v,!0)),v<0&&L.c[0]&&(m="-"+m)),m},v.valueOf=v.toJSON=function(){return q(this||g)},v._isBigNumber=!0,v[Symbol.toStringTag]="BigNumber",v[Symbol.for("nodejs.util.inspect.custom")]=v.valueOf,_!=null&&b.set(_),b}function gt(g){var _=g|0;return g>0||g===_?_:_-1}function ft(g){for(var _,m,y=1,L=g.length,v=g[0]+"";y<L;){for(_=g[y++]+"",m=kn-_.length;m--;_="0"+_);v+=_}for(L=v.length;v.charCodeAt(--L)===48;);return v.slice(0,L+1||1)}function Ut(g,_){var m,y,L=g.c,v=_.c,k=g.s,M=_.s,x=g.e,w=_.e;if(!k||!M)return null;if(m=L&&!L[0],y=v&&!v[0],m||y)return m?y?0:-M:k;if(k!=M)return k;if(m=k<0,y=x==w,!L||!v)return y?0:!L^m?1:-1;if(!y)return x>w^m?1:-1;for(M=(x=L.length)<(w=v.length)?x:w,k=0;k<M;k++)if(L[k]!=v[k])return L[k]>v[k]^m?1:-1;return x==w?0:x>w^m?1:-1}function J(g,_,m,y){if(g<_||g>m||g!==yn(g))throw Error(Ln+(y||"Argument")+(typeof g=="number"?g<_||g>m?" out of range: ":" not an integer: ":" not a primitive number: ")+String(g))}function Ye(g){var _=g.c.length-1;return gt(g.e/kn)==_&&g.c[_]%2!=0}function Je(g,_){return(g.length>1?g.charAt(0)+"."+g.slice(1):g)+(_<0?"e":"e+")+_}function Et(g,_,m){var y,L;if(_<0){for(L=m+".";++_;L+=m);g=L+g}else if(y=g.length,++_>y){for(L=m,_-=y;--_;L+=m);g+=L}else _<y&&(g=g.slice(0,_)+"."+g.slice(_));return g}var En=Cl(),Pn=En;var Sn=class{key;left=null;right=null;constructor(g){this.key=g}},Bn=class extends Sn{constructor(g){super(g)}};var Rn=class{size=0;modificationCount=0;splayCount=0;splay(g){let _=this.root;if(_==null)return this.compare(g,g),-1;let m,y=null,L=null,v=null,k=null,M=_,x=this.compare;for(;;)if(m=x(M.key,g),m>0){let _=M.left;if(_==null||(m=x(_.key,g),m>0&&(M.left=_.right,_.right=M,M=_,_=M.left,_==null)))break;y==null?L=M:y.left=M,y=M,M=_}else{if(!(m<0))break;{let _=M.right;if(_==null||(m=x(_.key,g),m<0&&(M.right=_.left,_.left=M,M=_,_=M.right,_==null)))break;v==null?k=M:v.right=M,v=M,M=_}}return v!=null&&(v.right=M.left,M.left=k),y!=null&&(y.left=M.right,M.right=L),this.root!==M&&(this.root=M,this.splayCount++),m}splayMin(g){let _=g,m=_.left;for(;m!=null;){let g=m;_.left=g.right,g.right=_,_=g,m=_.left}return _}splayMax(g){let _=g,m=_.right;for(;m!=null;){let g=m;_.right=g.left,g.left=_,_=g,m=_.right}return _}_delete(g){if(this.root==null||this.splay(g)!=0)return null;let _=this.root,m=_,y=_.left;if(this.size--,y==null)this.root=_.right;else{let g=_.right;_=this.splayMax(y),_.right=g,this.root=_}return this.modificationCount++,m}addNewRoot(g,_){this.size++,this.modificationCount++;let m=this.root;m!=null?(_<0?(g.left=m,g.right=m.right,m.right=null):(g.right=m,g.left=m.left,m.left=null),this.root=g):this.root=g}_first(){let g=this.root;return g==null?null:(this.root=this.splayMin(g),this.root)}_last(){let g=this.root;return g==null?null:(this.root=this.splayMax(g),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(g){return this.validKey(g)&&this.splay(g)==0}defaultCompare(){return(g,_)=>g<_?-1:g>_?1:0}wrap(){return{getRoot:()=>this.root,setRoot:g=>{this.root=g},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:g=>{this.splayCount=g},splay:g=>this.splay(g),has:g=>this.has(g)}}};var Dn=class t extends Rn{root=null;compare;validKey;constructor(g,_){super(),this.compare=g??this.defaultCompare(),this.validKey=_??(g=>g!=null&&g!=null)}delete(g){return!!this.validKey(g)&&this._delete(g)!=null}deleteAll(g){for(let _ of g)this.delete(_)}forEach(g){let _,m=this[Symbol.iterator]();for(;_=m.next(),!_.done;)g(_.value,_.value,this)}add(g){let _=this.splay(g);return _!=0&&this.addNewRoot(new Bn(g),_),this}addAndReturn(g){let _=this.splay(g);return _!=0&&this.addNewRoot(new Bn(g),_),this.root.key}addAll(g){for(let _ of g)this.add(_)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(g){if(g==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(g)<0)return this.root.key;let _=this.root.left;if(_==null)return null;let m=_.right;for(;m!=null;)_=m,m=_.right;return _.key}firstAfter(g){if(g==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(g)>0)return this.root.key;let _=this.root.right;if(_==null)return null;let m=_.left;for(;m!=null;)_=m,m=_.left;return _.key}retainAll(g){let _=new t(this.compare,this.validKey),m=this.modificationCount;for(let y of g){if(m!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(y)&&this.splay(y)==0&&_.add(this.root.key)}_.size!=this.size&&(this.root=_.root,this.size=_.size,this.modificationCount++)}lookup(g){return this.validKey(g)&&this.splay(g)==0?this.root.key:null}intersection(g){let _=new t(this.compare,this.validKey);for(let m of this)g.has(m)&&_.add(m);return _}difference(g){let _=new t(this.compare,this.validKey);for(let m of this)g.has(m)||_.add(m);return _}union(g){let _=this.clone();return _.addAll(g),_}clone(){let g=new t(this.compare,this.validKey);return g.size=this.size,g.root=this.copyNode(this.root),g}copyNode(g){if(g==null)return null;function i(g,_){let m,y;do{if(m=g.left,y=g.right,m!=null){let g=new Bn(m.key);_.left=g,i(m,g)}if(y!=null){let m=new Bn(y.key);_.right=m,g=y,_=m}}while(y!=null)}let _=new Bn(g.key);return i(g,_),_}toSet(){return this.clone()}entries(){return new In(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new On(this.wrap())}[Symbol.toStringTag]="[object Set]"},Tn=class{tree;path=new Array;modificationCount=null;splayCount;constructor(g){this.tree=g,this.splayCount=g.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let g=this.path[this.path.length-1];return this.getValue(g)}rebuildPath(g){this.path.splice(0,this.path.length),this.tree.splay(g),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(g){for(;g!=null;)this.path.push(g),g=g.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let g=this.tree.getRoot();for(;g!=null;)this.path.push(g),g=g.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let g=this.path[this.path.length-1],_=g.right;if(_!=null){for(;_!=null;)this.path.push(_),_=_.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===g;)g=this.path.pop();return this.path.length>0}},On=class extends Tn{getValue(g){return g.key}},In=class extends Tn{getValue(g){return[g.key,g.key]}};var El=g=>g;var Pl=g=>{if(g){let _=new Dn(Ee(g)),m=new Dn(Ee(g)),r=(g,_)=>_.addAndReturn(g),n=g=>({x:r(g.x,_),y:r(g.y,m)});return n({x:new Pn(0),y:new Pn(0)}),n}return El};var nr=g=>({set:g=>{An=nr(g)},reset:()=>nr(g),compare:Ee(g),snap:Pl(g),orient:xl(g)}),An=nr();var ae=(g,_)=>g.ll.x.isLessThanOrEqualTo(_.x)&&_.x.isLessThanOrEqualTo(g.ur.x)&&g.ll.y.isLessThanOrEqualTo(_.y)&&_.y.isLessThanOrEqualTo(g.ur.y),Pe=(g,_)=>{if(_.ur.x.isLessThan(g.ll.x)||g.ur.x.isLessThan(_.ll.x)||_.ur.y.isLessThan(g.ll.y)||g.ur.y.isLessThan(_.ll.y))return null;let m=g.ll.x.isLessThan(_.ll.x)?_.ll.x:g.ll.x,y=g.ur.x.isLessThan(_.ur.x)?g.ur.x:_.ur.x,L=g.ll.y.isLessThan(_.ll.y)?_.ll.y:g.ll.y,v=g.ur.y.isLessThan(_.ur.y)?g.ur.y:_.ur.y;return{ll:{x:m,y:L},ur:{x:y,y:v}}};var Ze=(g,_)=>g.x.times(_.y).minus(g.y.times(_.x)),Tl=(g,_)=>g.x.times(_.x).plus(g.y.times(_.y)),We=g=>Tl(g,g).sqrt(),Rl=(g,_,m)=>{let y={x:_.x.minus(g.x),y:_.y.minus(g.y)},L={x:m.x.minus(g.x),y:m.y.minus(g.y)};return Ze(L,y).div(We(L)).div(We(y))},Dl=(g,_,m)=>{let y={x:_.x.minus(g.x),y:_.y.minus(g.y)},L={x:m.x.minus(g.x),y:m.y.minus(g.y)};return Tl(L,y).div(We(L)).div(We(y))},Sl=(g,_,m)=>_.y.isZero()?null:{x:g.x.plus(_.x.div(_.y).times(m.minus(g.y))),y:m},Bl=(g,_,m)=>_.x.isZero()?null:{x:m,y:g.y.plus(_.y.div(_.x).times(m.minus(g.x)))},Ol=(g,_,m,y)=>{if(_.x.isZero())return Bl(m,y,g.x);if(y.x.isZero())return Bl(g,_,m.x);if(_.y.isZero())return Sl(m,y,g.y);if(y.y.isZero())return Sl(g,_,m.y);let L=Ze(_,y);if(L.isZero())return null;let v={x:m.x.minus(g.x),y:m.y.minus(g.y)},k=Ze(v,_).div(L),M=Ze(v,y).div(L),x=g.x.plus(M.times(_.x)),w=m.x.plus(k.times(y.x)),C=g.y.plus(M.times(_.y)),B=m.y.plus(k.times(y.y)),I=x.plus(w).div(2),j=C.plus(B).div(2);return{x:I,y:j}};var Gn=class t{point;isLeft;segment;otherSE;consumedBy;static compare(g,_){let m=t.comparePoints(g.point,_.point);return m!==0?m:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:zn.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}constructor(g,_){g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let g=0,m=_.length;g<m;g++){let m=_[g];this.point.events.push(m),m.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let m=this.point.events[_];if(m.segment.consumedBy===void 0)for(let y=_+1;y<g;y++){let g=this.point.events[y];g.consumedBy===void 0&&m.otherSE.point.events===g.otherSE.point.events&&m.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,m=this.point.events.length;_<m;_++){let m=this.point.events[_];m!==this&&!m.segment.ringOut&&m.segment.isInResult()&&g.push(m)}return g}getLeftmostComparator(g){let _=new Map,r=m=>{let y=m.otherSE;_.set(m,{sine:Rl(this.point,g.point,y.point),cosine:Dl(this.point,g.point,y.point)})};return(g,m)=>{_.has(g)||r(g),_.has(m)||r(m);let{sine:y,cosine:L}=_.get(g),{sine:v,cosine:k}=_.get(m);return y.isGreaterThanOrEqualTo(0)&&v.isGreaterThanOrEqualTo(0)?L.isLessThan(k)?1:L.isGreaterThan(k)?-1:0:y.isLessThan(0)&&v.isLessThan(0)?L.isLessThan(k)?-1:L.isGreaterThan(k)?1:0:v.isLessThan(y)?-1:v.isGreaterThan(y)?1:0}}};var jn=0,zn=class t{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(g,_){let m=g.leftSE.point.x,y=_.leftSE.point.x,L=g.rightSE.point.x,v=_.rightSE.point.x;if(v.isLessThan(m))return 1;if(L.isLessThan(y))return-1;let k=g.leftSE.point.y,M=_.leftSE.point.y,x=g.rightSE.point.y,w=_.rightSE.point.y;if(m.isLessThan(y)){if(M.isLessThan(k)&&M.isLessThan(x))return 1;if(M.isGreaterThan(k)&&M.isGreaterThan(x))return-1;let m=g.comparePoint(_.leftSE.point);if(m<0)return 1;if(m>0)return-1;let y=_.comparePoint(g.rightSE.point);return y!==0?y:-1}if(m.isGreaterThan(y)){if(k.isLessThan(M)&&k.isLessThan(w))return-1;if(k.isGreaterThan(M)&&k.isGreaterThan(w))return 1;let m=_.comparePoint(g.leftSE.point);if(m!==0)return m;let y=g.comparePoint(_.rightSE.point);return y<0?1:y>0?-1:1}if(k.isLessThan(M))return-1;if(k.isGreaterThan(M))return 1;if(L.isLessThan(v)){let m=_.comparePoint(g.rightSE.point);if(m!==0)return m}if(L.isGreaterThan(v)){let m=g.comparePoint(_.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(!L.eq(v)){let g=x.minus(k),_=L.minus(m),C=w.minus(M),B=v.minus(y);if(g.isGreaterThan(_)&&C.isLessThan(B))return 1;if(g.isLessThan(_)&&C.isGreaterThan(B))return-1}return L.isGreaterThan(v)?1:L.isLessThan(v)||x.isLessThan(w)?-1:x.isGreaterThan(w)?1:g.id<_.id?-1:g.id>_.id?1:0}constructor(g,_,m,y){this.id=++jn,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=m,this.windings=y}static fromRing(g,_,m){let y,L,v,k=Gn.comparePoints(g,_);if(k<0)y=g,L=_,v=1;else{if(!(k>0))throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);y=_,L=g,v=-1}let M=new Gn(y,!0),x=new Gn(L,!1);return new t(M,x,[m],[v])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return An.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),m=g.bbox(),y=Pe(_,m);if(y===null)return null;let L=this.leftSE.point,v=this.rightSE.point,k=g.leftSE.point,M=g.rightSE.point,x=ae(_,k)&&this.comparePoint(k)===0,w=ae(m,L)&&g.comparePoint(L)===0,C=ae(_,M)&&this.comparePoint(M)===0,B=ae(m,v)&&g.comparePoint(v)===0;if(w&&x)return B&&!C?v:!B&&C?M:null;if(w)return C&&L.x.eq(M.x)&&L.y.eq(M.y)?null:L;if(x)return B&&v.x.eq(k.x)&&v.y.eq(k.y)?null:k;if(B&&C)return null;if(B)return v;if(C)return M;let I=Ol(L,this.vector(),k,g.vector());return I!==null&&ae(y,I)?An.snap(I):null}split(g){let _=[],m=g.events!==void 0,y=new Gn(g,!0),L=new Gn(g,!1),v=this.rightSE;this.replaceRightSE(L),_.push(L),_.push(y);let k=new t(y,v,this.rings.slice(),this.windings.slice());return Gn.comparePoints(k.leftSE.point,k.rightSE.point)>0&&k.swapEvents(),Gn.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),m&&(y.checkForConsuming(),L.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let g=0,_=this.windings.length;g<_;g++)this.windings[g]*=-1}consume(g){let _=this,m=g;for(;_.consumedBy;)_=_.consumedBy;for(;m.consumedBy;)m=m.consumedBy;let y=t.compare(_,m);if(y!==0){if(y>0){let g=_;_=m,m=g}if(_.prev===m){let g=_;_=m,m=g}for(let g=0,y=m.rings.length;g<y;g++){let y=m.rings[g],L=m.windings[g],v=_.rings.indexOf(y);v===-1?(_.rings.push(y),_.windings.push(L)):_.windings[v]+=L}m.rings=null,m.windings=null,m.consumedBy=_,m.leftSE.consumedBy=_.leftSE,m.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,m=this._afterState.windings,y=this._afterState.multiPolys;for(let g=0,y=this.rings.length;g<y;g++){let y=this.rings[g],L=this.windings[g],v=_.indexOf(y);v===-1?(_.push(y),m.push(L)):m[v]+=L}let L=[],v=[];for(let g=0,y=_.length;g<y;g++){if(m[g]===0)continue;let y=_[g],k=y.poly;if(v.indexOf(k)===-1)if(y.isExterior)L.push(k);else{v.indexOf(k)===-1&&v.push(k);let g=L.indexOf(y.poly);g!==-1&&L.splice(g,1)}}for(let g=0,_=L.length;g<_;g++){let _=L[g].multiPoly;y.indexOf(_)===-1&&y.push(_)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Xn.type){case"union":{let m=g.length===0,y=_.length===0;this._isInResult=m!==y;break}case"intersection":{let m,y;g.length<_.length?(m=g.length,y=_.length):(m=_.length,y=g.length),this._isInResult=y===Xn.numMultiPolys&&m<y;break}case"xor":{let m=Math.abs(g.length-_.length);this._isInResult=m%2===1;break}case"difference":{let r=g=>g.length===1&&g[0].isSubject;this._isInResult=r(g)!==r(_);break}}return this._isInResult}};var Nn=class{poly;isExterior;segments;bbox;constructor(g,_,m){if(!Array.isArray(g)||g.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=_,this.isExterior=m,this.segments=[],typeof g[0][0]!="number"||typeof g[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let y=An.snap({x:new Pn(g[0][0]),y:new Pn(g[0][1])});this.bbox={ll:{x:y.x,y:y.y},ur:{x:y.x,y:y.y}};let L=y;for(let _=1,m=g.length;_<m;_++){if(typeof g[_][0]!="number"||typeof g[_][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let m=An.snap({x:new Pn(g[_][0]),y:new Pn(g[_][1])});m.x.eq(L.x)&&m.y.eq(L.y)||(this.segments.push(zn.fromRing(L,m,this)),m.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.x),m.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.y),m.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.x),m.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.y),L=m)}(!y.x.eq(L.x)||!y.y.eq(L.y))&&this.segments.push(zn.fromRing(L,y,this))}getSweepEvents(){let g=[];for(let _=0,m=this.segments.length;_<m;_++){let m=this.segments[_];g.push(m.leftSE),g.push(m.rightSE)}return g}},Vn=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(g,_){if(!Array.isArray(g))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Nn(g[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,m=g.length;_<m;_++){let m=new Nn(g[_],this,!1);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.interiorRings.push(m)}this.multiPoly=_}getSweepEvents(){let g=this.exteriorRing.getSweepEvents();for(let _=0,m=this.interiorRings.length;_<m;_++){let m=this.interiorRings[_].getSweepEvents();for(let _=0,y=m.length;_<y;_++)g.push(m[_])}return g}},Fn=class{isSubject;polys;bbox;constructor(g,_){if(!Array.isArray(g))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof g[0][0][0]=="number"&&(g=[g])}catch{}this.polys=[],this.bbox={ll:{x:new Pn(Number.POSITIVE_INFINITY),y:new Pn(Number.POSITIVE_INFINITY)},ur:{x:new Pn(Number.NEGATIVE_INFINITY),y:new Pn(Number.NEGATIVE_INFINITY)}};for(let _=0,m=g.length;_<m;_++){let m=new Vn(g[_],this);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.polys.push(m)}this.isSubject=_}getSweepEvents(){let g=[];for(let _=0,m=this.polys.length;_<m;_++){let m=this.polys[_].getSweepEvents();for(let _=0,y=m.length;_<y;_++)g.push(m[_])}return g}};var Un=class t{events;poly;_isExteriorRing;_enclosingRing;static factory(g){let _=[];for(let m=0,y=g.length;m<y;m++){let y=g[m];if(!y.isInResult()||y.ringOut)continue;let L=null,v=y.leftSE,k=y.rightSE,M=[v],x=v.point,w=[];for(;L=v,v=k,M.push(v),v.point!==x;)for(;;){let g=v.getAvailableLinkedEvents();if(g.length===0){let g=M[0].point,_=M[M.length-1].point;throw new Error(`Unable to complete output ring starting at [${g.x}, ${g.y}]. Last matching segment found ends at [${_.x}, ${_.y}].`)}if(g.length===1){k=g[0].otherSE;break}let m=null;for(let g=0,_=w.length;g<_;g++)if(w[g].point===v.point){m=g;break}if(m!==null){let g=w.splice(m)[0],y=M.splice(g.index);y.unshift(y[0].otherSE),_.push(new t(y.reverse()));continue}w.push({index:M.length,point:v.point});let y=v.getLeftmostComparator(L);k=g.sort(y)[0].otherSE;break}_.push(new t(M))}return _}constructor(g){this.events=g;for(let _=0,m=g.length;_<m;_++)g[_].segment.ringOut=this;this.poly=null}getGeom(){let g=this.events[0].point,_=[g];for(let m=1,y=this.events.length-1;m<y;m++){let y=this.events[m].point,L=this.events[m+1].point;An.orient(y,g,L)!==0&&(_.push(y),g=y)}if(_.length===1)return null;let m=_[0],y=_[1];An.orient(m,g,y)===0&&_.shift(),_.push(_[0]);let L=this.isExteriorRing()?1:-1,v=this.isExteriorRing()?0:_.length-1,k=this.isExteriorRing()?_.length:-1,M=[];for(let g=v;g!=k;g+=L)M.push([_[g].x.toNumber(),_[g].y.toNumber()]);return M}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=!g||!g.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let g=this.events[0];for(let _=1,m=this.events.length;_<m;_++){let m=this.events[_];Gn.compare(g,m)>0&&(g=m)}let _=g.segment.prevInResult(),m=_?_.prevInResult():null;for(;;){if(!_)return null;if(!m)return _.ringOut;if(m.ringOut!==_.ringOut)return m.ringOut?.enclosingRing()!==_.ringOut?_.ringOut:_.ringOut?.enclosingRing();_=m.prevInResult(),m=_?_.prevInResult():null}}},Kn=class{exteriorRing;interiorRings;constructor(g){this.exteriorRing=g,g.poly=this,this.interiorRings=[]}addInterior(g){this.interiorRings.push(g),g.poly=this}getGeom(){let g=this.exteriorRing.getGeom();if(g===null)return null;let _=[g];for(let g=0,m=this.interiorRings.length;g<m;g++){let m=this.interiorRings[g].getGeom();m!==null&&_.push(m)}return _}},qn=class{rings;polys;constructor(g){this.rings=g,this.polys=this._composePolys(g)}getGeom(){let g=[];for(let _=0,m=this.polys.length;_<m;_++){let m=this.polys[_].getGeom();m!==null&&g.push(m)}return g}_composePolys(g){let _=[];for(let m=0,y=g.length;m<y;m++){let y=g[m];if(!y.poly)if(y.isExteriorRing())_.push(new Kn(y));else{let g=y.enclosingRing();g?.poly||_.push(new Kn(g)),g?.poly?.addInterior(y)}}return _}};var Hn=class{queue;tree;segments;constructor(g,_=zn.compare){this.queue=g,this.tree=new Dn(_),this.segments=[]}process(g){let _=g.segment,m=[];if(g.consumedBy)return g.isLeft?this.queue.delete(g.otherSE):this.tree.delete(_),m;g.isLeft&&this.tree.add(_);let y=_,L=_;do{y=this.tree.lastBefore(y)}while(y!=null&&y.consumedBy!=null);do{L=this.tree.firstAfter(L)}while(L!=null&&L.consumedBy!=null);if(g.isLeft){let v=null;if(y){let g=y.getIntersection(_);if(g!==null&&(_.isAnEndpoint(g)||(v=g),!y.isAnEndpoint(g))){let _=this._splitSafely(y,g);for(let g=0,y=_.length;g<y;g++)m.push(_[g])}}let k=null;if(L){let g=L.getIntersection(_);if(g!==null&&(_.isAnEndpoint(g)||(k=g),!L.isAnEndpoint(g))){let _=this._splitSafely(L,g);for(let g=0,y=_.length;g<y;g++)m.push(_[g])}}if(v!==null||k!==null){let g=null;g=v===null?k:k===null||Gn.comparePoints(v,k)<=0?v:k,this.queue.delete(_.rightSE),m.push(_.rightSE);let y=_.split(g);for(let g=0,_=y.length;g<_;g++)m.push(y[g])}m.length>0?(this.tree.delete(_),m.push(g)):(this.segments.push(_),_.prev=y)}else{if(y&&L){let g=y.getIntersection(L);if(g!==null){if(!y.isAnEndpoint(g)){let _=this._splitSafely(y,g);for(let g=0,y=_.length;g<y;g++)m.push(_[g])}if(!L.isAnEndpoint(g)){let _=this._splitSafely(L,g);for(let g=0,y=_.length;g<y;g++)m.push(_[g])}}}this.tree.delete(_)}return m}_splitSafely(g,_){this.tree.delete(g);let m=g.rightSE;this.queue.delete(m);let y=g.split(_);return y.push(m),g.consumedBy===void 0&&this.tree.add(g),y}};var Jn=class{type;numMultiPolys;run(g,_,m){Yn.type=g;let y=[new Fn(_,!0)];for(let g=0,_=m.length;g<_;g++)y.push(new Fn(m[g],!1));if(Yn.numMultiPolys=y.length,Yn.type==="difference"){let g=y[0],_=1;for(;_<y.length;)Pe(y[_].bbox,g.bbox)!==null?_++:y.splice(_,1)}if(Yn.type==="intersection")for(let g=0,_=y.length;g<_;g++){let _=y[g];for(let m=g+1,L=y.length;m<L;m++)if(Pe(_.bbox,y[m].bbox)===null)return[]}let L=new Dn(Gn.compare);for(let g=0,_=y.length;g<_;g++){let _=y[g].getSweepEvents();for(let g=0,m=_.length;g<m;g++)L.add(_[g])}let v=new Hn(L),k=null;for(L.size!=0&&(k=L.first(),L.delete(k));k;){let g=v.process(k);for(let _=0,m=g.length;_<m;_++){let m=g[_];m.consumedBy===void 0&&L.add(m)}L.size!=0?(k=L.first(),L.delete(k)):k=null}An.reset();let M=Un.factory(v.segments);return new qn(M).getGeom()}},Yn=new Jn,Xn=Yn;var Al=(g,..._)=>Xn.run("intersection",g,_);var Il=(g,..._)=>Xn.run("difference",g,_);An.set;function ni(g){let _={type:"Feature"};return _.geometry=g,_}function ri(g){return g.type==="Feature"?g.geometry:g}function Gl(g){return g&&g.geometry&&g.geometry.coordinates?g.geometry.coordinates:g}function m_(g){return ni({type:"LineString",coordinates:g})}function __(g){return ni({type:"MultiLineString",coordinates:g})}function ql(g){return ni({type:"Polygon",coordinates:g})}function Nl(g){return ni({type:"MultiPolygon",coordinates:g})}function zl(g,_){let m=ri(g),y=ri(_),L=Al(m.coordinates,y.coordinates);return L.length===0?null:L.length===1?ql(L[0]):Nl(L)}function Fl(g,_){let m=ri(g),y=ri(_),L=Il(m.coordinates,y.coordinates);return L.length===0?null:L.length===1?ql(L[0]):Nl(L)}function Vl(g){return Array.isArray(g)?1+Vl(g[0]):-1}function Ul(g){g instanceof L.Polyline&&(g=g.toGeoJSON(15));let _=Gl(g),m=Vl(_),y=[];return m>1?_.forEach((g=>{y.push(m_(g))})):y.push(g),y}function Kl(g){let _=[];return g.eachLayer((g=>{_.push(Gl(g.toGeoJSON(15)))})),__(_)}tn.Cut=tn.Polygon.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Cut",(this||g).toolbarButtonName="cutPolygon"},_finishShape(){if((this||g)._editedLayers=[],!(this||g).options.allowSelfIntersection&&(this._handleSelfIntersection(!0,(this||g)._layer.getLatLngs()[0]),(this||g)._doesSelfIntersect)||(this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer())return;let _=(this||g)._layer.getLatLngs();if(_.length<=2)return;let m=L.polygon(_,(this||g).options.pathOptions);m._latlngInfos=(this||g)._layer._latlngInfo,this.cut(m),this._cleanupSnapping(),(this||g)._otherSnapLayers.splice((this||g)._tempSnapLayerIndex,1),delete(this||g)._tempSnapLayerIndex,(this||g)._editedLayers.forEach((({layer:_,originalLayer:m})=>{this._fireCut(m,_,m),this._fireCut((this||g)._map,_,m),m.pm._fireEdit()})),(this||g)._editedLayers=[];let y=(this||g)._hintMarker.getLatLng();this.disable(),(this||g).options.continueDrawing&&(this.enable(),(this||g)._hintMarker.setLatLng(y))},cut(_){let m=(this||g)._map._layers,y=_._latlngInfos||[];Object.keys(m).map((g=>m[g])).filter((g=>g.pm)).filter((g=>!g._pmTempLayer)).filter((g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)).filter((g=>g instanceof L.Polyline)).filter((g=>g!==_)).filter((g=>g.pm.options.allowCutting)).filter((_=>!((this||g).options.layersToCut&&L.Util.isArray((this||g).options.layersToCut)&&(this||g).options.layersToCut.length>0)||(this||g).options.layersToCut.indexOf(_)>-1)).filter((_=>!(this||g)._layerGroup.hasLayer(_))).filter((g=>{try{let m=!!sn(_.toGeoJSON(15),g.toGeoJSON(15)).features.length>0;return m||g instanceof L.Polyline&&!(g instanceof L.Polygon)?m:!!zl(_.toGeoJSON(15),g.toGeoJSON(15))}catch{return g instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}})).forEach((m=>{let v;if(m instanceof L.Polygon){v=L.polygon(m.getLatLngs());let _=v.getLatLngs();y.forEach((m=>{if(m&&m.snapInfo){let{latlng:y}=m,k=this._calcClosestLayer(y,[v]);if(k&&k.segment&&k.distance<(this||g).options.snapDistance){let{segment:g}=k;if(g&&g.length===2){let{indexPath:m,parentPath:v,newIndex:k}=L.PM.Utils._getIndexFromSegment(_,g);(m.length>1?(0,fn.default)(_,v):_).splice(k,0,y)}}}}))}else v=m;let k=this._cutLayer(_,v),M=L.geoJSON(k,m.options);M.getLayers().length===1&&([M]=M.getLayers()),this._setPane(M,"layerPane");let x=M.addTo((this||g)._map.pm._getContainingLayer());if(x.pm.enable(m.pm.options),x.pm.disable(),m._pmTempLayer=!0,_._pmTempLayer=!0,m.remove(),m.removeFrom((this||g)._map.pm._getContainingLayer()),_.remove(),_.removeFrom((this||g)._map.pm._getContainingLayer()),x.getLayers&&x.getLayers().length===0&&(this||g)._map.pm.removeLayer({target:x}),x instanceof L.LayerGroup?(x.eachLayer((g=>{this._addDrawnLayerProp(g)})),this._addDrawnLayerProp(x)):this._addDrawnLayerProp(x),(this||g).options.layersToCut&&L.Util.isArray((this||g).options.layersToCut)&&(this||g).options.layersToCut.length>0){let _=(this||g).options.layersToCut.indexOf(m);_>-1&&(this||g).options.layersToCut.splice(_,1)}(this||g)._editedLayers.push({layer:x,originalLayer:m})}))},_cutLayer(g,_){let m,y=L.geoJSON();if(_ instanceof L.Polygon)m=Fl(_.toGeoJSON(15),g.toGeoJSON(15));else{let v=Ul(_);v.forEach((_=>{let m,v=dn(_,g.toGeoJSON(15));m=v&&v.features.length>0?L.geoJSON(v):L.geoJSON(_),m.getLayers().forEach((_=>{Ji(g.toGeoJSON(15),_.toGeoJSON(15))||_.addTo(y)}))})),m=v.length>1?Kl(y):y.toGeoJSON(15)}return m},_change:L.Util.falseFn});tn.Text=tn.extend({initialize(_){(this||g)._map=_,(this||g)._shape="Text",(this||g).toolbarButtonName="drawText"},enable(_){L.Util.setOptions(this||g,_),(this||g)._enabled=!0,(this||g)._map.on("click",(this||g)._createMarker,this||g),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!0),(this||g)._hintMarker=L.marker((this||g)._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane((this||g)._hintMarker,"vertexPane"),(this||g)._hintMarker._pmTempLayer=!0,(this||g)._hintMarker.addTo((this||g)._map),(this||g).options.cursorMarker&&L.DomUtil.addClass((this||g)._hintMarker._icon,"visible"),(this||g).options.tooltips&&(this||g)._hintMarker.bindTooltip(V("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),(this||g)._layer=(this||g)._hintMarker,(this||g)._map.on("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){(this||g)._enabled&&((this||g)._enabled=!1,(this||g)._map.off("click",(this||g)._createMarker,this||g),(this||g)._hintMarker?.remove(),(this||g)._map.getContainer().classList.remove("geoman-draw-cursor"),(this||g)._map.off("mousemove",(this||g)._syncHintMarker,this||g),(this||g)._map.off("mousemove",(this||g)._showHintMarker,this||g),(this||g)._map.pm.Toolbar.toggleButton((this||g).toolbarButtonName,!1),(this||g).options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return(this||g)._enabled},toggle(g){this.enabled()?this.disable():this.enable(g)},_syncHintMarker(_){if((this||g)._hintMarker.setLatLng(_.latlng),(this||g).options.snappable){let m=_;m.target=(this||g)._hintMarker,this._handleSnapping(m)}},_createMarker(_){if(!_.latlng||(this||g).options.requireSnapToFinish&&!(this||g)._hintMarker._snapped&&!this._isFirstLayer())return;(this||g)._hintMarker._snapped||(this||g)._hintMarker.setLatLng(_.latlng);let m=(this||g)._hintMarker.getLatLng();if((this||g).textArea=this._createTextArea(),(this||g).options.textOptions?.className){let _=(this||g).options.textOptions.className.split(" ");(this||g).textArea.classList.add(..._)}let y=this._createTextIcon((this||g).textArea),v=new L.Marker(m,{textMarker:!0,_textMarkerOverPM:!0,icon:y});if(this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo((this||g)._map.pm._getContainingLayer()),v.pm){v.pm.textArea=(this||g).textArea,L.setOptions(v.pm,{removeIfEmpty:(this||g).options.textOptions?.removeIfEmpty??!0});let _=(this||g).options.textOptions?.focusAfterDraw??!0;v.pm._createTextMarker(_),(this||g).options.textOptions?.text&&v.pm.setText((this||g).options.textOptions.text)}this._fireCreate(v),this._cleanupSnapping(),this.disable(),(this||g).options.continueDrawing&&(this||g)._map.once("mousemove",(this||g)._showHintMarkerAfterMoving,this||g)},_showHintMarkerAfterMoving(_){this.enable(),(this||g)._hintMarker.setLatLng(_.latlng)},_createTextArea(){let g=document.createElement("textarea");return g.readOnly=!0,g.classList.add("pm-textarea","pm-disabled"),g},_createTextIcon(g){return L.divIcon({className:"pm-text-marker",html:g})}});var $n={enableLayerDrag(){if(!(this||g).options.draggable||!(this||g)._layer._map)return;this.disable(),(this||g)._layerDragEnabled=!0,(this||g)._map||((this||g)._map=(this||g)._layer._map),((this||g)._layer instanceof L.Marker||(this||g)._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",(this||g)._stopDOMImageDrag),(this||g)._layer.dragging&&(this||g)._layer.dragging.disable(),(this||g)._tempDragCoord=null,Dt((this||g)._layer)instanceof L.Canvas?((this||g)._layer.on("mouseout",(this||g).removeDraggingClass,this||g),(this||g)._layer.on("mouseover",(this||g).addDraggingClass,this||g)):this.addDraggingClass(),(this||g)._originalMapDragState=(this||g)._layer._map.dragging._enabled,(this||g)._safeToCacheDragState=!0;let _=this._getDOMElem();_&&(Dt((this||g)._layer)instanceof L.Canvas?((this||g)._layer.on("touchstart mousedown",(this||g)._dragMixinOnMouseDown,this||g),(this||g)._map.pm._addTouchEvents(_)):L.DomEvent.on(_,"touchstart mousedown",(this||g)._simulateMouseDownEvent,this||g)),this._fireDragEnable()},disableLayerDrag(){(this||g)._layerDragEnabled=!1,Dt((this||g)._layer)instanceof L.Canvas?((this||g)._layer.off("mouseout",(this||g).removeDraggingClass,this||g),(this||g)._layer.off("mouseover",(this||g).addDraggingClass,this||g)):this.removeDraggingClass(),(this||g)._originalMapDragState&&(this||g)._dragging&&(this||g)._map.dragging.enable(),(this||g)._safeToCacheDragState=!1,(this||g)._layer.dragging&&(this||g)._layer.dragging.disable();let _=this._getDOMElem();_&&(Dt((this||g)._layer)instanceof L.Canvas?((this||g)._layer.off("touchstart mousedown",(this||g)._dragMixinOnMouseDown,this||g),(this||g)._map.pm._removeTouchEvents(_)):L.DomEvent.off(_,"touchstart mousedown",(this||g)._simulateMouseDownEvent,this||g)),(this||g)._layerDragged&&this._fireUpdate(),(this||g)._layerDragged=!1,this._fireDragDisable()},dragging(){return(this||g)._dragging},layerDragEnabled(){return!!(this||g)._layerDragEnabled},_simulateMouseDownEvent(_){let m=_.touches?_.touches[0]:_,y={originalEvent:m,target:(this||g)._layer};return y.containerPoint=(this||g)._map.mouseEventToContainerPoint(m),y.latlng=(this||g)._map.containerPointToLatLng(y.containerPoint),this._dragMixinOnMouseDown(y),!1},_simulateMouseMoveEvent(_){let m=_.touches?_.touches[0]:_,y={originalEvent:m,target:(this||g)._layer};return y.containerPoint=(this||g)._map.mouseEventToContainerPoint(m),y.latlng=(this||g)._map.containerPointToLatLng(y.containerPoint),this._dragMixinOnMouseMove(y),!1},_simulateMouseUpEvent(_){let m={originalEvent:_.touches?_.touches[0]:_,target:(this||g)._layer};return _.type.indexOf("touch")===-1&&(m.containerPoint=(this||g)._map.mouseEventToContainerPoint(_),m.latlng=(this||g)._map.containerPointToLatLng(m.containerPoint)),this._dragMixinOnMouseUp(m),!1},_dragMixinOnMouseDown(_){if(_.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(_);let m=_._fromLayerSync,y=this._syncLayers("_dragMixinOnMouseDown",_);if((this||g)._layer instanceof L.Marker&&(!(this||g).options.snappable||m||y?this._disableSnapping():this._initSnappableMarkers()),(this||g)._layer instanceof L.CircleMarker){let _="resizeableCircleMarker";(this||g)._layer instanceof L.Circle&&(_="resizeableCircle"),!(this||g).options.snappable||m||y?(this||g)._layer.pm.options[_]?(this||g)._layer.pm._disableSnapping():(this||g)._layer.pm._disableSnappingDrag():(this||g)._layer.pm.options[_]||this._initSnappableMarkersDrag()}(this||g)._safeToCacheDragState&&((this||g)._originalMapDragState=(this||g)._layer._map.dragging._enabled,(this||g)._safeToCacheDragState=!1),(this||g)._tempDragCoord=_.latlng,L.DomEvent.on((this||g)._map.getContainer(),"touchend mouseup",(this||g)._simulateMouseUpEvent,this||g),L.DomEvent.on((this||g)._map.getContainer(),"touchmove mousemove",(this||g)._simulateMouseMoveEvent,this||g)},_dragMixinOnMouseMove(_){this._overwriteEventIfItComesFromMarker(_);let m=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",_),(this||g)._dragging||((this||g)._dragging=!0,L.DomUtil.addClass(m,"leaflet-pm-dragging"),(this||g)._layer instanceof L.Marker||(this||g)._layer.bringToFront(),(this||g)._originalMapDragState&&(this||g)._map.dragging.disable(),this._fireDragStart()),(this||g)._tempDragCoord||((this||g)._tempDragCoord=_.latlng),this._onLayerDrag(_),(this||g)._layer instanceof L.CircleMarker&&(this||g)._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(_){let m=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",_),(this||g)._originalMapDragState&&(this||g)._map.dragging.enable(),(this||g)._safeToCacheDragState=!0,L.DomEvent.off((this||g)._map.getContainer(),"touchmove mousemove",(this||g)._simulateMouseMoveEvent,this||g),L.DomEvent.off((this||g)._map.getContainer(),"touchend mouseup",(this||g)._simulateMouseUpEvent,this||g),!!(this||g)._dragging&&((this||g)._layer instanceof L.CircleMarker&&(this||g)._layer.pm._updateHiddenPolyCircle(),(this||g)._layerDragged=!0,window.setTimeout((()=>{(this||g)._dragging=!1,m&&L.DomUtil.removeClass(m,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),(this||g)._layerEdited=!0}),10),!0)},_onLayerDrag(_){let{latlng:m}=_,y={lat:m.lat-(this||g)._tempDragCoord.lat,lng:m.lng-(this||g)._tempDragCoord.lng},r=g=>g.map((g=>{if(Array.isArray(g))return r(g);let _={lat:g.lat+y.lat,lng:g.lng+y.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_}));if((this||g)._layer instanceof L.Circle&&(this||g)._layer.options.resizeableCircle||(this||g)._layer instanceof L.CircleMarker&&(this||g)._layer.options.resizeableCircleMarker){let _=r([(this||g)._layer.getLatLng()]);(this||g)._layer.setLatLng(_[0]),this._fireChange((this||g)._layer.getLatLng(),"Edit")}else if((this||g)._layer instanceof L.CircleMarker||(this||g)._layer instanceof L.Marker){let _=(this||g)._layer.getLatLng();(this||g)._layer._snapped&&(_=(this||g)._layer._orgLatLng);let m=r([_]);(this||g)._layer.setLatLng(m[0]),this._fireChange((this||g)._layer.getLatLng(),"Edit")}else if((this||g)._layer instanceof L.ImageOverlay){let _=r([(this||g)._layer.getBounds().getNorthWest(),(this||g)._layer.getBounds().getSouthEast()]);(this||g)._layer.setBounds(_),this._fireChange((this||g)._layer.getBounds(),"Edit")}else{let _=r((this||g)._layer.getLatLngs());(this||g)._layer.setLatLngs(_),this._fireChange((this||g)._layer.getLatLngs(),"Edit")}(this||g)._tempDragCoord=m,_.layer=(this||g)._layer,this._fireDrag(_)},addDraggingClass(){let g=this._getDOMElem();g&&L.DomUtil.addClass(g,"leaflet-pm-draggable")},removeDraggingClass(){let g=this._getDOMElem();g&&L.DomUtil.removeClass(g,"leaflet-pm-draggable")},_getDOMElem(){let _=null;return(this||g)._layer._path?_=(this||g)._layer._path:(this||g)._layer._renderer&&(this||g)._layer._renderer._container?_=(this||g)._layer._renderer._container:(this||g)._layer._image?_=(this||g)._layer._image:(this||g)._layer._icon&&(_=(this||g)._layer._icon),_},_overwriteEventIfItComesFromMarker(_){_.target.getLatLng&&(!_.target._radius||_.target._radius<=10)&&(_.containerPoint=(this||g)._map.mouseEventToContainerPoint(_.originalEvent),_.latlng=(this||g)._map.containerPointToLatLng(_.containerPoint))},_syncLayers(_,m){if(this.enabled())return!1;if(!m._fromLayerSync&&(this||g)._layer===m.target&&(this||g).options.syncLayersOnDrag){m._fromLayerSync=!0;let y=[];if(L.Util.isArray((this||g).options.syncLayersOnDrag))y=(this||g).options.syncLayersOnDrag,(this||g).options.syncLayersOnDrag.forEach((g=>{g instanceof L.LayerGroup&&(y=y.concat(g.pm.getLayers(!0)))}));else if((this||g).options.syncLayersOnDrag===!0&&(this||g)._parentLayerGroup)for(let _ in(this||g)._parentLayerGroup){let m=(this||g)._parentLayerGroup[_];m.pm&&(y=m.pm.getLayers(!0))}return L.Util.isArray(y)&&y.length>0&&(y=y.filter((g=>!!g.pm)).filter((g=>!!g.pm.options.draggable)),y.forEach((y=>{y!==(this||g)._layer&&y.pm[_]&&(y._snapped=!1,y.pm[_](m))}))),y.length>0}return!1},_stopDOMImageDrag(g){return g.preventDefault(),!1}},Zn=$n;var Wn=xt(zi());function L_(g,_,m,y){return m.unproject(_.transform(m.project(g,y)),y)}function or(g,_,m){let y=m.getMaxZoom();if(y===1/0&&(y=m.getZoom()),L.Util.isArray(g)){let y=[];return g.forEach((g=>{y.push(or(g,_,m))})),y}return g instanceof L.LatLng?L_(g,_,m,y):null}function Gt(g,_){_ instanceof L.Layer&&(_=_.getLatLng());let m=g.getMaxZoom();return m===1/0&&(m=g.getZoom()),g.project(_,m)}function Re(g,_){let m=g.getMaxZoom();return m===1/0&&(m=g.getZoom()),g.unproject(_,m)}var Qn={_onRotateStart(_){this._preventRenderingMarkers(!0),(this||g)._rotationOriginLatLng=this._getRotationCenter().clone(),(this||g)._rotationOriginPoint=Gt((this||g)._map,(this||g)._rotationOriginLatLng),(this||g)._rotationStartPoint=Gt((this||g)._map,_.target.getLatLng()),(this||g)._initialRotateLatLng=vt((this||g)._layer),(this||g)._startAngle=this.getAngle();let m=vt((this||g)._rotationLayer,(this||g)._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart((this||g)._rotationLayer,m),this._fireRotationStart((this||g)._map,m)},_onRotate(_){let m=Gt((this||g)._map,_.target.getLatLng()),y=(this||g)._rotationStartPoint,v=(this||g)._rotationOriginPoint,k=Math.atan2(m.y-v.y,m.x-v.x)-Math.atan2(y.y-v.y,y.x-v.x);(this||g)._layer.setLatLngs(this._rotateLayer(k,(this||g)._initialRotateLatLng,(this||g)._rotationOriginLatLng,L.PM.Matrix.init(),(this||g)._map));let M=this||g;function a(g,_=[],m=-1){if(m>-1&&_.push(m),L.Util.isArray(g[0]))g.forEach(((g,m)=>a(g,_.slice(),m)));else{let m=_.length>0?(0,Wn.default)(M._markers,_):M._markers[0];g.forEach(((g,_)=>{m[_].setLatLng(g)}))}}a((this||g)._layer.getLatLngs());let x=vt((this||g)._rotationLayer);(this||g)._rotationLayer.setLatLngs(this._rotateLayer(k,(this||g)._rotationLayer.pm._rotateOrgLatLng,(this||g)._rotationOriginLatLng,L.PM.Matrix.init(),(this||g)._map));let w=k*180/Math.PI;w=w<0?w+360:w;let C=w+(this||g)._startAngle;this._setAngle(C),(this||g)._rotationLayer.pm._setAngle(C),this._fireRotation((this||g)._rotationLayer,w,x),this._fireRotation((this||g)._map,w,x),(this||g)._rotationLayer.pm._fireChange((this||g)._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let _=(this||g)._startAngle;delete(this||g)._rotationOriginLatLng,delete(this||g)._rotationOriginPoint,delete(this||g)._rotationStartPoint,delete(this||g)._initialRotateLatLng,delete(this||g)._startAngle;let m=vt((this||g)._rotationLayer,(this||g)._rotationLayer.pm._rotateOrgLatLng);(this||g)._rotationLayer.pm._rotateOrgLatLng=vt((this||g)._rotationLayer),this._fireRotationEnd((this||g)._rotationLayer,_,m),this._fireRotationEnd((this||g)._map,_,m),(this||g)._rotationLayer.pm._fireEdit((this||g)._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),(this||g)._layerRotated=!0},_rotateLayer(_,m,y,L,v){let k=Gt(v,y);return(this||g)._matrix=L.clone().rotate(_,k).flip(),or(m,(this||g)._matrix,v)},_setAngle(_){_=_<0?_+360:_,(this||g)._angle=_%360},_getRotationCenter(){if((this||g)._rotationCenter)return(this||g)._rotationCenter;let _=L.polygon((this||g)._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo((this||g)._layer._map),m=_.getCenter();return _.removeFrom((this||g)._layer._map),m},enableRotate(){if(!(this||g).options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),(this||g)._layer instanceof L.Rectangle&&(this||g)._angle===void 0&&this.setInitAngle(ke((this||g)._layer._map,(this||g)._layer.getLatLngs()[0][0],(this||g)._layer.getLatLngs()[0][1])||0);let _={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};(this||g)._rotatePoly=L.polygon((this||g)._layer.getLatLngs(),_),(this||g)._rotatePoly._pmTempLayer=!0,(this||g)._rotatePoly.addTo((this||g)._layer._map),(this||g)._rotatePoly.pm._setAngle(this.getAngle()),(this||g)._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),(this||g)._rotatePoly.pm.setOptions((this||g)._layer._map.pm.getGlobalOptions()),(this||g)._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),(this||g)._rotatePoly.pm._rotationLayer=(this||g)._layer,(this||g)._rotatePoly.pm.enable(),(this||g)._rotateOrgLatLng=vt((this||g)._layer),(this||g)._rotateEnabled=!0,(this||g)._layer.on("remove",(this||g).disableRotate,this||g),this._fireRotationEnable((this||g)._layer),this._fireRotationEnable((this||g)._layer._map)},disableRotate(){this.rotateEnabled()&&((this||g)._rotatePoly.pm._layerRotated&&this._fireUpdate(),(this||g)._rotatePoly.pm._layerRotated=!1,(this||g)._rotatePoly.pm.disable(),(this||g)._rotatePoly.remove(),(this||g)._rotatePoly.pm.setOptions({rotate:!1}),(this||g)._rotatePoly=void 0,(this||g)._rotateOrgLatLng=void 0,(this||g)._layer.off("remove",(this||g).disableRotate,this||g),(this||g)._rotateEnabled=!1,this._fireRotationDisable((this||g)._layer),this._fireRotationDisable((this||g)._layer._map))},rotateEnabled(){return!!(this||g)._rotateEnabled},rotateLayer(_){let m=this.getAngle(),y=(this||g)._layer.getLatLngs(),v=_*(Math.PI/180);(this||g)._layer.setLatLngs(this._rotateLayer(v,(this||g)._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),(this||g)._layer._map)),(this||g)._rotateOrgLatLng=L.polygon((this||g)._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+_),this.rotateEnabled()&&(this||g)._rotatePoly&&(this||g)._rotatePoly.pm.enabled()&&((this||g)._rotatePoly.setLatLngs(this._rotateLayer(v,(this||g)._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),(this||g)._rotatePoly._map)),(this||g)._rotatePoly.pm._initMarkers());let k=this.getAngle()-m;k=k<0?k+360:k,(this||g)._startAngle=m,this._fireRotation((this||g)._layer,k,y,(this||g)._layer),this._fireRotation((this||g)._map||(this||g)._layer._map,k,y,(this||g)._layer),delete(this||g)._startAngle,this._fireChange((this||g)._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(g){let _=g-this.getAngle();this.rotateLayer(_)},getAngle(){return(this||g)._angle||0},setInitAngle(g){this._setAngle(g)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(_){(this||g)._rotationCenter=_,(this||g)._rotatePoly&&(this||g)._rotatePoly.pm.setRotationCenter(_)}},ta=Qn;var ea=L.Class.extend({includes:[Zn,Wr,ta,Vr],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(_){L.Util.setOptions(this||g,_)},getOptions(){return(this||g).options},applyOptions(){},isPolygon(){return(this||g)._layer instanceof L.Polygon},getShape(){return(this||g)._shape},_setPane(_,m){m==="layerPane"?_.options.pane=(this||g)._map.pm.globalOptions.panes&&(this||g)._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?_.options.pane=(this||g)._map.pm.globalOptions.panes&&(this||g)._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(_.options.pane=(this||g)._map.pm.globalOptions.panes&&(this||g)._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){((this||g)._map||(this||g)._layer._map).pm.removeLayer({target:(this||g)._layer})},_vertexValidation(_,m){let y=m.target,L={layer:(this||g)._layer,marker:y,event:m},v="";return _==="move"?v="moveVertexValidation":_==="add"?v="addVertexValidation":_==="remove"&&(v="removeVertexValidation"),(this||g).options[v]&&typeof(this||g).options[v]=="function"&&!(this||g).options[v](L)?(_==="move"&&(y._cancelDragEventChain=y.getLatLng()),!1):(y._cancelDragEventChain=null,!0)},_vertexValidationDrag(g){return!g._cancelDragEventChain||(g._latlng=g._cancelDragEventChain,g.update(),!1)},_vertexValidationDragEnd(g){return!g._cancelDragEventChain||(g._cancelDragEventChain=null,!1)}}),ia=ea;ia.LayerGroup=L.Class.extend({initialize(_){(this||g)._layerGroup=_,(this||g)._layers=this.getLayers(),this._getMap(),(this||g)._layers.forEach((g=>this._initLayer(g)));let e=_=>{if(_.layer._pmTempLayer)return;(this||g)._layers=this.getLayers();let m=(this||g)._layers.filter((_=>!_.pm._parentLayerGroup||!((this||g)._layerGroup._leaflet_id in _.pm._parentLayerGroup)));m.forEach((g=>{this._initLayer(g)})),m.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};(this||g)._layerGroup.on("layeradd",L.Util.throttle(e,100,this||g),this||g),(this||g)._layerGroup.on("layerremove",(g=>{this._removeLayerFromGroup(g.target)}),this||g);let i=_=>{_.target._pmTempLayer||((this||g)._layers=this.getLayers())};(this||g)._layerGroup.on("layerremove",L.Util.throttle(i,100,this||g),this||g)},enable(_,m=[]){m.length===0&&((this||g)._layers=this.getLayers()),(this||g)._options=_,(this||g)._layers.forEach((g=>{g instanceof L.LayerGroup?m.indexOf(g._leaflet_id)===-1&&(m.push(g._leaflet_id),g.pm.enable(_,m)):g.pm.enable(_)}))},disable(_=[]){_.length===0&&((this||g)._layers=this.getLayers()),(this||g)._layers.forEach((g=>{g instanceof L.LayerGroup?_.indexOf(g._leaflet_id)===-1&&(_.push(g._leaflet_id),g.pm.disable(_)):g.pm.disable()}))},enabled(_=[]){return _.length===0&&((this||g)._layers=this.getLayers()),!!(this||g)._layers.find((g=>g instanceof L.LayerGroup?_.indexOf(g._leaflet_id)===-1&&(_.push(g._leaflet_id),g.pm.enabled(_)):g.pm.enabled()))},toggleEdit(_,m=[]){m.length===0&&((this||g)._layers=this.getLayers()),(this||g)._options=_,(this||g)._layers.forEach((g=>{g instanceof L.LayerGroup?m.indexOf(g._leaflet_id)===-1&&(m.push(g._leaflet_id),g.pm.toggleEdit(_,m)):g.pm.toggleEdit(_)}))},_initLayer(_){let m=L.Util.stamp((this||g)._layerGroup);_.pm._parentLayerGroup||(_.pm._parentLayerGroup={}),_.pm._parentLayerGroup[m]=(this||g)._layerGroup},_removeLayerFromGroup(_){if(_.pm&&_.pm._layerGroup){let m=L.Util.stamp((this||g)._layerGroup);delete _.pm._layerGroup[m]}},dragging(){return(this||g)._layers=this.getLayers(),!!(this||g)._layers&&!!(this||g)._layers.find((g=>g.pm.dragging()))},getOptions(){return(this||g).options},_getMap(){return(this||g)._map||(this||g)._layers.find((g=>!!g._map))?._map||null},getLayers(_=!1,m=!0,y=!0,v=[]){let k=[];return _?(this||g)._layerGroup.getLayers().forEach((g=>{k.push(g),g instanceof L.LayerGroup&&v.indexOf(g._leaflet_id)===-1&&(v.push(g._leaflet_id),k=k.concat(g.pm.getLayers(!0,!0,!0,v)))})):k=(this||g)._layerGroup.getLayers(),y&&(k=k.filter((g=>!(g instanceof L.LayerGroup)))),m&&(k=k.filter((g=>!!g.pm)),k=k.filter((g=>!g._pmTempLayer)),k=k.filter((g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1))),k},setOptions(_,m=[]){m.length===0&&((this||g)._layers=this.getLayers()),(this||g).options=_,(this||g)._layers.forEach((g=>{g.pm&&(g instanceof L.LayerGroup?m.indexOf(g._leaflet_id)===-1&&(m.push(g._leaflet_id),g.pm.setOptions(_,m)):g.pm.setOptions(_))}))}});ia.Marker=ia.extend({_shape:"Marker",initialize(_){(this||g)._layer=_,(this||g)._enabled=!1,(this||g)._layer.on("dragend",(this||g)._onDragEnd,this||g)},enable(_={draggable:!0}){L.Util.setOptions(this||g,_),(this||g).options.allowEditing&&(this||g)._layer._map?((this||g)._map=(this||g)._layer._map,this.enabled()&&this.disable(),this.applyOptions(),(this||g)._layer.on("remove",(this||g).disable,this||g),(this||g)._enabled=!0,this._fireEnable()):this.disable()},disable(){this.enabled()&&(this.disableLayerDrag(),(this||g)._layer.off("remove",(this||g).disable,this||g),(this||g)._layer.off("contextmenu",(this||g)._removeMarker,this||g),(this||g)._layerEdited&&this._fireUpdate(),(this||g)._layerEdited=!1,this._fireDisable(),(this||g)._enabled=!1)},enabled(){return(this||g)._enabled},toggleEdit(g){this.enabled()?this.disable():this.enable(g)},applyOptions(){(this||g).options.snappable?this._initSnappableMarkers():this._disableSnapping(),(this||g).options.draggable?this.enableLayerDrag():this.disableLayerDrag(),(this||g).options.preventMarkerRemoval||(this||g)._layer.on("contextmenu",(this||g)._removeMarker,this||g)},_removeMarker(_){let m=_.target;m.remove(),this._fireRemove(m),this._fireRemove((this||g)._map,m)},_onDragEnd(){this._fireEdit(),(this||g)._layerEdited=!0},_initSnappableMarkers(){let _=(this||g)._layer;(this||g).options.snapDistance=(this||g).options.snapDistance||30,(this||g).options.snapSegment=(this||g).options.snapSegment===void 0||(this||g).options.snapSegment,_.off("pm:drag",(this||g)._handleSnapping,this||g),_.on("pm:drag",(this||g)._handleSnapping,this||g),_.off("pm:dragend",(this||g)._cleanupSnapping,this||g),_.on("pm:dragend",(this||g)._cleanupSnapping,this||g),_.off("pm:dragstart",(this||g)._unsnap,this||g),_.on("pm:dragstart",(this||g)._unsnap,this||g)},_disableSnapping(){let _=(this||g)._layer;_.off("pm:drag",(this||g)._handleSnapping,this||g),_.off("pm:dragend",(this||g)._cleanupSnapping,this||g),_.off("pm:dragstart",(this||g)._unsnap,this||g)}});var ra=xt(zi());var na={filterMarkerGroup(){(this||g).markerCache=[],this.createCache(),(this||g)._layer.on("pm:edit",(this||g).createCache,this||g),this.applyLimitFilters({}),(this||g).throttledApplyLimitFilters||((this||g).throttledApplyLimitFilters=L.Util.throttle((this||g).applyLimitFilters,100,this||g)),(this||g)._layer.on("pm:disable",(this||g)._removeMarkerLimitEvents,this||g),(this||g)._layer.on("remove",(this||g)._removeMarkerLimitEvents,this||g),(this||g).options.limitMarkersToCount>-1&&((this||g)._layer.on("pm:vertexremoved",(this||g)._initMarkers,this||g),(this||g)._map.on("mousemove",(this||g).throttledApplyLimitFilters,this||g))},_removeMarkerLimitEvents(){(this||g)._map.off("mousemove",(this||g).throttledApplyLimitFilters,this||g),(this||g)._layer.off("pm:edit",(this||g).createCache,this||g),(this||g)._layer.off("pm:disable",(this||g)._removeMarkerLimitEvents,this||g),(this||g)._layer.off("pm:vertexremoved",(this||g)._initMarkers,this||g)},createCache(){let _=[...(this||g)._markerGroup.getLayers(),...(this||g).markerCache];(this||g).markerCache=_.filter(((g,_,m)=>m.indexOf(g)===_))},_removeFromCache(_){let m=(this||g).markerCache.indexOf(_);m>-1&&(this||g).markerCache.splice(m,1)},renderLimits(_){(this||g).markerCache.forEach((m=>{_.includes(m)?(this||g)._markerGroup.addLayer(m):(this||g)._markerGroup.removeLayer(m)}))},applyLimitFilters({latlng:_={lat:0,lng:0}}){if((this||g)._preventRenderMarkers)return;let m=[...this._filterClosestMarkers(_)];this.renderLimits(m)},_filterClosestMarkers(_){let m=[...(this||g).markerCache],y=(this||g).options.limitMarkersToCount;return y===-1?m:(m.sort(((g,m)=>{let y=g._latlng.distanceTo(_),L=m._latlng.distanceTo(_);return y-L})),m.filter(((g,_)=>!(y>-1)||_<y)))},_preventRenderMarkers:!1,_preventRenderingMarkers(_){(this||g)._preventRenderMarkers=!!_}},aa=na;ia.Line=ia.extend({includes:[aa],_shape:"Line",initialize(_){(this||g)._layer=_,(this||g)._enabled=!1},enable(_){if(L.Util.setOptions(this||g,_),(this||g)._map=(this||g)._layer._map,!!(this||g)._map){if(!(this||g).options.allowEditing){this.disable();return}this.enabled()&&this.disable(),(this||g)._enabled=!0,this._initMarkers(),this.applyOptions(),(this||g)._layer.on("remove",(this||g).disable,this||g),(this||g).options.allowSelfIntersection||(this||g)._layer.on("pm:vertexremoved",(this||g)._handleSelfIntersectionOnVertexRemoval,this||g),(this||g).options.allowSelfIntersection?(this||g).cachedColor=void 0:((this||g)._layer.options.color!=="#f00000ff"?((this||g).cachedColor=(this||g)._layer.options.color,(this||g).isRed=!1):(this||g).isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||(this||g)._dragging)return;(this||g)._enabled=!1,(this||g)._markerGroup.clearLayers(),(this||g)._markerGroup.removeFrom((this||g)._map),(this||g)._layer.off("remove",(this||g).disable,this||g),(this||g).options.allowSelfIntersection||(this||g)._layer.off("pm:vertexremoved",(this||g)._handleSelfIntersectionOnVertexRemoval,this||g);let _=(this||g)._layer._path?(this||g)._layer._path:(this||g)._layer._renderer._container;L.DomUtil.removeClass(_,"leaflet-pm-draggable"),(this||g)._layerEdited&&this._fireUpdate(),(this||g)._layerEdited=!1,this._fireDisable()},enabled(){return(this||g)._enabled},toggleEdit(g){return this.enabled()?this.disable():this.enable(g),this.enabled()},applyOptions(){(this||g).options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let _=(this||g)._map,m=(this||g)._layer.getLatLngs();(this||g)._markerGroup&&((this||g)._markerGroup.removeFrom(_),(this||g)._markerGroup.clearLayers()),(this||g)._markerGroup=new L.FeatureGroup,(this||g)._markerGroup._pmTempLayer=!0;let i=_=>{if(Array.isArray(_[0]))return _.map(i,this||g);let m=_.map((this||g)._createMarker,this||g);return(this||g).options.hideMiddleMarkers!==!0&&_.map(((g,y)=>{let L=this.isPolygon()?(y+1)%_.length:y+1;return this._createMiddleMarker(m[y],m[L])})),m};(this||g)._markers=i(m),this.filterMarkerGroup(),_.addLayer((this||g)._markerGroup)},_createMarker(_){let m=new L.Marker(_,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,(this||g).options.rotate?(m.on("dragstart",(this||g)._onRotateStart,this||g),m.on("drag",(this||g)._onRotate,this||g),m.on("dragend",(this||g)._onRotateEnd,this||g)):(m.on("click",(this||g)._onVertexClick,this||g),m.on("dragstart",(this||g)._onMarkerDragStart,this||g),m.on("move",(this||g)._onMarkerDrag,this||g),m.on("dragend",(this||g)._onMarkerDragEnd,this||g),(this||g).options.preventMarkerRemoval||m.on((this||g).options.removeVertexOn,(this||g)._removeMarker,this||g)),(this||g)._markerGroup.addLayer(m),m},_createMiddleMarker(_,m){if(!_||!m)return!1;let y=L.PM.Utils.calcMiddleLatLng((this||g)._map,_.getLatLng(),m.getLatLng()),v=this._createMarker(y),k=L.divIcon({className:"marker-icon marker-icon-middle"});return v.setIcon(k),v.leftM=_,v.rightM=m,_._middleMarkerNext=v,m._middleMarkerPrev=v,v.on((this||g).options.addVertexOn,(this||g)._onMiddleMarkerClick,this||g),v.on("movestart",(this||g)._onMiddleMarkerMoveStart,this||g),v},_onMiddleMarkerClick(g){let _=g.target;if(!this._vertexValidation("add",g))return;let m=L.divIcon({className:"marker-icon"});_.setIcon(m),this._addMarker(_,_.leftM,_.rightM)},_onMiddleMarkerMoveStart(_){let m=_.target;m.on("moveend",(this||g)._onMiddleMarkerMoveEnd,this||g),this._vertexValidation("add",_)?(m._dragging=!0,this._addMarker(m,m.leftM,m.rightM)):m.on("move",(this||g)._onMiddleMarkerMovePrevent,this||g)},_onMiddleMarkerMovePrevent(g){let _=g.target;this._vertexValidationDrag(_)},_onMiddleMarkerMoveEnd(_){let m=_.target;if(m.off("move",(this||g)._onMiddleMarkerMovePrevent,this||g),m.off("moveend",(this||g)._onMiddleMarkerMoveEnd,this||g),!this._vertexValidationDragEnd(m))return;let y=L.divIcon({className:"marker-icon"});m.setIcon(y),setTimeout((()=>{delete m._dragging}),100)},_addMarker(_,m,y){_.off("movestart",(this||g)._onMiddleMarkerMoveStart,this||g),_.off((this||g).options.addVertexOn,(this||g)._onMiddleMarkerClick,this||g);let v=_.getLatLng(),k=(this||g)._layer._latlngs;delete _.leftM,delete _.rightM;let{indexPath:M,index:x,parentPath:w}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m),C=M.length>1?(0,ra.default)(k,w):k,B=M.length>1?(0,ra.default)((this||g)._markers,w):(this||g)._markers;C.splice(x+1,0,v),B.splice(x+1,0,_),(this||g)._layer.setLatLngs(k),(this||g).options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(m,_),this._createMiddleMarker(_,y)),this._fireEdit(),(this||g)._layerEdited=!0,this._fireChange((this||g)._layer.getLatLngs(),"Edit"),this._fireVertexAdded(_,L.PM.Utils.findDeepMarkerIndex((this||g)._markers,_).indexPath,v),(this||g).options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return zt((this||g)._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&((this||g)._layer.setLatLngs((this||g)._coordsBeforeEdit),(this||g)._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(_){let m,y,L=(this||g)._layer;if((this||g).options.allowSelfIntersection?m=!1:(y=zt((this||g)._layer.toGeoJSON(15)),m=y.features.length>0),m){if(!(this||g).options.allowSelfIntersection&&(this||g).options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle((this||g)._markers,!0),(this||g).isRed)return m;_?this._flashLayer():(L.setStyle({color:"#f00000ff"}),(this||g).isRed=!0),this._fireIntersect(y)}else L.setStyle({color:(this||g).cachedColor}),(this||g).isRed=!1,!(this||g).options.allowSelfIntersection&&(this||g).options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle((this||g)._markers,!1);return m},_flashLayer(){(this||g).cachedColor||((this||g).cachedColor=(this||g)._layer.options.color),(this||g)._layer.setStyle({color:"#f00000ff"}),(this||g).isRed=!0,window.setTimeout((()=>{(this||g)._layer.setStyle({color:(this||g).cachedColor}),(this||g).isRed=!1}),200)},_updateDisabledMarkerStyle(g,_){g.forEach((g=>{Array.isArray(g)?this._updateDisabledMarkerStyle(g,_):g._icon&&(_&&!this._checkMarkerAllowedToDrag(g)?L.DomUtil.addClass(g._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(g._icon,"vertexmarker-disabled"))}))},_removeMarker(_){let m=_.target;if(!this._vertexValidation("remove",_))return;(this||g).options.allowSelfIntersection||((this||g)._coordsBeforeEdit=vt((this||g)._layer,(this||g)._layer.getLatLngs()));let y=(this||g)._layer.getLatLngs(),{indexPath:v,index:k,parentPath:M}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);if(!v)return;let x=v.length>1?(0,ra.default)(y,M):y,w=v.length>1?(0,ra.default)((this||g)._markers,M):(this||g)._markers,C=M[M.length-1]>0&&(this||g)._layer instanceof L.Polygon;if(!(this||g).options.removeLayerBelowMinVertexCount&&!C&&(x.length<=2||this.isPolygon()&&x.length<=3)){this._flashLayer();return}x.splice(k,1),(this||g)._layer.setLatLngs(y),this.isPolygon()&&x.length<=2&&x.splice(0,x.length);let B=!1;if(x.length<=1&&(x.splice(0,x.length),M.length>1&&v.length>1&&(y=ve(y)),(this||g)._layer.setLatLngs(y),this._initMarkers(),B=!0),be(y)||(this||g)._layer.remove(),y=ve(y),(this||g)._layer.setLatLngs(y),(this||g)._markers=ve((this||g)._markers),!B&&(w=v.length>1?(0,ra.default)((this||g)._markers,M):(this||g)._markers,m._middleMarkerPrev&&((this||g)._markerGroup.removeLayer(m._middleMarkerPrev),this._removeFromCache(m._middleMarkerPrev)),m._middleMarkerNext&&((this||g)._markerGroup.removeLayer(m._middleMarkerNext),this._removeFromCache(m._middleMarkerNext)),(this||g)._markerGroup.removeLayer(m),this._removeFromCache(m),w)){let _,m;if(this.isPolygon()?(_=(k+1)%w.length,m=(k+(w.length-1))%w.length):(m=k-1<0?void 0:k-1,_=k+1>=w.length?void 0:k+1),_!==m){let y=w[m],L=w[_];(this||g).options.hideMiddleMarkers!==!0&&this._createMiddleMarker(y,L)}w.splice(k,1)}this._fireEdit(),(this||g)._layerEdited=!0,this._fireVertexRemoved(m,v),this._fireChange((this||g)._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(_){let m=(this||g)._layer.getLatLngs(),y=_.getLatLng(),{indexPath:v,index:k,parentPath:M}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,_);(v.length>1?(0,ra.default)(m,M):m).splice(k,1,y),(this||g)._layer.setLatLngs(m)},_getNeighborMarkers(_){let{indexPath:m,index:y,parentPath:v}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,_),k=m.length>1?(0,ra.default)((this||g)._markers,v):(this||g)._markers,M=(y+1)%k.length,x=(y+(k.length-1))%k.length,w=k[x],C=k[M];return{prevMarker:w,nextMarker:C}},_checkMarkerAllowedToDrag(_){let{prevMarker:m,nextMarker:y}=this._getNeighborMarkers(_),v=L.polyline([m.getLatLng(),_.getLatLng()]),k=L.polyline([_.getLatLng(),y.getLatLng()]),M=sn((this||g)._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length,x=sn((this||g)._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return _.getLatLng()===(this||g)._markers[0][0].getLatLng()?x+=1:_.getLatLng()===(this||g)._markers[0][(this||g)._markers[0].length-1].getLatLng()&&(M+=1),!(M<=2&&x<=2)},_onMarkerDragStart(_){let m=_.target;if((this||g).cachedColor||((this||g).cachedColor=(this||g)._layer.options.color),!this._vertexValidation("move",_))return;let{indexPath:y}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);this._fireMarkerDragStart(_,y),(this||g).options.allowSelfIntersection||((this||g)._coordsBeforeEdit=vt((this||g)._layer,(this||g)._layer.getLatLngs())),!(this||g).options.allowSelfIntersection&&(this||g).options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?(this||g)._markerAllowedToDrag=this._checkMarkerAllowedToDrag(m):(this||g)._markerAllowedToDrag=null},_onMarkerDrag(_){let m=_.target;if(!this._vertexValidationDrag(m))return;let{indexPath:y,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);if(!y)return;if(!(this||g).options.allowSelfIntersection&&(this||g).options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&(this||g)._markerAllowedToDrag===!1){(this||g)._layer.setLatLngs((this||g)._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(m);let M=y.length>1?(0,ra.default)((this||g)._markers,k):(this||g)._markers,x=(v+1)%M.length,w=(v+(M.length-1))%M.length,C=m.getLatLng(),B=M[w].getLatLng(),I=M[x].getLatLng();if(m._middleMarkerNext){let _=L.PM.Utils.calcMiddleLatLng((this||g)._map,C,I);m._middleMarkerNext.setLatLng(_)}if(m._middleMarkerPrev){let _=L.PM.Utils.calcMiddleLatLng((this||g)._map,C,B);m._middleMarkerPrev.setLatLng(_)}(this||g).options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(_,y),this._fireChange((this||g)._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(_){let m=_.target;if(!this._vertexValidationDragEnd(m))return;let{indexPath:y}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m),v=!(this||g).options.allowSelfIntersection&&this.hasSelfIntersection();v&&(this||g).options.allowSelfIntersectionEdit&&(this||g)._markerAllowedToDrag&&(v=!1);let k=!(this||g).options.allowSelfIntersection&&v;this._fireMarkerDragEnd(_,y,k),k?((this||g)._layer.setLatLngs((this||g)._coordsBeforeEdit),(this||g)._coordsBeforeEdit=null,this._initMarkers(),(this||g).options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(_,y)):(!(this||g).options.allowSelfIntersection&&(this||g).options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),(this||g)._layerEdited=!0,this._fireChange((this||g)._layer.getLatLngs(),"Edit"))},_onVertexClick(_){let m=_.target;if(m._dragging)return;let{indexPath:y}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);this._fireVertexClick(_,y)}});ia.Polygon=ia.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(_){let{prevMarker:m,nextMarker:y}=this._getNeighborMarkers(_),v=L.polyline([m.getLatLng(),_.getLatLng()]),k=L.polyline([_.getLatLng(),y.getLatLng()]),M=sn((this||g)._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length,x=sn((this||g)._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return!(M<=2&&x<=2)}});ia.Rectangle=ia.Polygon.extend({_shape:"Rectangle",_initMarkers(){let _=(this||g)._map,m=this._findCorners();(this||g)._markerGroup&&(this||g)._markerGroup.clearLayers(),(this||g)._markerGroup=new L.FeatureGroup,(this||g)._markerGroup._pmTempLayer=!0,_.addLayer((this||g)._markerGroup),(this||g)._markers=[],(this||g)._markers[0]=m.map((this||g)._createMarker,this||g),[(this||g)._cornerMarkers]=(this||g)._markers,(this||g)._layer.getLatLngs()[0].forEach(((_,m)=>{let y=(this||g)._cornerMarkers.find((g=>g._index===m));y&&y.setLatLng(_)}))},applyOptions(){(this||g).options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(_,m){let y=new L.Marker(_,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(y,"vertexPane"),y._origLatLng=_,y._index=m,y._pmTempLayer=!0,y.on("click",(this||g)._onVertexClick,this||g),(this||g)._markerGroup.addLayer(y),y},_addMarkerEvents(){(this||g)._markers[0].forEach((_=>{_.on("dragstart",(this||g)._onMarkerDragStart,this||g),_.on("drag",(this||g)._onMarkerDrag,this||g),_.on("dragend",(this||g)._onMarkerDragEnd,this||g),(this||g).options.preventMarkerRemoval||_.on("contextmenu",(this||g)._removeMarker,this||g)}))},_removeMarker(){return null},_onMarkerDragStart(_){if(!this._vertexValidation("move",_))return;let m=_.target,y=(this||g)._cornerMarkers;m._oppositeCornerLatLng=y.find((g=>g._index===(m._index+2)%4)).getLatLng(),m._snapped=!1;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);this._fireMarkerDragStart(_,v)},_onMarkerDrag(_){let m=_.target;if(!this._vertexValidationDrag(m)||m._index===void 0)return;this._adjustRectangleForMarkerMove(m);let{indexPath:y}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);this._fireMarkerDrag(_,y),this._fireChange((this||g)._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(_){let m=_.target;if(!this._vertexValidationDragEnd(m))return;(this||g)._cornerMarkers.forEach((g=>{delete g._oppositeCornerLatLng}));let{indexPath:y}=L.PM.Utils.findDeepMarkerIndex((this||g)._markers,m);this._fireMarkerDragEnd(_,y),this._fireEdit(),(this||g)._layerEdited=!0,this._fireChange((this||g)._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(_){L.extend(_._origLatLng,_._latlng);let m=L.PM.Utils._getRotatedRectangle(_.getLatLng(),_._oppositeCornerLatLng,this.getAngle(),(this||g)._map);(this||g)._layer.setLatLngs(m),this._adjustAllMarkers(_),(this||g)._layer.redraw()},_adjustAllMarkers(_){let m=(this||g)._layer.getLatLngs()[0];if(m&&m.length!==4&&m.length>0)m.forEach(((_,m)=>{(this||g)._cornerMarkers[m].setLatLng(_)})),(this||g)._cornerMarkers.slice(m.length).forEach((g=>{g.setLatLng(m[0])}));else if(m&&m.length){let y=m.findIndex((g=>_.getLatLng().equals(g)));y>-1?((this||g)._cornerMarkers[(_._index+1)%4].setLatLng(m[(y+1)%4]),(this||g)._cornerMarkers[(_._index+2)%4].setLatLng(m[(y+2)%4]),(this||g)._cornerMarkers[(_._index+3)%4].setLatLng(m[(y+3)%4])):(this||g)._cornerMarkers.forEach((g=>{g.setLatLng(m[g._index])}))}else console.error("The layer has no LatLngs")},_findCorners(){(this||g)._angle===void 0&&this.setInitAngle(ke((this||g)._map,(this||g)._layer.getLatLngs()[0][0],(this||g)._layer.getLatLngs()[0][1])||0);let _=(this||g)._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(_[0],_[2],this.getAngle(),(this||g)._map||this||g)}});ia.CircleMarker=ia.extend({_shape:"CircleMarker",initialize(_){(this||g)._layer=_,(this||g)._enabled=!1,(this||g)._minRadiusOption="minRadiusCircleMarker",(this||g)._maxRadiusOption="maxRadiusCircleMarker",(this||g)._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(_={draggable:!0,snappable:!0}){L.Util.setOptions(this||g,_),(this||g).options.editable&&((this||g).options.resizeableCircleMarker=(this||g).options.editable,delete(this||g).options.editable),(this||g).options.allowEditing&&(this||g)._layer._map?((this||g)._map=(this||g)._layer._map,this.enabled()&&this.disable(),this.applyOptions(),(this||g)._layer.on("remove",(this||g).disable,this||g),(this||g)._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},_extendingEnable(){(this||g)._layer.on("pm:dragstart",(this||g)._onDragStart,this||g),(this||g)._layer.on("pm:drag",(this||g)._onMarkerDrag,this||g),(this||g)._layer.on("pm:dragend",(this||g)._onMarkerDragEnd,this||g)},disable(){this.dragging()||((this||g)._map||((this||g)._map=(this||g)._layer._map),(this||g)._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),(this||g)._helperLayers&&((this||g)._helperLayers.clearLayers(),(this||g)._helperLayers.removeFrom((this||g)._map)),(this||g).options[(this||g)._editableOption]?((this||g)._map.off("move",(this||g)._syncMarkers,this||g),(this||g)._outerMarker.off("drag",(this||g)._handleOuterMarkerSnapping,this||g)):(this||g)._map.off("move",(this||g)._updateHiddenPolyCircle,this||g),this._extendingDisable(),(this||g)._layer.off("remove",(this||g).disable,this||g),(this||g)._layerEdited&&this._fireUpdate(),(this||g)._layerEdited=!1,this._fireDisable(),(this||g)._enabled=!1))},_extendingDisable(){(this||g)._layer.off("contextmenu",(this||g)._removeMarker,this||g)},enabled(){return(this||g)._enabled},toggleEdit(g){this.enabled()?this.disable():this.enable(g)},applyOptions(){(this||g).options[(this||g)._editableOption]?(this._initMarkers(),(this||g)._map.on("move",(this||g)._syncMarkers,this||g),(this||g).options.snappable?(this._initSnappableMarkers(),(this||g)._outerMarker.on("drag",(this||g)._handleOuterMarkerSnapping,this||g),(this||g)._outerMarker.on("move",(this||g)._syncHintLine,this||g),(this||g)._outerMarker.on("move",(this||g)._syncCircleRadius,this||g)):this._disableSnapping()):((this||g).options.draggable&&this.enableLayerDrag(),(this||g)._map.on("move",(this||g)._updateHiddenPolyCircle,this||g),(this||g).options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){(this||g).options.preventMarkerRemoval||(this||g)._layer.on("contextmenu",(this||g)._removeMarker,this||g)},_initMarkers(){let _=(this||g)._map;(this||g)._helperLayers&&((this||g)._helperLayers.removeFrom(_),(this||g)._helperLayers.clearLayers()),(this||g)._helperLayers=new L.FeatureGroup,(this||g)._helperLayers._pmTempLayer=!0,(this||g)._helperLayers.addTo(_);let m=(this||g)._layer.getLatLng(),y=(this||g)._layer._radius,v=this._getLatLngOnCircle(m,y);(this||g)._centerMarker=this._createCenterMarker(m),(this||g)._outerMarker=this._createOuterMarker(v),(this||g)._markers=[(this||g)._centerMarker,(this||g)._outerMarker],this._createHintLine((this||g)._centerMarker,(this||g)._outerMarker)},_getLatLngOnCircle(_,m){let y=(this||g)._map.project(_),v=L.point(y.x+m,y.y);return(this||g)._map.unproject(v)},_createHintLine(_,m){let y=_.getLatLng(),v=m.getLatLng();(this||g)._hintline=L.polyline([y,v],(this||g).options.hintlineStyle),this._setPane((this||g)._hintline,"layerPane"),(this||g)._hintline._pmTempLayer=!0,(this||g)._helperLayers.addLayer((this||g)._hintline)},_createCenterMarker(_){let m=this._createMarker(_);return(this||g).options.draggable?(L.DomUtil.addClass(m._icon,"leaflet-pm-draggable"),m.on("move",(this||g)._moveCircle,this||g)):m.dragging.disable(),m},_createOuterMarker(_){let m=this._createMarker(_);return m.on("drag",(this||g)._resizeCircle,this||g),m},_createMarker(_){let m=new L.Marker(_,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._origLatLng=_,m._pmTempLayer=!0,m.on("dragstart",(this||g)._onMarkerDragStart,this||g),m.on("drag",(this||g)._onMarkerDrag,this||g),m.on("dragend",(this||g)._onMarkerDragEnd,this||g),m.on("click",(this||g)._onVertexClick,this||g),(this||g)._helperLayers.addLayer(m),m},_moveCircle(_){if(_.target._cancelDragEventChain)return;let m=(this||g)._centerMarker.getLatLng();(this||g)._layer.setLatLng(m);let y=(this||g)._layer._radius,L=this._getLatLngOnCircle(m,y);(this||g)._outerMarker._latlng=L,(this||g)._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange((this||g)._layer.getLatLng(),"Edit")},_syncMarkers(){let _=(this||g)._layer.getLatLng(),m=(this||g)._layer._radius,y=this._getLatLngOnCircle(_,m);(this||g)._outerMarker.setLatLng(y),(this||g)._centerMarker.setLatLng(_),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){(this||g)._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let _=(this||g)._centerMarker.getLatLng(),m=(this||g)._outerMarker.getLatLng(),y=this._distanceCalculation(_,m);(this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]?(this||g)._layer.setRadius((this||g).options[(this||g)._minRadiusOption]):(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption]?(this||g)._layer.setRadius((this||g).options[(this||g)._maxRadiusOption]):(this||g)._layer.setRadius(y),this._updateHiddenPolyCircle(),this._fireChange((this||g)._layer.getLatLng(),"Edit")},_syncHintLine(){let _=(this||g)._centerMarker.getLatLng(),m=(this||g)._outerMarker.getLatLng();(this||g)._hintline.setLatLngs([_,m])},_removeMarker(){(this||g).options[(this||g)._editableOption]&&this.disable(),(this||g)._layer.remove(),this._fireRemove((this||g)._layer),this._fireRemove((this||g)._map,(this||g)._layer)},_onDragStart(){(this||g)._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(g){this._vertexValidation("move",g)&&this._fireMarkerDragStart(g)},_onMarkerDrag(g){let _=g.target;_ instanceof L.Marker&&!this._vertexValidationDrag(_)||this._fireMarkerDrag(g)},_onMarkerDragEnd(_){this._extedingMarkerDragEnd();let m=_.target;this._vertexValidationDragEnd(m)&&((this||g).options[(this||g)._editableOption]&&(this._fireEdit(),(this||g)._layerEdited=!0),this._fireMarkerDragEnd(_))},_extedingMarkerDragEnd(){(this||g)._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let _=(this||g)._layer;(this||g).options.snapDistance=(this||g).options.snapDistance||30,(this||g).options.snapSegment=(this||g).options.snapSegment===void 0||(this||g).options.snapSegment,_.off("pm:drag",(this||g)._handleSnapping,this||g),_.on("pm:drag",(this||g)._handleSnapping,this||g),_.off("pm:dragend",(this||g)._cleanupSnapping,this||g),_.on("pm:dragend",(this||g)._cleanupSnapping,this||g),_.off("pm:dragstart",(this||g)._unsnap,this||g),_.on("pm:dragstart",(this||g)._unsnap,this||g)},_disableSnappingDrag(){let _=(this||g)._layer;_.off("pm:drag",(this||g)._handleSnapping,this||g),_.off("pm:dragend",(this||g)._cleanupSnapping,this||g),_.off("pm:dragstart",(this||g)._unsnap,this||g)},_updateHiddenPolyCircle(){let _=(this||g)._layer._map||(this||g)._map;if(_){let m=L.PM.Utils.pxRadiusToMeterRadius((this||g)._layer.getRadius(),_,(this||g)._layer.getLatLng()),y=L.circle((this||g)._layer.getLatLng(),(this||g)._layer.options);y.setRadius(m);let v=_&&_.pm._isCRSSimple();(this||g)._hiddenPolyCircle?(this||g)._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(y,200,!v).getLatLngs()):(this||g)._hiddenPolyCircle=L.PM.Utils.circleToPolygon(y,200,!v),(this||g)._hiddenPolyCircle._parentCopy||((this||g)._hiddenPolyCircle._parentCopy=(this||g)._layer)}},_getNewDestinationOfOuterMarker(){let _=(this||g)._centerMarker.getLatLng(),m=(this||g)._outerMarker.getLatLng(),y=this._distanceCalculation(_,m);return(this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]?m=te((this||g)._map,_,m,this._getMinDistanceInMeter(_)):(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption]&&(m=te((this||g)._map,_,m,this._getMaxDistanceInMeter(_))),m},_handleOuterMarkerSnapping(){if((this||g)._outerMarker._snapped){let _=(this||g)._centerMarker.getLatLng(),m=(this||g)._outerMarker.getLatLng(),y=this._distanceCalculation(_,m);((this||g).options[(this||g)._minRadiusOption]&&y<(this||g).options[(this||g)._minRadiusOption]||(this||g).options[(this||g)._maxRadiusOption]&&y>(this||g).options[(this||g)._maxRadiusOption])&&(this||g)._outerMarker.setLatLng((this||g)._outerMarker._orgLatLng)}(this||g)._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(_,m){return(this||g)._map.project(_).distanceTo((this||g)._map.project(m))},_getMinDistanceInMeter(_){return L.PM.Utils.pxRadiusToMeterRadius((this||g).options[(this||g)._minRadiusOption],(this||g)._map,_)},_getMaxDistanceInMeter(_){return L.PM.Utils.pxRadiusToMeterRadius((this||g).options[(this||g)._maxRadiusOption],(this||g)._map,_)},_onVertexClick(g){g.target._dragging||this._fireVertexClick(g,void 0)}});ia.Circle=ia.CircleMarker.extend({_shape:"Circle",initialize(_){(this||g)._layer=_,(this||g)._enabled=!1,(this||g)._minRadiusOption="minRadiusCircle",(this||g)._maxRadiusOption="maxRadiusCircle",(this||g)._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(_){L.PM.Edit.CircleMarker.prototype.enable.call(this||g,_||{})},_extendingEnable(){},_extendingDisable(){(this||g)._layer.off("remove",(this||g).disable,this||g);let _=(this||g)._layer._path?(this||g)._layer._path:(this||g)._layer._renderer._container;L.DomUtil.removeClass(_,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let _=(this||g)._map&&(this||g)._map.pm._isCRSSimple();(this||g)._hiddenPolyCircle?(this||g)._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon((this||g)._layer,200,!_).getLatLngs()):(this||g)._hiddenPolyCircle=L.PM.Utils.circleToPolygon((this||g)._layer,200,!_),(this||g)._hiddenPolyCircle._parentCopy||((this||g)._hiddenPolyCircle._parentCopy=(this||g)._layer)},_distanceCalculation(_,m){return(this||g)._map.distance(_,m)},_getMinDistanceInMeter(){return(this||g).options[(this||g)._minRadiusOption]},_getMaxDistanceInMeter(){return(this||g).options[(this||g)._maxRadiusOption]},_onVertexClick(g){g.target._dragging||this._fireVertexClick(g,void 0)}});ia.ImageOverlay=ia.extend({_shape:"ImageOverlay",initialize(_){(this||g)._layer=_,(this||g)._enabled=!1},toggleEdit(g){this.enabled()?this.disable():this.enable(g)},enabled(){return(this||g)._enabled},enable(_={draggable:!0,snappable:!0}){if(L.Util.setOptions(this||g,_),(this||g)._map=(this||g)._layer._map,!!(this||g)._map){if(!(this||g).options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),(this||g)._layer.on("remove",(this||g).disable,this||g),(this||g)._enabled=!0,(this||g)._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){(this||g)._dragging||((this||g)._map||((this||g)._map=(this||g)._layer._map),this.disableLayerDrag(),(this||g)._layer.off("remove",(this||g).disable,this||g),this.enabled()||((this||g)._layerEdited&&this._fireUpdate(),(this||g)._layerEdited=!1,this._fireDisable()),(this||g)._enabled=!1)},_findCorners(){let _=(this||g)._layer.getBounds(),m=_.getNorthWest(),y=_.getNorthEast(),L=_.getSouthEast(),v=_.getSouthWest();return[m,y,L,v]}});ia.Text=ia.extend({_shape:"Text",initialize(_){(this||g)._layer=_,(this||g)._enabled=!1},enable(_){if(L.Util.setOptions(this||g,_),!!(this||g).textArea){if(!(this||g).options.allowEditing||!(this||g)._layer._map){this.disable();return}(this||g)._map=(this||g)._layer._map,this.enabled()&&this.disable(),this.applyOptions(),(this||g)._safeToCacheDragState=!0,this._focusChange(),(this||g).textArea.readOnly=!1,(this||g).textArea.classList.remove("pm-disabled"),(this||g)._layer.on("remove",(this||g).disable,this||g),L.DomEvent.on((this||g).textArea,"input",(this||g)._autoResize,this||g),L.DomEvent.on((this||g).textArea,"focus",(this||g)._focusChange,this||g),L.DomEvent.on((this||g).textArea,"blur",(this||g)._focusChange,this||g),(this||g)._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off((this||g).textArea,"mousedown",(this||g)._preventTextSelection),(this||g)._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;(this||g)._layer.off("remove",(this||g).disable,this||g),L.DomEvent.off((this||g).textArea,"input",(this||g)._autoResize,this||g),L.DomEvent.off((this||g).textArea,"focus",(this||g)._focusChange,this||g),L.DomEvent.off((this||g).textArea,"blur",(this||g)._focusChange,this||g),L.DomEvent.off(document,"click",(this||g)._documentClick,this||g),this._focusChange(),(this||g).textArea.readOnly=!0,(this||g).textArea.classList.add("pm-disabled");let _=document.activeElement;(this||g).textArea.focus(),(this||g).textArea.selectionStart=0,(this||g).textArea.selectionEnd=0,L.DomEvent.on((this||g).textArea,"mousedown",(this||g)._preventTextSelection),_.focus(),(this||g)._disableOnBlurActive=!1,(this||g)._layerEdited&&this._fireUpdate(),(this||g)._layerEdited=!1,this._fireDisable(),(this||g)._enabled=!1},enabled(){return(this||g)._enabled},toggleEdit(g){this.enabled()?this.disable():this.enable(g)},applyOptions(){(this||g).options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let _=(this||g)._layer;(this||g).options.snapDistance=(this||g).options.snapDistance||30,(this||g).options.snapSegment=(this||g).options.snapSegment===void 0||(this||g).options.snapSegment,_.off("pm:drag",(this||g)._handleSnapping,this||g),_.on("pm:drag",(this||g)._handleSnapping,this||g),_.off("pm:dragend",(this||g)._cleanupSnapping,this||g),_.on("pm:dragend",(this||g)._cleanupSnapping,this||g),_.off("pm:dragstart",(this||g)._unsnap,this||g),_.on("pm:dragstart",(this||g)._unsnap,this||g)},_disableSnapping(){let _=(this||g)._layer;_.off("pm:drag",(this||g)._handleSnapping,this||g),_.off("pm:dragend",(this||g)._cleanupSnapping,this||g),_.off("pm:dragstart",(this||g)._unsnap,this||g)},_autoResize(){(this||g).textArea.style.height="1px",(this||g).textArea.style.width="1px";let _=(this||g).textArea.scrollHeight>21?(this||g).textArea.scrollHeight:21,m=(this||g).textArea.scrollWidth>16?(this||g).textArea.scrollWidth:16;(this||g).textArea.style.height=`${_}px`,(this||g).textArea.style.width=`${m}px`,(this||g)._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){(this||g)._disableOnBlurActive=!0,setTimeout((()=>{this.enabled()&&L.DomEvent.on(document,"click",(this||g)._documentClick,this||g)}),100)},_documentClick(_){_.target!==(this||g).textArea&&(this.disable(),!this.getText()&&(this||g).options.removeIfEmpty&&this.remove())},_focusChange(_={}){let m=(this||g)._hasFocus;(this||g)._hasFocus=_.type==="focus",!m!=!(this||g)._hasFocus&&((this||g)._hasFocus?(this._applyFocus(),(this||g)._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),(this||g)._focusText!==this.getText()&&(this._fireEdit(),(this||g)._layerEdited=!0)))},_applyFocus(){(this||g).textArea.classList.add("pm-hasfocus"),(this||g)._map.dragging&&((this||g)._safeToCacheDragState&&((this||g)._originalMapDragState=(this||g)._map.dragging._enabled,(this||g)._safeToCacheDragState=!1),(this||g)._map.dragging.disable())},_removeFocus(){(this||g)._map.dragging&&((this||g)._originalMapDragState&&(this||g)._map.dragging.enable(),(this||g)._safeToCacheDragState=!0),(this||g).textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");(this||g).textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");(this||g).textArea.blur(),(this||g)._disableOnBlurActive&&this.disable()},hasFocus(){return(this||g)._hasFocus},getElement(){return(this||g).textArea},setText(_){_&&((this||g).textArea.value=_),this._autoResize()},getText(){return(this||g).textArea.value},_initTextMarker(){if((this||g).textArea=L.PM.Draw.Text.prototype._createTextArea.call(this||g),(this||g).options.className){let _=(this||g).options.className.split(" ");(this||g).textArea.classList.add(..._)}let _=L.PM.Draw.Text.prototype._createTextIcon.call(this||g,(this||g).textArea);(this||g)._layer.setIcon(_),(this||g)._layer.once("add",(this||g)._createTextMarker,this||g)},_createTextMarker(_=!1){(this||g)._layer.off("add",(this||g)._createTextMarker,this||g),(this||g)._layer.getElement().tabIndex=-1,(this||g).textArea.wrap="off",(this||g).textArea.style.overflow="hidden",(this||g).textArea.style.height=L.DomUtil.getStyle((this||g).textArea,"font-size"),(this||g).textArea.style.width="1px",(this||g)._layer.options.text&&this.setText((this||g)._layer.options.text),this._autoResize(),_===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(g){g.preventDefault()}});var lr=function(_,m,y,L,v,k){(this||g)._matrix=[_,m,y,L,v,k]};lr.init=()=>new L.PM.Matrix(1,0,0,1,0,0);lr.prototype={transform(g){return this._transform(g.clone())},_transform(_){let m=(this||g)._matrix,{x:y,y:L}=_;return _.x=m[0]*y+m[1]*L+m[4],_.y=m[2]*y+m[3]*L+m[5],_},untransform(_){let m=(this||g)._matrix;return new L.Point((_.x/m[0]-m[4])/m[0],(_.y/m[2]-m[5])/m[2])},clone(){let _=(this||g)._matrix;return new L.PM.Matrix(_[0],_[1],_[2],_[3],_[4],_[5])},translate(_){if(_===void 0)return new L.Point((this||g)._matrix[4],(this||g)._matrix[5]);let m,y;return typeof _=="number"?(m=_,y=_):(m=_.x,y=_.y),this._add(1,0,0,1,m,y)},scale(_,m){if(_===void 0)return new L.Point((this||g)._matrix[0],(this||g)._matrix[3]);let y,v;return m=m||L.point(0,0),typeof _=="number"?(y=_,v=_):(y=_.x,v=_.y),this._add(y,0,0,v,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},rotate(g,_){let m=Math.cos(g),y=Math.sin(g);return _=_||new L.Point(0,0),this._add(m,y,-y,m,_.x,_.y)._add(1,0,0,1,-_.x,-_.y)},flip(){return(this||g)._matrix[1]*=-1,(this||g)._matrix[2]*=-1,this||g},_add(_,m,y,v,k,M){let x,w=[[],[],[]],C=(this||g)._matrix,B=[[C[0],C[2],C[4]],[C[1],C[3],C[5]],[0,0,1]],I=[[_,y,k],[m,v,M],[0,0,1]];_&&_ instanceof L.PM.Matrix&&(C=_._matrix,I=[[C[0],C[2],C[4]],[C[1],C[3],C[5]],[0,0,1]]);for(let g=0;g<3;g+=1)for(let _=0;_<3;_+=1){x=0;for(let m=0;m<3;m+=1)x+=B[g][m]*I[m][_];w[g][_]=x}return(this||g)._matrix=[w[0][0],w[1][0],w[0][1],w[1][1],w[0][2],w[1][2]],this||g}};var sa=lr;var oa={calcMiddleLatLng(g,_,m){let y=g.project(_),L=g.project(m);return g.unproject(y._add(L)._divideBy(2))},findLayers(g){let _=[];return g.eachLayer((g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&_.push(g)})),_=_.filter((g=>!!g.pm)),_=_.filter((g=>!g._pmTempLayer)),_=_.filter((g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),_},circleToPolygon(g,_=60,m=!0){let y=g.getLatLng(),v=g.getRadius(),k=Ei(y,v,_,0,m),M=[];for(let g=0;g<k.length;g+=1){let _=[k[g].lat,k[g].lng];M.push(_)}return L.polygon(M,g.options)},disablePopup(g){g.getPopup()&&(g._tempPopupCopy=g.getPopup(),g.unbindPopup())},enablePopup(g){g._tempPopupCopy&&(g.bindPopup(g._tempPopupCopy),delete g._tempPopupCopy)},_fireEvent(g,_,m,y=!1){g.fire(_,m,y);let{groups:L}=this.getAllParentGroups(g);L.forEach((g=>{g.fire(_,m,y)}))},getAllParentGroups(g){let _=[],m=[],r=g=>{for(let y in g._eventParents)if(_.indexOf(y)===-1){_.push(y);let L=g._eventParents[y];m.push(L),r(L)}};return!g._pmLastGroupFetch||!g._pmLastGroupFetch.time||(new Date).getTime()-g._pmLastGroupFetch.time>1e3?(r(g),g._pmLastGroupFetch={time:(new Date).getTime(),groups:m,groupIds:_},{groupIds:_,groups:m}):{groups:g._pmLastGroupFetch.groups,groupIds:g._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ei,getTranslation:V,findDeepCoordIndex(g,_,m=!0){let y,n=g=>(v,k)=>{let M=g.concat(k);if(m){if(v.lat&&v.lat===_.lat&&v.lng===_.lng)return y=M,!0}else if(v.lat&&L.latLng(v).equals(_))return y=M,!0;return Array.isArray(v)&&v.some(n(M))};g.some(n([]));let v={};return y&&(v={indexPath:y,index:y[y.length-1],parentPath:y.slice(0,y.length-1)}),v},findDeepMarkerIndex(g,_){let m,r=g=>(y,L)=>{let v=g.concat(L);return y._leaflet_id===_._leaflet_id?(m=v,!0):Array.isArray(y)&&y.some(r(v))};g.some(r([]));let y={};return m&&(y={indexPath:m,index:m[m.length-1],parentPath:m.slice(0,m.length-1)}),y},_getIndexFromSegment(g,_){if(_&&_.length===2){let m=this.findDeepCoordIndex(g,_[0]),y=this.findDeepCoordIndex(g,_[1]),L=Math.max(m.index,y.index);return(m.index===0||y.index===0)&&L!==1&&(L+=1),{indexA:m,indexB:y,newIndex:L,indexPath:m.indexPath,parentPath:m.parentPath}}return null},_getRotatedRectangle(g,_,m,y){let L=Gt(y,g),v=Gt(y,_),k=m*Math.PI/180,M=Math.cos(k),x=Math.sin(k),w=(v.x-L.x)*M+(v.y-L.y)*x,C=(v.y-L.y)*M-(v.x-L.x)*x,B=w*M+L.x,I=w*x+L.y,j=-C*x+L.x,z=C*M+L.y,N=Re(y,L),F=Re(y,{x:B,y:I}),U=Re(y,v),K=Re(y,{x:j,y:z});return[N,F,U,K]},pxRadiusToMeterRadius(g,_,m){let y=_.project(m),v=L.point(y.x+g,y.y);return _.distance(_.unproject(v),m)}},la=oa;L.PM=L.PM||{version:Zi.version,Map:qr,Toolbar:Xr,Draw:tn,Edit:ia,Utils:la,Matrix:sa,activeLang:"en",optIn:!1,initialize(g){this.addInitHooks(g)},setOptIn(_){(this||g).optIn=!!_},addInitHooks(){function t(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Map(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Map(this||g)),(this||g).pm&&(this||g).pm.setGlobalOptions({})}L.Map.addInitHook(t);function e(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.LayerGroup(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.LayerGroup(this||g))}L.LayerGroup.addInitHook(e);function i(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).options.textMarker?((this||g).pm=new L.PM.Edit.Text(this||g),(this||g).options._textMarkerOverPM||(this||g).pm._initTextMarker(),delete(this||g).options._textMarkerOverPM):(this||g).pm=new L.PM.Edit.Marker(this||g)):(this||g).options.pmIgnore||((this||g).options.textMarker?((this||g).pm=new L.PM.Edit.Text(this||g),(this||g).options._textMarkerOverPM||(this||g).pm._initTextMarker(),delete(this||g).options._textMarkerOverPM):(this||g).pm=new L.PM.Edit.Marker(this||g))}L.Marker.addInitHook(i);function r(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.CircleMarker(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.CircleMarker(this||g))}L.CircleMarker.addInitHook(r);function n(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.Line(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.Line(this||g))}L.Polyline.addInitHook(n);function s(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.Polygon(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.Polygon(this||g))}L.Polygon.addInitHook(s);function a(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.Rectangle(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.Rectangle(this||g))}L.Rectangle.addInitHook(a);function o(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.Circle(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.Circle(this||g))}L.Circle.addInitHook(o);function l(){(this||g).pm=void 0,L.PM.optIn?(this||g).options.pmIgnore===!1&&((this||g).pm=new L.PM.Edit.ImageOverlay(this||g)):(this||g).options.pmIgnore||((this||g).pm=new L.PM.Edit.ImageOverlay(this||g))}L.ImageOverlay.addInitHook(l)},reInitLayer(g){g instanceof L.LayerGroup&&g.eachLayer((g=>{this.reInitLayer(g)})),g.pm||L.PM.optIn&&g.options.pmIgnore!==!1||g.options.pmIgnore||(g instanceof L.Map?g.pm=new L.PM.Map(g):g instanceof L.Marker?g.options.textMarker?(g.pm=new L.PM.Edit.Text(g),g.pm._initTextMarker(),g.pm._createTextMarker(!1)):g.pm=new L.PM.Edit.Marker(g):g instanceof L.Circle?g.pm=new L.PM.Edit.Circle(g):g instanceof L.CircleMarker?g.pm=new L.PM.Edit.CircleMarker(g):g instanceof L.Rectangle?g.pm=new L.PM.Edit.Rectangle(g):g instanceof L.Polygon?g.pm=new L.PM.Edit.Polygon(g):g instanceof L.Polyline?g.pm=new L.PM.Edit.Line(g):g instanceof L.LayerGroup?g.pm=new L.PM.Edit.LayerGroup(g):g instanceof L.ImageOverlay&&(g.pm=new L.PM.Edit.ImageOverlay(g)))}};L.version==="1.7.1"&&L.Canvas.include({_onClick(_){let m,y,v=(this||g)._map.mouseEventToLayerPoint(_);for(let L=(this||g)._drawFirst;L;L=L.next)m=L.layer,m.options.interactive&&m._containsPoint(v)&&(!(_.type==="click"||_.type==="preclick")||!(this||g)._map._draggableMoved(m))&&(y=m);y&&(L.DomEvent.fakeStop(_),this._fireEvent([y],_))}});L.PM.initialize()})();var _={};export{_ as default};

